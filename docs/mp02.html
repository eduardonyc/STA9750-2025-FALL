<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eduardo Alarcon">

<title>STA 9750 Mini-Project #02: Making Backyards Affordable for All â€“ STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f245066ca199b7326ac6b360085ddf3a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/viz-1.8.2/viz.js"></script>
<link href="site_libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="site_libs/grViz-binding-1.0.11/grViz.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>
<script src="site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mp01.html"> 
<span class="menu-text">Mini-Project 1</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./mp02.html" aria-current="page"> 
<span class="menu-text">Mini-Project 2</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">STA 9750 Mini-Project #02: Making Backyards Affordable for All</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Eduardo Alarcon </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<style>
strong, b {
  font-weight: bold !important;
}
</style>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all required packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)    </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DiagrammeR)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gifski)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmltools)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="task-1-data-import" class="level2">
<h2 class="anchored" data-anchor-id="task-1-data-import">Task 1: Data Import</h2>
<section id="data-acquistion" class="level3">
<h3 class="anchored" data-anchor-id="data-acquistion">Data Acquistion</h3>
<p>Following the guidelines for Mini Project #02, the code below contains all the essential content that addresses Tasks 2 through 7.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>))){</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>), <span class="at">showWarnings=</span><span class="cn">FALSE</span>, <span class="at">recursive=</span><span class="cn">TRUE</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>library <span class="ot">&lt;-</span> <span class="cf">function</span>(pkg){</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Mask base::library() to automatically install packages if needed</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Masking is important here so downlit picks up packages and links</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">## to documentation</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    pkg <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">substitute</span>(pkg))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">"https://cloud.r-project.org"</span>))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(pkg, <span class="at">character.only=</span><span class="cn">TRUE</span>, <span class="at">quietly=</span><span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(pkg)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">require</span>(pkg, <span class="at">character.only=</span><span class="cn">TRUE</span>, <span class="at">quietly=</span><span class="cn">TRUE</span>))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>get_acs_all_years <span class="ot">&lt;-</span> <span class="cf">function</span>(variable, <span class="at">geography=</span><span class="st">"cbsa"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>                              <span class="at">start_year=</span><span class="dv">2009</span>, <span class="at">end_year=</span><span class="dv">2023</span>){</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"{variable}_{geography}_{start_year}_{end_year}.csv"</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, fname)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        YEARS <span class="ot">&lt;-</span> <span class="fu">seq</span>(start_year, end_year)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        YEARS <span class="ot">&lt;-</span> YEARS[YEARS <span class="sc">!=</span> <span class="dv">2020</span>] <span class="co"># Drop 2020 - No survey (covid)</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        ALL_DATA <span class="ot">&lt;-</span> <span class="fu">map</span>(YEARS, <span class="cf">function</span>(yy){</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>            tidycensus<span class="sc">::</span><span class="fu">get_acs</span>(geography, variable, <span class="at">year=</span>yy, <span class="at">survey=</span><span class="st">"acs1"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">year=</span>yy) <span class="sc">%&gt;%</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(<span class="sc">-</span>moe, <span class="sc">-</span>variable) <span class="sc">%&gt;%</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rename</span>(<span class="sc">!!</span><span class="at">variable :=</span> estimate)</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        }) <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        <span class="fu">write_csv</span>(ALL_DATA, fname)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(fname, <span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Household income (12 month)</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>INCOME <span class="ot">&lt;-</span> <span class="fu">get_acs_all_years</span>(<span class="st">"B19013_001"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">household_income =</span> B19013_001)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly rent</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>RENT <span class="ot">&lt;-</span> <span class="fu">get_acs_all_years</span>(<span class="st">"B25064_001"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">monthly_rent =</span> B25064_001)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Total population</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>POPULATION <span class="ot">&lt;-</span> <span class="fu">get_acs_all_years</span>(<span class="st">"B01003_001"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">population =</span> B01003_001)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of households</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>HOUSEHOLDS <span class="ot">&lt;-</span> <span class="fu">get_acs_all_years</span>(<span class="st">"B11001_001"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">households =</span> B11001_001)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>get_building_permits <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">start_year =</span> <span class="dv">2009</span>, <span class="at">end_year =</span> <span class="dv">2023</span>){</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"housing_units_{start_year}_{end_year}.csv"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, fname)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        HISTORICAL_YEARS <span class="ot">&lt;-</span> <span class="fu">seq</span>(start_year, <span class="dv">2018</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        HISTORICAL_DATA <span class="ot">&lt;-</span> <span class="fu">map</span>(HISTORICAL_YEARS, <span class="cf">function</span>(yy){</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>            historical_url <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"https://www.census.gov/construction/bps/txt/tb3u{yy}.txt"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>            LINES <span class="ot">&lt;-</span> <span class="fu">readLines</span>(historical_url)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>)]</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>            CBSA_LINES <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(LINES, <span class="st">"^[[:digit:]]"</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>            CBSA <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_sub</span>(LINES[CBSA_LINES], <span class="dv">5</span>, <span class="dv">10</span>))</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>            PERMIT_LINES <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(<span class="fu">str_sub</span>(LINES, <span class="dv">48</span>, <span class="dv">53</span>), <span class="st">"[[:digit:]]"</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>            PERMITS <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_sub</span>(LINES[PERMIT_LINES], <span class="dv">48</span>, <span class="dv">53</span>))</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">data_frame</span>(<span class="at">CBSA =</span> CBSA,</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>                       <span class="at">new_housing_units_permitted =</span> PERMITS, </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>                       <span class="at">year =</span> yy)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        }) <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        CURRENT_YEARS <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">2019</span>, end_year)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        CURRENT_DATA <span class="ot">&lt;-</span> <span class="fu">map</span>(CURRENT_YEARS, <span class="cf">function</span>(yy){</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>            current_url <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"https://www.census.gov/construction/bps/xls/msaannual_{yy}99.xls"</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>            temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>            <span class="fu">download.file</span>(current_url, <span class="at">destfile =</span> temp, <span class="at">mode=</span><span class="st">"wb"</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>            fallback <span class="ot">&lt;-</span> <span class="cf">function</span>(.f1, .f2){</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>                <span class="cf">function</span>(...){</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">tryCatch</span>(<span class="fu">.f1</span>(...), </span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>                             <span class="at">error=</span><span class="cf">function</span>(e) <span class="fu">.f2</span>(...))</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>            reader <span class="ot">&lt;-</span> <span class="fu">fallback</span>(read_xlsx, read_xls)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>            <span class="fu">reader</span>(temp, <span class="at">skip=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>                <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(CBSA, Total) <span class="sc">%&gt;%</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">year =</span> yy) <span class="sc">%&gt;%</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rename</span>(<span class="at">new_housing_units_permitted =</span> Total)</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>        }) <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>        ALL_DATA <span class="ot">&lt;-</span> <span class="fu">rbind</span>(HISTORICAL_DATA, CURRENT_DATA)</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>        <span class="fu">write_csv</span>(ALL_DATA, fname)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(fname, <span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>PERMITS <span class="ot">&lt;-</span> <span class="fu">get_building_permits</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>get_bls_industry_codes <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, <span class="st">"bls_industry_codes.csv"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        resp <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://www.bls.gov"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_url_path</span>(<span class="st">"cew"</span>, <span class="st">"classifications"</span>, <span class="st">"industry"</span>, <span class="st">"industry-titles.htm"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_headers</span>(<span class="st">`</span><span class="at">User-Agent</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_error</span>(<span class="at">is_error =</span> \(resp) <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_perform</span>()</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">resp_check_status</span>(resp)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        naics_table <span class="ot">&lt;-</span> <span class="fu">resp_body_html</span>(resp) <span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>            <span class="fu">html_element</span>(<span class="st">"#naics_titles"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>            <span class="fu">html_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">title =</span> <span class="fu">str_trim</span>(<span class="fu">str_remove</span>(<span class="fu">str_remove</span>(<span class="st">`</span><span class="at">Industry Title</span><span class="st">`</span>, Code), <span class="st">"NAICS"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Industry Title</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">depth =</span> <span class="fu">if_else</span>(<span class="fu">nchar</span>(Code) <span class="sc">&lt;=</span> <span class="dv">5</span>, <span class="fu">nchar</span>(Code) <span class="sc">-</span> <span class="dv">1</span>, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(depth))</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>        naics_table <span class="ot">&lt;-</span> naics_table <span class="sc">%&gt;%</span> </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(depth <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level4_title=</span>title) <span class="sc">%&gt;%</span> </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">level1_code =</span> <span class="fu">str_sub</span>(Code, <span class="at">end=</span><span class="dv">2</span>), </span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>                   <span class="at">level2_code =</span> <span class="fu">str_sub</span>(Code, <span class="at">end=</span><span class="dv">3</span>), </span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>                   <span class="at">level3_code =</span> <span class="fu">str_sub</span>(Code, <span class="at">end=</span><span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>            <span class="fu">left_join</span>(naics_table, <span class="fu">join_by</span>(level1_code <span class="sc">==</span> Code)) <span class="sc">%&gt;%</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level1_title=</span>title) <span class="sc">%&gt;%</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>            <span class="fu">left_join</span>(naics_table, <span class="fu">join_by</span>(level2_code <span class="sc">==</span> Code)) <span class="sc">%&gt;%</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level2_title=</span>title) <span class="sc">%&gt;%</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>            <span class="fu">left_join</span>(naics_table, <span class="fu">join_by</span>(level3_code <span class="sc">==</span> Code)) <span class="sc">%&gt;%</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level3_title=</span>title) <span class="sc">%&gt;%</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"depth"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level4_code =</span> Code) <span class="sc">%&gt;%</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(level1_title, level2_title, level3_title, level4_title, </span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>                   level1_code,  level2_code,  level3_code,  level4_code)</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>        <span class="fu">write_csv</span>(naics_table, fname)</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(fname, <span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>INDUSTRY_CODES <span class="ot">&lt;-</span> <span class="fu">get_bls_industry_codes</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>get_bls_qcew_annual_averages <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">start_year=</span><span class="dv">2009</span>, <span class="at">end_year=</span><span class="dv">2023</span>){</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"bls_qcew_{start_year}_{end_year}.csv.gz"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, fname)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    YEARS <span class="ot">&lt;-</span> <span class="fu">seq</span>(start_year, end_year)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    YEARS <span class="ot">&lt;-</span> YEARS[YEARS <span class="sc">!=</span> <span class="dv">2020</span>] <span class="co"># Drop Covid year to match ACS</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        ALL_DATA <span class="ot">&lt;-</span> <span class="fu">map</span>(YEARS, <span class="at">.progress=</span><span class="cn">TRUE</span>, <span class="fu">possibly</span>(<span class="cf">function</span>(yy){</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>            fname_inner <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, <span class="fu">glue</span>(<span class="st">"{yy}_qcew_annual_singlefile.zip"</span>))</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname_inner)){</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                <span class="fu">request</span>(<span class="st">"https://www.bls.gov"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">req_url_path</span>(<span class="st">"cew"</span>, <span class="st">"data"</span>, <span class="st">"files"</span>, yy, <span class="st">"csv"</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                                 <span class="fu">glue</span>(<span class="st">"{yy}_annual_singlefile.zip"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">req_headers</span>(<span class="st">`</span><span class="at">User-Agent</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">req_retry</span>(<span class="at">max_tries=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">req_perform</span>(fname_inner)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(<span class="fu">file.info</span>(fname_inner)<span class="sc">$</span>size <span class="sc">&lt;</span> <span class="fl">755e5</span>){</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>                <span class="fu">warning</span>(<span class="fu">sQuote</span>(fname_inner), <span class="st">"appears corrupted. Please delete and retry this step."</span>)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>            <span class="fu">read_csv</span>(fname_inner, </span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>                     <span class="at">show_col_types=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">YEAR =</span> yy) <span class="sc">%&gt;%</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(area_fips, </span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>                       industry_code, </span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>                       annual_avg_emplvl, </span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>                       total_annual_wages, </span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>                       YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(<span class="fu">nchar</span>(industry_code) <span class="sc">&lt;=</span> <span class="dv">5</span>, </span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">str_starts</span>(area_fips, <span class="st">"C"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(<span class="fu">str_detect</span>(industry_code, <span class="st">"-"</span>, <span class="at">negate=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">FIPS =</span> area_fips, </span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>                       <span class="at">INDUSTRY =</span> <span class="fu">as.integer</span>(industry_code), </span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>                       <span class="at">EMPLOYMENT =</span> <span class="fu">as.integer</span>(annual_avg_emplvl), </span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>                       <span class="at">TOTAL_WAGES =</span> total_annual_wages) <span class="sc">%&gt;%</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(<span class="sc">-</span>area_fips, </span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">-</span>industry_code, </span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">-</span>annual_avg_emplvl, </span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">-</span>total_annual_wages) <span class="sc">%&gt;%</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>                <span class="co"># 10 is a special value: "all industries" , so omit</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(INDUSTRY <span class="sc">!=</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">AVG_WAGE =</span> TOTAL_WAGES <span class="sc">/</span> EMPLOYMENT)</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>        })) <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>        <span class="fu">write_csv</span>(ALL_DATA, fname)</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>    ALL_DATA <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(fname, <span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>    ALL_DATA_YEARS <span class="ot">&lt;-</span> <span class="fu">unique</span>(ALL_DATA<span class="sc">$</span>YEAR)</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>    YEARS_DIFF <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(YEARS, ALL_DATA_YEARS)</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">length</span>(YEARS_DIFF) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"Download failed for the following years: "</span>, YEARS_DIFF, </span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>             <span class="st">". Please delete intermediate files and try again."</span>)</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    ALL_DATA</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>WAGES <span class="ot">&lt;-</span> <span class="fu">get_bls_qcew_annual_averages</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="extra-credit-1" class="level2">
<h2 class="anchored" data-anchor-id="extra-credit-1">Extra Credit # 1</h2>
<section id="data-integration-structure" class="level3">
<h3 class="anchored" data-anchor-id="data-integration-structure">Data Integration Structure</h3>
<p>This analysis integrates data from three federal agencies. The Census Bureauâ€™s American Community Survey (ACS), the Census Building Permits database, and the Bureau of Labor Statistics (BLS) each use distinct identification systems for Core-Based Statistical Areas (CBSAs).</p>
</section>
<section id="integration-strategy" class="level3">
<h3 class="anchored" data-anchor-id="integration-strategy">Integration Strategy</h3>
<p>The four main ACS data tables (INCOME, RENT, POPULATION, and HOUSEHOLDS) are all organized by location (GEOID) and year. Because they share this identical structure, they are easy to combine using standard <code>left_join()</code> operations. These tables provide the core economic and demographic data for the analysis.</p>
<p>To connect ACS to the Building Permits database, we standardize both to a common 5-character CBSA key by copying ACS GEOID as a string key, and zero-padding the Permits integer CBSA to 5 characters.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>acs <span class="ot">&lt;-</span> acs <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cbsa_str =</span> GEOID, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">CBSA =</span> <span class="fu">as.integer</span>(GEOID)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>permits <span class="ot">&lt;-</span> permits <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cbsa_str =</span> <span class="fu">sprintf</span>(<span class="st">"%05d"</span>, CBSA))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The second transformation links BLS wage data to Census tables by converting BLS FIPS format back to standard 5-digit CBSA codes. BLS codes like â€œC1018â€ need to be padded to match Census format â€œ10180â€:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">.digits  =</span> <span class="fu">sub</span>(<span class="st">"^C"</span>, <span class="st">""</span>, FIPS), </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">cbsa_str =</span> <span class="fu">ifelse</span>(<span class="fu">nchar</span>(.digits) <span class="sc">==</span> <span class="dv">4</span>, <span class="fu">paste0</span>(.digits, <span class="st">"0"</span>), .digits)) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="sc">-</span>.digits)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Additionally, there is a different naming convention for â€œyear.â€ Specifically, ACS and Census tables use lowercase <code>year</code>, while BLS tables use uppercase <code>YEAR</code>. Join operations must explicitly map these columns:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(WAGES, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"FIPS"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"YEAR"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Lastly, the INDUSTRY_CODES table lists industry categories (NAICS) to facilitate job analysis. To use it, we must change the INDUSTRY column from an integer to a character type, so it can match the level4_code column.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>WAGES <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">INDUSTRY =</span> <span class="fu">as.character</span>(INDUSTRY)) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(INDUSTRY_CODES, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"INDUSTRY"</span> <span class="ot">=</span> <span class="st">"level4_code"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The Relationship Diagram below highlights these naming conventions, showing the connections between these data sources.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-relationship-diagram</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Data Integration Architecture: Entity Relationships &amp; Transformation Logic Across Federal Data Sources"</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "100%"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">grViz</span>(<span class="st">"</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="st">digraph MP02_ERD {</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="st">  graph [rankdir=TB, fontname=Arial, bgcolor=white, splines=polyline, nodesep=2, ranksep=3.5, margin='1.5,0.5',</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="st">         label='Data Integration Architecture:</span><span class="sc">\\</span><span class="st">nEntity Relationships &amp; Transformation Logic Across Federal Data Sources', </span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="st">         labelloc='t', </span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="st">         fontsize=50]</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="st">  node [shape=box, style='rounded,filled', fontname=Arial, fontsize=28, margin=0.7, width=7, height=2.5]</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="st">  edge [fontname=Arial, fontsize=22, labelfloat=true, labeldistance=4]</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="st">  INCOME [label='INCOME</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nGEOID (PK)</span><span class="sc">\\</span><span class="st">nNAME</span><span class="sc">\\</span><span class="st">nyear (PK)</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nhousehold_income', fillcolor='lightblue']</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="st">  RENT [label='RENT</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nGEOID (PK)</span><span class="sc">\\</span><span class="st">nNAME</span><span class="sc">\\</span><span class="st">nyear (PK)</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nmonthly_rent', fillcolor='lightblue']</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="st">  POPULATION [label='POPULATION</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nGEOID (PK)</span><span class="sc">\\</span><span class="st">nNAME</span><span class="sc">\\</span><span class="st">nyear (PK)</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">npopulation', fillcolor='lightblue']</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="st">  HOUSEHOLDS [label='HOUSEHOLDS</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nGEOID (PK)</span><span class="sc">\\</span><span class="st">nNAME</span><span class="sc">\\</span><span class="st">nyear (PK)</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nhouseholds', fillcolor='lightblue']</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="st">  PERMITS [label='PERMITS</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nCBSA (PK)</span><span class="sc">\\</span><span class="st">nyear (PK)</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nnew_housing_units_permitted', fillcolor='#90EE90', width=8]</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="st">  WAGES [label='WAGES</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nFIPS (PK)</span><span class="sc">\\</span><span class="st">nINDUSTRY (PK, FK)</span><span class="sc">\\</span><span class="st">nYEAR (PK)</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nEMPLOYMENT</span><span class="sc">\\</span><span class="st">nTOTAL_WAGES</span><span class="sc">\\</span><span class="st">nAVG_WAGE', fillcolor='lightcoral', width=8, height=3]</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="st">  INDUSTRY [label='INDUSTRY_CODES</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nlevel4_code (PK)</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">nlevel4_title</span><span class="sc">\\</span><span class="st">nlevel3_code/title</span><span class="sc">\\</span><span class="st">nlevel2_code/title</span><span class="sc">\\</span><span class="st">nlevel1_code/title', fillcolor='lightcoral', width=8, height=3]</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="st">  INCOME -&gt; RENT [label='      GEOID + year      ', color=blue, penwidth=5, fontcolor=blue, fontsize=22]</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="st">  RENT -&gt; POPULATION [label='      GEOID + year      ', color=blue, penwidth=5, fontcolor=blue, fontsize=22]</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="st">  POPULATION -&gt; HOUSEHOLDS [label='      GEOID + year      ', color=blue, penwidth=5, fontcolor=blue, fontsize=22]</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="st">  POPULATION -&gt; PERMITS [label='      Extract CBSA      </span><span class="sc">\\</span><span class="st">n      from GEOID      ', color=orange, penwidth=5, style=dashed, fontcolor='#CC5500', fontsize=22]</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="st">  PERMITS -&gt; WAGES [label='      Format CBSA      </span><span class="sc">\\</span><span class="st">n      to FIPS      ', color=orange, penwidth=5, style=dashed, fontcolor='#CC5500', fontsize=22]</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="st">  WAGES -&gt; INDUSTRY [label='      INDUSTRY to      </span><span class="sc">\\</span><span class="st">n      level4_code      ', color=red, penwidth=5, fontcolor=red, fontsize=22]</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="st">  {rank=same; HOUSEHOLDS; PERMITS}</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>, <span class="at">height =</span> <span class="st">"1200px"</span>, <span class="at">width =</span> <span class="st">"100%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-765ba24a2049ebca52ed" style="width:100%;height:1200px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-765ba24a2049ebca52ed">{"x":{"diagram":"\ndigraph MP02_ERD {\n  \n  graph [rankdir=TB, fontname=Arial, bgcolor=white, splines=polyline, nodesep=2, ranksep=3.5, margin=\"1.5,0.5\",\n         label=\"Data Integration Architecture:\\nEntity Relationships & Transformation Logic Across Federal Data Sources\", \n         labelloc=\"t\", \n         fontsize=50]\n  node [shape=box, style=\"rounded,filled\", fontname=Arial, fontsize=28, margin=0.7, width=7, height=2.5]\n  edge [fontname=Arial, fontsize=22, labelfloat=true, labeldistance=4]\n  \n  INCOME [label=\"INCOME\\n\\nGEOID (PK)\\nNAME\\nyear (PK)\\n\\nhousehold_income\", fillcolor=\"lightblue\"]\n  RENT [label=\"RENT\\n\\nGEOID (PK)\\nNAME\\nyear (PK)\\n\\nmonthly_rent\", fillcolor=\"lightblue\"]\n  POPULATION [label=\"POPULATION\\n\\nGEOID (PK)\\nNAME\\nyear (PK)\\n\\npopulation\", fillcolor=\"lightblue\"]\n  HOUSEHOLDS [label=\"HOUSEHOLDS\\n\\nGEOID (PK)\\nNAME\\nyear (PK)\\n\\nhouseholds\", fillcolor=\"lightblue\"]\n  PERMITS [label=\"PERMITS\\n\\nCBSA (PK)\\nyear (PK)\\n\\nnew_housing_units_permitted\", fillcolor=\"#90EE90\", width=8]\n  WAGES [label=\"WAGES\\n\\nFIPS (PK)\\nINDUSTRY (PK, FK)\\nYEAR (PK)\\n\\nEMPLOYMENT\\nTOTAL_WAGES\\nAVG_WAGE\", fillcolor=\"lightcoral\", width=8, height=3]\n  INDUSTRY [label=\"INDUSTRY_CODES\\n\\nlevel4_code (PK)\\n\\nlevel4_title\\nlevel3_code/title\\nlevel2_code/title\\nlevel1_code/title\", fillcolor=\"lightcoral\", width=8, height=3]\n  \n  INCOME -> RENT [label=\"      GEOID + year      \", color=blue, penwidth=5, fontcolor=blue, fontsize=22]\n  RENT -> POPULATION [label=\"      GEOID + year      \", color=blue, penwidth=5, fontcolor=blue, fontsize=22]\n  POPULATION -> HOUSEHOLDS [label=\"      GEOID + year      \", color=blue, penwidth=5, fontcolor=blue, fontsize=22]\n  POPULATION -> PERMITS [label=\"      Extract CBSA      \\n      from GEOID      \", color=orange, penwidth=5, style=dashed, fontcolor=\"#CC5500\", fontsize=22]\n  PERMITS -> WAGES [label=\"      Format CBSA      \\n      to FIPS      \", color=orange, penwidth=5, style=dashed, fontcolor=\"#CC5500\", fontsize=22]\n  WAGES -> INDUSTRY [label=\"      INDUSTRY to      \\n      level4_code      \", color=red, penwidth=5, fontcolor=red, fontsize=22]\n  \n  {rank=same; HOUSEHOLDS; PERMITS}\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="geographic-identification-challenges" class="level3">
<h3 class="anchored" data-anchor-id="geographic-identification-challenges">Geographic Identification Challenges</h3>
<p>As illustrated in Figure 1, each data source uses a different convention for identifying the same geographic units:</p>
<ul>
<li><strong>Census ACS Tables</strong> use alphanumeric <code>GEOID</code> strings (e.g., â€œCBSA10180â€ for Abilene, TX Metro Area)</li>
<li><strong>Census Building Permits</strong> use integer <code>CBSA</code> codes (e.g., 10180)</li>
<li><strong>BLS Wage Data</strong> use formatted <code>FIPS</code> strings strings with â€œCâ€ prefix (e.g., â€œC1018â€ for what Census calls CBSA 10180 - note BLS drops the trailing zero)</li>
</ul>
<p>These differences represent significant data engineering challenges. A naive, or direct join would fail to match any records across these sources, despite all three referring to identical geographic areas.</p>
</section>
<section id="implications-for-reproducibility" class="level3">
<h3 class="anchored" data-anchor-id="implications-for-reproducibility">Implications for Reproducibility</h3>
<p>This transformation process is essential for the analysis. It supports accurate location matching and makes our work reliable. The accompanying relationship diagram visually confirms that this complex integration is managed appropriately.</p>
</section>
<section id="analytical-limitations" class="level3">
<h3 class="anchored" data-anchor-id="analytical-limitations">Analytical Limitations</h3>
<p>This analysis has three main limitations:</p>
<ul>
<li><strong>Metro-Only Focus</strong>: The data covers 380+ metropolitan areas (86% of the U.S. population) but excludes rural regions; thus, all findings apply to urban housing markets, not the entire country</li>
<li><strong>Population Growth Data</strong>: The data combines new migrants (who need housing now) with natural increase or births (who will not), leading to likely understated housing demand.<br>
</li>
<li><strong>Multi-State Metros</strong>: Data for metros that cross state lines (like NYC-NJ-PA or DC-VA-MD) link to an individual primary state, which can skew state-level rankings.</li>
</ul>
<p><strong>Impact on Mini Project 2 Findings</strong>: Because these metrics do not fully capture the entirety of the country, these findings, including YIMBY and NIMBY candidates, should be considered conservative.</p>
</section>
</section>
<section id="task-2-multi-table-questions" class="level2">
<h2 class="anchored" data-anchor-id="task-2-multi-table-questions">Task 2: Multi-Table Questions</h2>
<section id="question-1-largest-housing-permits-2010-2019" class="level3">
<h3 class="anchored" data-anchor-id="question-1-largest-housing-permits-2010-2019">Question 1: Largest Housing Permits (2010-2019)</h3>
<p>Which CBSA (by name) permitted the largest number of new housing units in the decade from 2010 to 2019 (inclusive)?</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Filter PERMITS for 2010-2019 and sum by CBSA</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>permits_2010_2019 <span class="ot">&lt;-</span> PERMITS <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2010</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CBSA) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_new_units =</span> <span class="fu">sum</span>(new_housing_units_permitted, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_new_units))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Get CBSA names</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>cbsa_names <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CBSA =</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(GEOID, <span class="st">"[0-9]+"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CBSA, NAME)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Join and get top 5</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>top_5_permits <span class="ot">&lt;-</span> permits_2010_2019 <span class="sc">%&gt;%</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(cbsa_names, <span class="at">by =</span> <span class="st">"CBSA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rank, NAME, total_new_units)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the winner</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>winner_name <span class="ot">&lt;-</span> top_5_permits <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(NAME)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>winner_units <span class="ot">&lt;-</span> top_5_permits <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(total_new_units)</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create styled gt table</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>top_5_permits <span class="sc">%&gt;%</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align =</span> <span class="st">"left"</span>,</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>,</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">16</span>)</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 1: Top 5 CBSAs for New Housing Units Permitted**"</span>),</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"2010â€“2019 (inclusive)"</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"left"</span>,</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">everything</span>()</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank =</span> <span class="st">"Rank"</span>,</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">NAME =</span> <span class="st">"CBSA"</span>,</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_new_units =</span> <span class="st">"Total New Units"</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> total_new_units,</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#d4edda"</span>),</span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>)</span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> rank <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb11-60"><a href="#cb11-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb11-61"><a href="#cb11-61" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb11-62"><a href="#cb11-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="fu">md</span>(<span class="st">"Source: **U.S. Census Bureau Building Permits Survey**"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="wckajlksnp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wckajlksnp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wckajlksnp thead, #wckajlksnp tbody, #wckajlksnp tfoot, #wckajlksnp tr, #wckajlksnp td, #wckajlksnp th {
  border-style: none;
}

#wckajlksnp p {
  margin: 0;
  padding: 0;
}

#wckajlksnp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wckajlksnp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wckajlksnp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wckajlksnp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wckajlksnp .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wckajlksnp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wckajlksnp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wckajlksnp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wckajlksnp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wckajlksnp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wckajlksnp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wckajlksnp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wckajlksnp .gt_spanner_row {
  border-bottom-style: hidden;
}

#wckajlksnp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wckajlksnp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wckajlksnp .gt_from_md > :first-child {
  margin-top: 0;
}

#wckajlksnp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wckajlksnp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wckajlksnp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wckajlksnp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wckajlksnp .gt_row_group_first td {
  border-top-width: 2px;
}

#wckajlksnp .gt_row_group_first th {
  border-top-width: 2px;
}

#wckajlksnp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wckajlksnp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wckajlksnp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wckajlksnp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wckajlksnp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wckajlksnp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wckajlksnp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wckajlksnp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wckajlksnp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wckajlksnp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wckajlksnp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wckajlksnp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wckajlksnp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wckajlksnp .gt_left {
  text-align: left;
}

#wckajlksnp .gt_center {
  text-align: center;
}

#wckajlksnp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wckajlksnp .gt_font_normal {
  font-weight: normal;
}

#wckajlksnp .gt_font_bold {
  font-weight: bold;
}

#wckajlksnp .gt_font_italic {
  font-style: italic;
}

#wckajlksnp .gt_super {
  font-size: 65%;
}

#wckajlksnp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wckajlksnp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wckajlksnp .gt_indent_1 {
  text-indent: 5px;
}

#wckajlksnp .gt_indent_2 {
  text-indent: 10px;
}

#wckajlksnp .gt_indent_3 {
  text-indent: 15px;
}

#wckajlksnp .gt_indent_4 {
  text-indent: 20px;
}

#wckajlksnp .gt_indent_5 {
  text-indent: 25px;
}

#wckajlksnp .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#wckajlksnp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="3" class="gt_heading gt_title gt_font_normal"><strong>Table 1: Top 5 CBSAs for New Housing Units Permitted</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">2010â€“2019 (inclusive)</td>
</tr>
<tr class="gt_col_headings header">
<th id="rank" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Rank</th>
<th id="NAME" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">CBSA</th>
<th id="total_new_units" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Total New Units</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="rank" style="background-color: #D4EDDA; font-weight: bold">1</td>
<td class="gt_row gt_left" headers="NAME" style="background-color: #D4EDDA; font-weight: bold">Houston-The Woodlands-Sugar Land, TX Metro Area</td>
<td class="gt_row gt_left" headers="total_new_units" style="background-color: #D4EDDA; font-weight: bold">482,075</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="rank">2</td>
<td class="gt_row gt_left" headers="NAME">Dallas-Fort Worth-Arlington, TX Metro Area</td>
<td class="gt_row gt_left" headers="total_new_units">460,826</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="rank">3</td>
<td class="gt_row gt_left" headers="NAME">New York-Newark-Jersey City, NY-NJ-PA Metro Area</td>
<td class="gt_row gt_left" headers="total_new_units">446,020</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="rank">4</td>
<td class="gt_row gt_left" headers="NAME">Atlanta-Sandy Springs-Alpharetta, GA Metro Area</td>
<td class="gt_row gt_left" headers="total_new_units">254,377</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="rank">5</td>
<td class="gt_row gt_left" headers="NAME">Washington-Arlington-Alexandria, DC-VA-MD-WV Metro Area</td>
<td class="gt_row gt_left" headers="total_new_units">232,483</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="3" class="gt_sourcenote">Source: <strong>U.S. Census Bureau Building Permits Survey</strong></td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Answer:</strong> The <strong>Houston-The Woodlands-Sugar Land, TX Metro Area</strong> permitted the largest number of new housing units from 2010 to 2019, with <strong>482,075</strong> total new units permitted during the decade.</p>
</section>
<section id="question-2-albuquerque-peak-year" class="level3">
<h3 class="anchored" data-anchor-id="question-2-albuquerque-peak-year">Question 2: Albuquerque Peak Year</h3>
<p>In what year did Albuquerque, NM (CBSA Number 10740) permit the most new housing units?</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for Albuquerque and get all years</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>albuquerque_permits <span class="ot">&lt;-</span> PERMITS <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CBSA <span class="sc">==</span> <span class="dv">10740</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, new_housing_units_permitted)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get peak year</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>peak_year <span class="ot">&lt;-</span> albuquerque_permits <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(new_housing_units_permitted, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(year)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>peak_units <span class="ot">&lt;-</span> albuquerque_permits <span class="sc">%&gt;%</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(new_housing_units_permitted, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(new_housing_units_permitted)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Create visualization</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(albuquerque_permits, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> new_housing_units_permitted)) <span class="sc">+</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> albuquerque_permits <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2020</span>),</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> new_housing_units_permitted),</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">4</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> albuquerque_permits <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2021</span>),</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> new_housing_units_permitted),</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">size =</span> <span class="dv">4</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2020</span>,</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> albuquerque_permits<span class="sc">$</span>new_housing_units_permitted[albuquerque_permits<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2020</span>],</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"COVID Dip"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">hjust =</span> <span class="fl">1.2</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2021</span>,</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> albuquerque_permits<span class="sc">$</span>new_housing_units_permitted[albuquerque_permits<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2021</span>],</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Peak"</span>, <span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Housing Permits in Albuquerque, NM (CBSA 10740)"</span>,</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Note the 2020 COVID dip and 2021 rebound"</span>,</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"New Housing Units Permitted"</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma, <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.15</span>))) <span class="sc">+</span></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">clip =</span> <span class="st">"off"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create styled table showing all years</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>albuquerque_permits <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.character</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align =</span> <span class="st">"left"</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">16</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 2: Albuquerque Housing Permits by Year**"</span>),</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"CBSA 10740 (2009â€“2023)"</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"center"</span>,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">everything</span>()</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="st">"Year"</span>,</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">new_housing_units_permitted =</span> <span class="st">"New Housing Units Permitted"</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> new_housing_units_permitted,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#d1ecf1"</span>),</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>)</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> year <span class="sc">==</span> <span class="fu">as.character</span>(peak_year))</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#f8d7da"</span>),</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_text</span>(<span class="at">style =</span> <span class="st">"italic"</span>)</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> year <span class="sc">==</span> <span class="st">"2020"</span>)</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> </span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="fu">md</span>(<span class="st">"Source: **U.S. Census Bureau Building Permits Survey**"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="wvgvlzytji" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wvgvlzytji table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wvgvlzytji thead, #wvgvlzytji tbody, #wvgvlzytji tfoot, #wvgvlzytji tr, #wvgvlzytji td, #wvgvlzytji th {
  border-style: none;
}

#wvgvlzytji p {
  margin: 0;
  padding: 0;
}

#wvgvlzytji .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wvgvlzytji .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wvgvlzytji .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wvgvlzytji .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wvgvlzytji .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wvgvlzytji .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wvgvlzytji .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wvgvlzytji .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wvgvlzytji .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wvgvlzytji .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wvgvlzytji .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wvgvlzytji .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wvgvlzytji .gt_spanner_row {
  border-bottom-style: hidden;
}

#wvgvlzytji .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wvgvlzytji .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wvgvlzytji .gt_from_md > :first-child {
  margin-top: 0;
}

#wvgvlzytji .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wvgvlzytji .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wvgvlzytji .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wvgvlzytji .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wvgvlzytji .gt_row_group_first td {
  border-top-width: 2px;
}

#wvgvlzytji .gt_row_group_first th {
  border-top-width: 2px;
}

#wvgvlzytji .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wvgvlzytji .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wvgvlzytji .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wvgvlzytji .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wvgvlzytji .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wvgvlzytji .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wvgvlzytji .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wvgvlzytji .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wvgvlzytji .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wvgvlzytji .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wvgvlzytji .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wvgvlzytji .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wvgvlzytji .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wvgvlzytji .gt_left {
  text-align: left;
}

#wvgvlzytji .gt_center {
  text-align: center;
}

#wvgvlzytji .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wvgvlzytji .gt_font_normal {
  font-weight: normal;
}

#wvgvlzytji .gt_font_bold {
  font-weight: bold;
}

#wvgvlzytji .gt_font_italic {
  font-style: italic;
}

#wvgvlzytji .gt_super {
  font-size: 65%;
}

#wvgvlzytji .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wvgvlzytji .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wvgvlzytji .gt_indent_1 {
  text-indent: 5px;
}

#wvgvlzytji .gt_indent_2 {
  text-indent: 10px;
}

#wvgvlzytji .gt_indent_3 {
  text-indent: 15px;
}

#wvgvlzytji .gt_indent_4 {
  text-indent: 20px;
}

#wvgvlzytji .gt_indent_5 {
  text-indent: 25px;
}

#wvgvlzytji .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#wvgvlzytji div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="2" class="gt_heading gt_title gt_font_normal"><strong>Table 2: Albuquerque Housing Permits by Year</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">CBSA 10740 (2009â€“2023)</td>
</tr>
<tr class="gt_col_headings header">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Year</th>
<th id="new_housing_units_permitted" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">New Housing Units Permitted</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="year">2009</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">1,692</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="year">2010</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">1,764</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="year">2011</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">1,634</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="year">2012</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,084</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="year">2013</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,606</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="year">2014</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,543</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="year">2015</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,295</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="year">2016</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,465</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="year">2017</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,256</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="year">2018</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,186</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="year">2019</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,148</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="year" style="background-color: #F8D7DA; font-style: italic">2020</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted" style="background-color: #F8D7DA; font-style: italic">2,014</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="year" style="background-color: #D1ECF1; font-weight: bold">2021</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted" style="background-color: #D1ECF1; font-weight: bold">4,021</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="year">2022</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,852</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="year">2023</td>
<td class="gt_row gt_center" headers="new_housing_units_permitted">2,834</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="2" class="gt_sourcenote">Source: <strong>U.S. Census Bureau Building Permits Survey</strong></td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Answer:</strong> Albuquerque, NM (CBSA 10740) permitted the most new housing units in <strong>2021</strong> with <strong>4,021</strong> units.</p>
<p><strong>COVID-19 Artifact Note:</strong> 2021â€™s big jump is a result of 2020â€™s delayed permits catching up after lockdowns. In other words, this is a data â€œblip,â€ not a new trend, seen across several metro areas.</p>
</section>
<section id="question-3-highest-average-individual-income-by-state-2015" class="level3">
<h3 class="anchored" data-anchor-id="question-3-highest-average-individual-income-by-state-2015">Question 3: Highest Average Individual Income by State (2015)</h3>
<p>Which state (not CBSA) had the highest average individual income in 2015?</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Join the three tables for 2015</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>income_2015 <span class="ot">&lt;-</span> INCOME <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(HOUSEHOLDS <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(POPULATION <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Calculate total income per CBSA and extract state</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>cbsa_income <span class="ot">&lt;-</span> income_2015 <span class="sc">%&gt;%</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_income =</span> household_income <span class="sc">*</span> households,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">str_extract</span>(NAME, <span class="st">", (.{2})"</span>, <span class="at">group =</span> <span class="dv">1</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME, state, total_income, population)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Sum by state</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>state_income <span class="ot">&lt;-</span> cbsa_income <span class="sc">%&gt;%</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_state_income =</span> <span class="fu">sum</span>(total_income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_state_population =</span> <span class="fu">sum</span>(population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_individual_income =</span> total_state_income <span class="sc">/</span> total_state_population) <span class="sc">%&gt;%</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_individual_income))</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Get the top state</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>top_state_abb <span class="ot">&lt;-</span> state_income <span class="sc">%&gt;%</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(state)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>top_state_income <span class="ot">&lt;-</span> state_income <span class="sc">%&gt;%</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(avg_individual_income)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Convert abbreviation to full state name</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>state_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">abb  =</span> <span class="fu">c</span>(state.abb, <span class="st">"DC"</span>, <span class="st">"PR"</span>),</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(state.name, <span class="st">"District of Columbia"</span>, <span class="st">"Puerto Rico"</span>)</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>top_state_name <span class="ot">&lt;-</span> state_df <span class="sc">%&gt;%</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(abb <span class="sc">==</span> top_state_abb) <span class="sc">%&gt;%</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(name)</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Show top 10 states with formatted income</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>top_10_states <span class="ot">&lt;-</span> state_income <span class="sc">%&gt;%</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(state_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"abb"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Format income with dollar sign and commas</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">income_formatted =</span> <span class="fu">paste0</span>(<span class="st">"$"</span>, <span class="fu">format</span>(<span class="fu">round</span>(avg_individual_income, <span class="dv">2</span>), </span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">big.mark =</span> <span class="st">","</span>, </span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">nsmall =</span> <span class="dv">2</span>)),</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">note =</span> <span class="fu">case_when</span>(</span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">==</span> <span class="st">"DC"</span> <span class="sc">~</span> <span class="st">"âš ï¸ 100% Multi-State âš ï¸"</span>,</span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"NY"</span>, <span class="st">"MD"</span>, <span class="st">"VA"</span>, <span class="st">"PA"</span>, <span class="st">"NJ"</span>) <span class="sc">~</span> <span class="st">"Contains Multi-State CBSAs"</span>,</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, state, income_formatted, total_state_population, note)</span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>top_10_states <span class="sc">%&gt;%</span></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align =</span> <span class="st">"left"</span>,</span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>,</span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">16</span>)</span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 3: Top 10 States by Average Individual Income (2015)**"</span>),</span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Ranked by average individual income across metropolitan areas"</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> total_state_population, <span class="at">decimals =</span> <span class="dv">0</span>, <span class="at">sep_mark =</span> <span class="st">","</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"left"</span>,</span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">everything</span>()</span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"State"</span>,</span>
<span id="cb14-80"><a href="#cb14-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="st">"Abbr"</span>,</span>
<span id="cb14-81"><a href="#cb14-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">income_formatted =</span> <span class="st">"Avg Individual Income"</span>,</span>
<span id="cb14-82"><a href="#cb14-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_state_population =</span> <span class="st">"Total Population"</span>,</span>
<span id="cb14-83"><a href="#cb14-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">note =</span> <span class="st">"Note"</span></span>
<span id="cb14-84"><a href="#cb14-84" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-85"><a href="#cb14-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb14-86"><a href="#cb14-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb14-87"><a href="#cb14-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb14-88"><a href="#cb14-88" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb14-89"><a href="#cb14-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb14-90"><a href="#cb14-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span>(<span class="st">"Source: **U.S. Census Bureau, American Community Survey (ACS), 2015**"</span>)</span>
<span id="cb14-91"><a href="#cb14-91" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="wkndypqfbi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wkndypqfbi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wkndypqfbi thead, #wkndypqfbi tbody, #wkndypqfbi tfoot, #wkndypqfbi tr, #wkndypqfbi td, #wkndypqfbi th {
  border-style: none;
}

#wkndypqfbi p {
  margin: 0;
  padding: 0;
}

#wkndypqfbi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wkndypqfbi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wkndypqfbi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wkndypqfbi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wkndypqfbi .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wkndypqfbi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wkndypqfbi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wkndypqfbi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wkndypqfbi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wkndypqfbi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wkndypqfbi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wkndypqfbi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wkndypqfbi .gt_spanner_row {
  border-bottom-style: hidden;
}

#wkndypqfbi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wkndypqfbi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wkndypqfbi .gt_from_md > :first-child {
  margin-top: 0;
}

#wkndypqfbi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wkndypqfbi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wkndypqfbi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wkndypqfbi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wkndypqfbi .gt_row_group_first td {
  border-top-width: 2px;
}

#wkndypqfbi .gt_row_group_first th {
  border-top-width: 2px;
}

#wkndypqfbi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wkndypqfbi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wkndypqfbi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wkndypqfbi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wkndypqfbi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wkndypqfbi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wkndypqfbi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wkndypqfbi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wkndypqfbi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wkndypqfbi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wkndypqfbi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wkndypqfbi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wkndypqfbi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wkndypqfbi .gt_left {
  text-align: left;
}

#wkndypqfbi .gt_center {
  text-align: center;
}

#wkndypqfbi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wkndypqfbi .gt_font_normal {
  font-weight: normal;
}

#wkndypqfbi .gt_font_bold {
  font-weight: bold;
}

#wkndypqfbi .gt_font_italic {
  font-style: italic;
}

#wkndypqfbi .gt_super {
  font-size: 65%;
}

#wkndypqfbi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wkndypqfbi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wkndypqfbi .gt_indent_1 {
  text-indent: 5px;
}

#wkndypqfbi .gt_indent_2 {
  text-indent: 10px;
}

#wkndypqfbi .gt_indent_3 {
  text-indent: 15px;
}

#wkndypqfbi .gt_indent_4 {
  text-indent: 20px;
}

#wkndypqfbi .gt_indent_5 {
  text-indent: 25px;
}

#wkndypqfbi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#wkndypqfbi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="5" class="gt_heading gt_title gt_font_normal"><strong>Table 3: Top 10 States by Average Individual Income (2015)</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Ranked by average individual income across metropolitan areas</td>
</tr>
<tr class="gt_col_headings header">
<th id="name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">State</th>
<th id="state" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Abbr</th>
<th id="income_formatted" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Avg Individual Income</th>
<th id="total_state_population" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Total Population</th>
<th id="note" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Note</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="name">District of Columbia</td>
<td class="gt_row gt_left" headers="state">DC</td>
<td class="gt_row gt_left" headers="income_formatted">$33,232.88</td>
<td class="gt_row gt_left" headers="total_state_population">6,098,283</td>
<td class="gt_row gt_left" headers="note">âš ï¸ 100% Multi-State âš ï¸</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="name">Massachusetts</td>
<td class="gt_row gt_left" headers="state">MA</td>
<td class="gt_row gt_left" headers="income_formatted">$27,620.62</td>
<td class="gt_row gt_left" headers="total_state_population">6,754,601</td>
<td class="gt_row gt_left" headers="note"></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="name">Connecticut</td>
<td class="gt_row gt_left" headers="state">CT</td>
<td class="gt_row gt_left" headers="income_formatted">$27,194.05</td>
<td class="gt_row gt_left" headers="total_state_population">3,474,313</td>
<td class="gt_row gt_left" headers="note"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="name">Alaska</td>
<td class="gt_row gt_left" headers="state">AK</td>
<td class="gt_row gt_left" headers="income_formatted">$26,426.48</td>
<td class="gt_row gt_left" headers="total_state_population">499,421</td>
<td class="gt_row gt_left" headers="note"></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="name">Vermont</td>
<td class="gt_row gt_left" headers="state">VT</td>
<td class="gt_row gt_left" headers="income_formatted">$26,380.10</td>
<td class="gt_row gt_left" headers="total_state_population">216,661</td>
<td class="gt_row gt_left" headers="note"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="name">New Hampshire</td>
<td class="gt_row gt_left" headers="state">NH</td>
<td class="gt_row gt_left" headers="income_formatted">$26,252.54</td>
<td class="gt_row gt_left" headers="total_state_population">847,504</td>
<td class="gt_row gt_left" headers="note"></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="name">Minnesota</td>
<td class="gt_row gt_left" headers="state">MN</td>
<td class="gt_row gt_left" headers="income_formatted">$26,157.62</td>
<td class="gt_row gt_left" headers="total_state_population">4,469,143</td>
<td class="gt_row gt_left" headers="note"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="name">Maryland</td>
<td class="gt_row gt_left" headers="state">MD</td>
<td class="gt_row gt_left" headers="income_formatted">$25,596.50</td>
<td class="gt_row gt_left" headers="total_state_population">3,665,585</td>
<td class="gt_row gt_left" headers="note">Contains Multi-State CBSAs</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="name">Washington</td>
<td class="gt_row gt_left" headers="state">WA</td>
<td class="gt_row gt_left" headers="income_formatted">$25,431.27</td>
<td class="gt_row gt_left" headers="total_state_population">6,350,174</td>
<td class="gt_row gt_left" headers="note"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="name">Colorado</td>
<td class="gt_row gt_left" headers="state">CO</td>
<td class="gt_row gt_left" headers="income_formatted">$25,430.48</td>
<td class="gt_row gt_left" headers="total_state_population">4,840,469</td>
<td class="gt_row gt_left" headers="note"></td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="5" class="gt_sourcenote">Source: <strong>U.S. Census Bureau, American Community Survey (ACS), 2015</strong></td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Answer:</strong> <strong>District of Columbia</strong> appears highest in 2015 at $33,232.88, <strong>but</strong> that result is inflated by:</p>
<ul>
<li><strong>Multi-state Washington CBSA</strong> attribution</li>
<li><strong>CBSA-only coverage</strong>excludes rural areas</li>
</ul>
<p><strong>Most comparable state-to-state finding:</strong> Excluding the mentioned artifacts and using states with strong single-state CBSA coverage, <strong>Massachusetts</strong> ranks highest, followed by <strong>Connecticut</strong>.</p>
<p><em>Note:</em> Multi-state CBSAs account for ~27% of the population in this dataset, or ~10% of CBSAs by count.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: multi_state_cbsa_prevalence</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code for multi-state CBSA shares"</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- require a CBSA-level ACS table named POPULATION ----</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">"POPULATION"</span>)) {</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"Please load your ACS CBSA table as POPULATION (with columns NAME, GEOID, year, population)."</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper: pick the first matching column name</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>pick_col <span class="ot">&lt;-</span> <span class="cf">function</span>(df, candidates){</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  hit <span class="ot">&lt;-</span> <span class="fu">intersect</span>(candidates, <span class="fu">names</span>(df))</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">length</span>(hit)) <span class="fu">stop</span>(<span class="st">"Missing columns: "</span>, <span class="fu">paste</span>(candidates, <span class="at">collapse=</span><span class="st">", "</span>))</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  hit[<span class="dv">1</span>]</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Flexible column detection</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>name_col <span class="ot">&lt;-</span> <span class="fu">pick_col</span>(POPULATION, <span class="fu">c</span>(<span class="st">"NAME"</span>,<span class="st">"name"</span>))</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>geoid_col <span class="ot">&lt;-</span> <span class="fu">pick_col</span>(POPULATION, <span class="fu">c</span>(<span class="st">"GEOID"</span>,<span class="st">"CBSA"</span>,<span class="st">"cbsa"</span>))</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>year_col  <span class="ot">&lt;-</span> <span class="fu">pick_col</span>(POPULATION, <span class="fu">c</span>(<span class="st">"year"</span>,<span class="st">"YEAR"</span>))</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>pop_col   <span class="ot">&lt;-</span> <span class="fu">pick_col</span>(POPULATION, <span class="fu">c</span>(<span class="st">"population"</span>,<span class="st">"B01003_001"</span>))</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- filtering to target year (2015) ----</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>pop15 <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.data[[year_col]] <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">cbsa =</span> <span class="cf">if</span> (geoid_col <span class="sc">==</span> <span class="st">"GEOID"</span>)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>              <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(.data[[geoid_col]], <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>))</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>           <span class="cf">else</span> <span class="fu">as.integer</span>(.data[[geoid_col]]),</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> .data[[name_col]],</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">population =</span> <span class="fu">as.numeric</span>(.data[[pop_col]])</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cbsa, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the "state block" after the comma: e.g., "GA" or "DC-VA-MD-WV"</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>pop15 <span class="ot">&lt;-</span> pop15 <span class="sc">%&gt;%</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_block =</span> <span class="fu">str_extract</span>(name, <span class="st">"(?&lt;=,</span><span class="sc">\\</span><span class="st">s)[A-Z]{2}(?:-[A-Z]{2})*"</span>),</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_states    =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(state_block), <span class="dv">1</span>L, <span class="fu">str_count</span>(state_block, <span class="st">"-"</span>) <span class="sc">+</span> <span class="dv">1</span>L),</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_multi    =</span> n_states <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- metrics ----</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">summarise</span>(pop15,</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Population share (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">100</span> <span class="sc">*</span> <span class="fu">sum</span>(population[is_multi], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sum</span>(population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">CBSA share (%)</span><span class="st">`</span>       <span class="ot">=</span> <span class="dv">100</span> <span class="sc">*</span> <span class="fu">mean</span>(is_multi),</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Total CBSAs</span><span class="st">`</span>          <span class="ot">=</span> <span class="fu">n</span>(),</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Multi-state CBSAs</span><span class="st">`</span>    <span class="ot">=</span> <span class="fu">sum</span>(is_multi)</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- display as a neat table ----</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(metrics) <span class="sc">%&gt;%</span></span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_options</span>(</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width  =</span> gt<span class="sc">::</span><span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align  =</span> <span class="st">"left"</span>,  </span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>  </span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"left"</span>,</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">everything</span>()</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 4: Multi-state CBSA Prevalence (2015)**"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="fu">md</span>(<span class="st">"Population share = share of **people** living in multi-state CBSAs (headline). CBSA share = share of CBSAs that are multi-state (by count)."</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Population share (%)</span><span class="st">`</span>, <span class="st">`</span><span class="at">CBSA share (%)</span><span class="st">`</span>), <span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Total CBSAs</span><span class="st">`</span>, <span class="st">`</span><span class="at">Multi-state CBSAs</span><span class="st">`</span>), <span class="at">decimals =</span> <span class="dv">0</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="qvlcnihbas" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qvlcnihbas table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qvlcnihbas thead, #qvlcnihbas tbody, #qvlcnihbas tfoot, #qvlcnihbas tr, #qvlcnihbas td, #qvlcnihbas th {
  border-style: none;
}

#qvlcnihbas p {
  margin: 0;
  padding: 0;
}

#qvlcnihbas .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qvlcnihbas .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qvlcnihbas .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qvlcnihbas .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qvlcnihbas .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qvlcnihbas .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvlcnihbas .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qvlcnihbas .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qvlcnihbas .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qvlcnihbas .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qvlcnihbas .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qvlcnihbas .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qvlcnihbas .gt_spanner_row {
  border-bottom-style: hidden;
}

#qvlcnihbas .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qvlcnihbas .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qvlcnihbas .gt_from_md > :first-child {
  margin-top: 0;
}

#qvlcnihbas .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qvlcnihbas .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qvlcnihbas .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qvlcnihbas .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qvlcnihbas .gt_row_group_first td {
  border-top-width: 2px;
}

#qvlcnihbas .gt_row_group_first th {
  border-top-width: 2px;
}

#qvlcnihbas .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvlcnihbas .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qvlcnihbas .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qvlcnihbas .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvlcnihbas .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvlcnihbas .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qvlcnihbas .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qvlcnihbas .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qvlcnihbas .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvlcnihbas .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qvlcnihbas .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvlcnihbas .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qvlcnihbas .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvlcnihbas .gt_left {
  text-align: left;
}

#qvlcnihbas .gt_center {
  text-align: center;
}

#qvlcnihbas .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qvlcnihbas .gt_font_normal {
  font-weight: normal;
}

#qvlcnihbas .gt_font_bold {
  font-weight: bold;
}

#qvlcnihbas .gt_font_italic {
  font-style: italic;
}

#qvlcnihbas .gt_super {
  font-size: 65%;
}

#qvlcnihbas .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qvlcnihbas .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qvlcnihbas .gt_indent_1 {
  text-indent: 5px;
}

#qvlcnihbas .gt_indent_2 {
  text-indent: 10px;
}

#qvlcnihbas .gt_indent_3 {
  text-indent: 15px;
}

#qvlcnihbas .gt_indent_4 {
  text-indent: 20px;
}

#qvlcnihbas .gt_indent_5 {
  text-indent: 25px;
}

#qvlcnihbas .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qvlcnihbas div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border"><strong>Table 4: Multi-state CBSA Prevalence (2015)</strong></td>
</tr>
<tr class="gt_col_headings even">
<th id="Population-share-(%)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Population share (%)</th>
<th id="CBSA-share-(%)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">CBSA share (%)</th>
<th id="Total-CBSAs" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Total CBSAs</th>
<th id="Multi-state-CBSAs" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Multi-state CBSAs</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Population share (%)">27.3</td>
<td class="gt_row gt_left" headers="CBSA share (%)">10.1</td>
<td class="gt_row gt_left" headers="Total CBSAs">516</td>
<td class="gt_row gt_left" headers="Multi-state CBSAs">52</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="4" class="gt_sourcenote">Population share = share of <strong>people</strong> living in multi-state CBSAs (headline). CBSA share = share of CBSAs that are multi-state (by count).</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</section>
<section id="question-4-data-scientists-by-cbsa-over-time" class="level3">
<h3 class="anchored" data-anchor-id="question-4-data-scientists-by-cbsa-over-time">Question 4: Data Scientists by CBSA Over Time</h3>
<p>What is the last year in which the NYC CBSA had the most data scientists in the country? In recent, the San Francisco CBSA has had the most data scientists.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data_scientists <span class="ot">&lt;-</span> WAGES <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(INDUSTRY <span class="sc">==</span> <span class="dv">51821</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">std_cbsa =</span> FIPS, <span class="at">year =</span> YEAR)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>cbsa_names <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">CBSA =</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(GEOID, <span class="st">"[0-9]+"</span>)),</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">std_cbsa =</span> <span class="fu">paste0</span>(<span class="st">"C"</span>, <span class="fu">str_sub</span>(<span class="fu">as.character</span>(CBSA), <span class="dv">1</span>, <span class="dv">4</span>))</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(std_cbsa, NAME)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate last NYC year </span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>last_nyc_year <span class="ot">&lt;-</span> data_scientists <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(std_cbsa, year) <span class="sc">%&gt;%</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_employment =</span> <span class="fu">sum</span>(EMPLOYMENT, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(cbsa_names, <span class="at">by =</span> <span class="st">"std_cbsa"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_employment, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(NAME, <span class="st">"New York"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">max</span>()</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Focus on the transition period: 2014â€“2017</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>transition_years <span class="ot">&lt;-</span> data_scientists <span class="sc">%&gt;%</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(std_cbsa, year) <span class="sc">%&gt;%</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_employment =</span> <span class="fu">sum</span>(EMPLOYMENT, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(cbsa_names, <span class="at">by =</span> <span class="st">"std_cbsa"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_employment, <span class="at">n =</span> <span class="dv">3</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(total_employment)) <span class="sc">%&gt;%</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.character</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, rank, NAME, total_employment) <span class="sc">%&gt;%</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, rank)</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- gt table (with header, options, and source) ----</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>transition_years <span class="sc">%&gt;%</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align =</span> <span class="st">"left"</span>,</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>,</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">16</span>)</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 5: The NYC-to-San Francisco Transition (2014â€“2017)**"</span>),</span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Top 3 CBSAs by total employment in NAICS 51821 for each year"</span></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="st">"Year"</span>,</span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank =</span> <span class="st">"Rank"</span>,</span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">NAME =</span> <span class="st">"CBSA"</span>,</span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_employment =</span> <span class="st">"Employment"</span></span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> total_employment,</span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span>,</span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">use_seps =</span> <span class="cn">TRUE</span></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"left"</span>,</span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(year, rank, NAME, total_employment)</span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span>(<span class="fu">paste0</span>(</span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a>      <span class="st">"**Source.** BLS QCEW (NAICS 51821), 2014â€“2017; U.S. Census Bureau (2019) for CBSA names. "</span>))</span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="qzqylwtxyc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qzqylwtxyc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qzqylwtxyc thead, #qzqylwtxyc tbody, #qzqylwtxyc tfoot, #qzqylwtxyc tr, #qzqylwtxyc td, #qzqylwtxyc th {
  border-style: none;
}

#qzqylwtxyc p {
  margin: 0;
  padding: 0;
}

#qzqylwtxyc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qzqylwtxyc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qzqylwtxyc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qzqylwtxyc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qzqylwtxyc .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qzqylwtxyc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qzqylwtxyc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qzqylwtxyc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qzqylwtxyc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qzqylwtxyc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qzqylwtxyc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qzqylwtxyc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qzqylwtxyc .gt_spanner_row {
  border-bottom-style: hidden;
}

#qzqylwtxyc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qzqylwtxyc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qzqylwtxyc .gt_from_md > :first-child {
  margin-top: 0;
}

#qzqylwtxyc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qzqylwtxyc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qzqylwtxyc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qzqylwtxyc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qzqylwtxyc .gt_row_group_first td {
  border-top-width: 2px;
}

#qzqylwtxyc .gt_row_group_first th {
  border-top-width: 2px;
}

#qzqylwtxyc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qzqylwtxyc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qzqylwtxyc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qzqylwtxyc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qzqylwtxyc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qzqylwtxyc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qzqylwtxyc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qzqylwtxyc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qzqylwtxyc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qzqylwtxyc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qzqylwtxyc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qzqylwtxyc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qzqylwtxyc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qzqylwtxyc .gt_left {
  text-align: left;
}

#qzqylwtxyc .gt_center {
  text-align: center;
}

#qzqylwtxyc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qzqylwtxyc .gt_font_normal {
  font-weight: normal;
}

#qzqylwtxyc .gt_font_bold {
  font-weight: bold;
}

#qzqylwtxyc .gt_font_italic {
  font-style: italic;
}

#qzqylwtxyc .gt_super {
  font-size: 65%;
}

#qzqylwtxyc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qzqylwtxyc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qzqylwtxyc .gt_indent_1 {
  text-indent: 5px;
}

#qzqylwtxyc .gt_indent_2 {
  text-indent: 10px;
}

#qzqylwtxyc .gt_indent_3 {
  text-indent: 15px;
}

#qzqylwtxyc .gt_indent_4 {
  text-indent: 20px;
}

#qzqylwtxyc .gt_indent_5 {
  text-indent: 25px;
}

#qzqylwtxyc .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qzqylwtxyc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="4" class="gt_heading gt_title gt_font_normal"><strong>Table 5: The NYC-to-San Francisco Transition (2014â€“2017)</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Top 3 CBSAs by total employment in NAICS 51821 for each year</td>
</tr>
<tr class="gt_col_headings header">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Year</th>
<th id="rank" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Rank</th>
<th id="NAME" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">CBSA</th>
<th id="total_employment" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Employment</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="year">2014</td>
<td class="gt_row gt_left" headers="rank">1</td>
<td class="gt_row gt_left" headers="NAME">New York-Newark-Jersey City, NY-NJ-PA Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">17,828</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="year">2014</td>
<td class="gt_row gt_left" headers="rank">2</td>
<td class="gt_row gt_left" headers="NAME">Dallas-Fort Worth-Arlington, TX Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">13,049</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="year">2014</td>
<td class="gt_row gt_left" headers="rank">3</td>
<td class="gt_row gt_left" headers="NAME">Washington-Arlington-Alexandria, DC-VA-MD-WV Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">10,889</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="year">2015</td>
<td class="gt_row gt_left" headers="rank">1</td>
<td class="gt_row gt_left" headers="NAME">New York-Newark-Jersey City, NY-NJ-PA Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">18,922</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="year">2015</td>
<td class="gt_row gt_left" headers="rank">2</td>
<td class="gt_row gt_left" headers="NAME">Dallas-Fort Worth-Arlington, TX Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">14,818</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="year">2015</td>
<td class="gt_row gt_left" headers="rank">3</td>
<td class="gt_row gt_left" headers="NAME">Washington-Arlington-Alexandria, DC-VA-MD-WV Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">11,805</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="year">2016</td>
<td class="gt_row gt_left" headers="rank">1</td>
<td class="gt_row gt_left" headers="NAME">San Francisco-Oakland-Berkeley, CA Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">16,369</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="year">2016</td>
<td class="gt_row gt_left" headers="rank">2</td>
<td class="gt_row gt_left" headers="NAME">Dallas-Fort Worth-Arlington, TX Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">14,205</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="year">2016</td>
<td class="gt_row gt_left" headers="rank">3</td>
<td class="gt_row gt_left" headers="NAME">Washington-Arlington-Alexandria, DC-VA-MD-WV Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">10,611</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="year">2017</td>
<td class="gt_row gt_left" headers="rank">1</td>
<td class="gt_row gt_left" headers="NAME">San Francisco-Oakland-Berkeley, CA Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">18,089</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="year">2017</td>
<td class="gt_row gt_left" headers="rank">2</td>
<td class="gt_row gt_left" headers="NAME">Dallas-Fort Worth-Arlington, TX Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">13,583</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="year">2017</td>
<td class="gt_row gt_left" headers="rank">3</td>
<td class="gt_row gt_left" headers="NAME">Washington-Arlington-Alexandria, DC-VA-MD-WV Metro Area</td>
<td class="gt_row gt_left" headers="total_employment">10,481</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="4" class="gt_sourcenote"><strong>Source.</strong> BLS QCEW (NAICS 51821), 2014â€“2017; U.S. Census Bureau (2019) for CBSA names.</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Answer:</strong> The last year in which the New York City CBSA had the most data scientists and business analysts (NAICS 51821) in the country was <strong>2015</strong>. As shown in the table above, San Francisco has led the nation since then, reflecting the tech industryâ€™s concentration in Silicon Valley.</p>
</section>
<section id="question-5-finance-insurance-wages-in-nyc" class="level3">
<h3 class="anchored" data-anchor-id="question-5-finance-insurance-wages-in-nyc">Question 5: Finance &amp; Insurance Wages in NYC</h3>
<p>What fraction of total wages in the NYC CBSA was earned by people employed in the finance and insurance industries (NAICS code 52)? In what year did this fraction peak?</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify NYC CBSA code</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>nyc_cbsa_code <span class="ot">&lt;-</span> <span class="st">"C3562"</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate finance wages as fraction of total wages by year</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>nyc_wage_share <span class="ot">&lt;-</span> WAGES <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FIPS <span class="sc">==</span> nyc_cbsa_code, YEAR <span class="sc">!=</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span>  <span class="co"># Omitting 2020 per data issues</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_finance =</span> <span class="fu">str_starts</span>(<span class="fu">as.character</span>(INDUSTRY), <span class="st">"52"</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">year =</span> YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">wages_total =</span> <span class="fu">sum</span>(TOTAL_WAGES, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">wages_fin =</span> <span class="fu">sum</span>(<span class="fu">if_else</span>(is_finance, TOTAL_WAGES, <span class="dv">0</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">share_fin =</span> wages_fin <span class="sc">/</span> wages_total</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year)</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Get peak year</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>peak_year <span class="ot">&lt;-</span> nyc_wage_share<span class="sc">$</span>year[<span class="fu">which.max</span>(nyc_wage_share<span class="sc">$</span>share_fin)]</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>peak_share <span class="ot">&lt;-</span> <span class="fu">max</span>(nyc_wage_share<span class="sc">$</span>share_fin) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create professional gt table</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>nyc_wage_share <span class="sc">%&gt;%</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">Year =</span> year,</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Total Wages (USD)</span><span class="st">`</span> <span class="ot">=</span> wages_total,</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Finance &amp; Insurance Wages (USD)</span><span class="st">`</span> <span class="ot">=</span> wages_fin,</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Finance Share</span><span class="st">`</span> <span class="ot">=</span> share_fin</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width  =</span> gt<span class="sc">::</span><span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align  =</span> <span class="st">"left"</span>,    </span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>    </span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 6: NYC CBSA â€” Finance &amp; Insurance Wage Share**"</span>),</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"BLS QCEW 2009â€“2023 â€¢ NAICS 52 â€¢ 2020 omitted"</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Total Wages (USD)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Finance &amp; Insurance Wages (USD)</span><span class="st">`</span>),</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Finance Share</span><span class="st">`</span>, <span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"left"</span>,</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">everything</span>()</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="st">`</span><span class="at">Finance Share</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Finance Share of Total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#fff3cd"</span>),</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>)</span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> Year <span class="sc">==</span> peak_year)</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="fu">md</span>(<span class="st">"Source: **BLS QCEW**; NAICS 52."</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="xdpxhtsdpn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xdpxhtsdpn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xdpxhtsdpn thead, #xdpxhtsdpn tbody, #xdpxhtsdpn tfoot, #xdpxhtsdpn tr, #xdpxhtsdpn td, #xdpxhtsdpn th {
  border-style: none;
}

#xdpxhtsdpn p {
  margin: 0;
  padding: 0;
}

#xdpxhtsdpn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xdpxhtsdpn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xdpxhtsdpn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xdpxhtsdpn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xdpxhtsdpn .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xdpxhtsdpn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xdpxhtsdpn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xdpxhtsdpn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xdpxhtsdpn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xdpxhtsdpn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xdpxhtsdpn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xdpxhtsdpn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xdpxhtsdpn .gt_spanner_row {
  border-bottom-style: hidden;
}

#xdpxhtsdpn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xdpxhtsdpn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xdpxhtsdpn .gt_from_md > :first-child {
  margin-top: 0;
}

#xdpxhtsdpn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xdpxhtsdpn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xdpxhtsdpn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xdpxhtsdpn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xdpxhtsdpn .gt_row_group_first td {
  border-top-width: 2px;
}

#xdpxhtsdpn .gt_row_group_first th {
  border-top-width: 2px;
}

#xdpxhtsdpn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xdpxhtsdpn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xdpxhtsdpn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xdpxhtsdpn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xdpxhtsdpn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xdpxhtsdpn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xdpxhtsdpn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xdpxhtsdpn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xdpxhtsdpn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xdpxhtsdpn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xdpxhtsdpn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xdpxhtsdpn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xdpxhtsdpn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xdpxhtsdpn .gt_left {
  text-align: left;
}

#xdpxhtsdpn .gt_center {
  text-align: center;
}

#xdpxhtsdpn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xdpxhtsdpn .gt_font_normal {
  font-weight: normal;
}

#xdpxhtsdpn .gt_font_bold {
  font-weight: bold;
}

#xdpxhtsdpn .gt_font_italic {
  font-style: italic;
}

#xdpxhtsdpn .gt_super {
  font-size: 65%;
}

#xdpxhtsdpn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xdpxhtsdpn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xdpxhtsdpn .gt_indent_1 {
  text-indent: 5px;
}

#xdpxhtsdpn .gt_indent_2 {
  text-indent: 10px;
}

#xdpxhtsdpn .gt_indent_3 {
  text-indent: 15px;
}

#xdpxhtsdpn .gt_indent_4 {
  text-indent: 20px;
}

#xdpxhtsdpn .gt_indent_5 {
  text-indent: 25px;
}

#xdpxhtsdpn .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#xdpxhtsdpn div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="4" class="gt_heading gt_title gt_font_normal"><strong>Table 6: NYC CBSA â€” Finance &amp; Insurance Wage Share</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">BLS QCEW 2009â€“2023 â€¢ NAICS 52 â€¢ 2020 omitted</td>
</tr>
<tr class="gt_col_headings header">
<th id="Year" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Year</th>
<th id="Total-Wages-(USD)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Total Wages (USD)</th>
<th id="Finance-&amp;-Insurance-Wages-(USD)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Finance &amp; Insurance Wages (USD)</th>
<th id="Finance-Share" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Finance Share of Total</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Year">2009</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$2,194,200,174,111</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$206,223,026,063</td>
<td class="gt_row gt_left" headers="Finance Share">9.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Year">2010</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$2,366,455,158,958</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$363,922,560,518</td>
<td class="gt_row gt_left" headers="Finance Share">15.4%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Year">2011</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$2,452,875,238,158</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$337,460,139,179</td>
<td class="gt_row gt_left" headers="Finance Share">13.8%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Year">2012</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$2,543,568,475,824</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$361,225,542,250</td>
<td class="gt_row gt_left" headers="Finance Share">14.2%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Year">2013</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$2,663,041,532,424</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$316,780,948,682</td>
<td class="gt_row gt_left" headers="Finance Share">11.9%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Year">2014</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$2,587,096,519,796</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$368,544,350,266</td>
<td class="gt_row gt_left" headers="Finance Share">14.2%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Year">2015</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$3,008,221,071,967</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$383,349,052,749</td>
<td class="gt_row gt_left" headers="Finance Share">12.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Year">2016</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$3,038,312,046,515</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$352,181,610,994</td>
<td class="gt_row gt_left" headers="Finance Share">11.6%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Year">2017</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$3,176,952,501,734</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$436,667,758,453</td>
<td class="gt_row gt_left" headers="Finance Share">13.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Year">2018</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$3,196,707,717,054</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$429,401,942,724</td>
<td class="gt_row gt_left" headers="Finance Share">13.4%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Year">2019</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$3,617,150,803,059</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$489,522,399,195</td>
<td class="gt_row gt_left" headers="Finance Share">13.5%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Year" style="background-color: #FFF3CD; font-weight: bold">2021</td>
<td class="gt_row gt_left" headers="Total Wages (USD)" style="background-color: #FFF3CD; font-weight: bold">$3,636,399,927,489</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)" style="background-color: #FFF3CD; font-weight: bold">$577,101,733,960</td>
<td class="gt_row gt_left" headers="Finance Share" style="background-color: #FFF3CD; font-weight: bold">15.9%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Year">2022</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$4,104,601,808,975</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$559,385,567,580</td>
<td class="gt_row gt_left" headers="Finance Share">13.6%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Year">2023</td>
<td class="gt_row gt_left" headers="Total Wages (USD)">$4,160,135,177,511</td>
<td class="gt_row gt_left" headers="Finance &amp; Insurance Wages (USD)">$497,713,155,936</td>
<td class="gt_row gt_left" headers="Finance Share">12.0%</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="4" class="gt_sourcenote">Source: <strong>BLS QCEW</strong>; NAICS 52.</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Answer:</strong></p>
<p><strong>Part A - The Fraction:</strong> Finance and insurance workers earned between <strong>9.4%</strong> and <strong>15.9%</strong> of total wages in the NYC CBSA across the study period.</p>
<p><strong>Part B - Peak Year:</strong> This fraction <strong>peaked in 2021 at 15.9%</strong>, as highlighted in the table above. The 2021 peak represents a recovery from the declining share observed through the mid-2010s, exceeding even the 2010 post-financial-crisis level (15.4%)</p>
</section>
</section>
<section id="task-3-initial-visualization" class="level2">
<h2 class="anchored" data-anchor-id="task-3-initial-visualization">Task 3: Initial Visualization</h2>
<section id="monthly-rent-vs.-average-household-income-2009" class="level3">
<h3 class="anchored" data-anchor-id="monthly-rent-vs.-average-household-income-2009">Monthly Rent vs.&nbsp;Average Household Income (2009)</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: viz-1-rent-income</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>rent_income_2009 <span class="ot">&lt;-</span> RENT <span class="sc">%&gt;%</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(INCOME <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>), </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME, monthly_rent, household_income) <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">str_extract</span>(NAME, <span class="st">", ([A-Z]{2})"</span>, <span class="at">group =</span> <span class="dv">1</span>),</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">case_when</span>(</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"CT"</span>, <span class="st">"ME"</span>, <span class="st">"MA"</span>, <span class="st">"NH"</span>, <span class="st">"RI"</span>, <span class="st">"VT"</span>, <span class="st">"NJ"</span>, <span class="st">"NY"</span>, <span class="st">"PA"</span>) <span class="sc">~</span> <span class="st">"Northeast"</span>,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"IL"</span>, <span class="st">"IN"</span>, <span class="st">"MI"</span>, <span class="st">"OH"</span>, <span class="st">"WI"</span>, <span class="st">"IA"</span>, <span class="st">"KS"</span>, <span class="st">"MN"</span>, <span class="st">"MO"</span>, <span class="st">"NE"</span>, <span class="st">"ND"</span>, <span class="st">"SD"</span>) <span class="sc">~</span> <span class="st">"Midwest"</span>,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DE"</span>, <span class="st">"FL"</span>, <span class="st">"GA"</span>, <span class="st">"MD"</span>, <span class="st">"NC"</span>, <span class="st">"SC"</span>, <span class="st">"VA"</span>, <span class="st">"WV"</span>, <span class="st">"AL"</span>, <span class="st">"KY"</span>, <span class="st">"MS"</span>, <span class="st">"TN"</span>, <span class="st">"AR"</span>, <span class="st">"LA"</span>, <span class="st">"OK"</span>, <span class="st">"TX"</span>, <span class="st">"DC"</span>) <span class="sc">~</span> <span class="st">"South"</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"AZ"</span>, <span class="st">"CO"</span>, <span class="st">"ID"</span>, <span class="st">"MT"</span>, <span class="st">"NV"</span>, <span class="st">"NM"</span>, <span class="st">"UT"</span>, <span class="st">"WY"</span>, <span class="st">"AK"</span>, <span class="st">"CA"</span>, <span class="st">"HI"</span>, <span class="st">"OR"</span>, <span class="st">"WA"</span>) <span class="sc">~</span> <span class="st">"West"</span>,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">==</span> <span class="st">"PR"</span> <span class="sc">~</span> <span class="st">"Puerto Rico"</span>,</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(state) <span class="sc">~</span> <span class="st">"Unknown"</span>,</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rent_income_2009, <span class="fu">aes</span>(<span class="at">x =</span> household_income, <span class="at">y =</span> monthly_rent, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> rent_income_2009 <span class="sc">%&gt;%</span> </span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(NAME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"San Francisco-Oakland-Hayward, CA Metro Area"</span>,</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"New York-Newark-Jersey City, NY-NJ-PA Metro Area"</span>,</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Miami-Fort Lauderdale-West Palm Beach, FL Metro Area"</span>)),</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_remove</span>(NAME, <span class="st">" Metro Area"</span>)),</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">box.padding =</span> <span class="fl">0.5</span>,</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">point.padding =</span> <span class="fl">0.3</span>,</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">segment.color =</span> <span class="st">"gray50"</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">dollar_format</span>(),</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100000</span>, <span class="dv">20000</span>)</span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">dollar_format</span>(),</span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2000</span>, <span class="dv">250</span>)</span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Region"</span>,</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Northeast"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, </span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Midwest"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>, </span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>               <span class="st">"South"</span> <span class="ot">=</span> <span class="st">"#2ca02c"</span>, </span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>               <span class="st">"West"</span> <span class="ot">=</span> <span class="st">"#d62728"</span>,</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Puerto Rico"</span> <span class="ot">=</span> <span class="st">"#9467bd"</span>)</span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"How Economic Growth Drives Up Housing Costs"</span>,</span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Relationship between household income and monthly rent across U.S. metro areas, 2009"</span>,</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Average Household Income (USD)"</span>,</span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Monthly Rent (USD)"</span>,</span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: American Community Survey (ACS), 2009 1-Year Estimates</span><span class="sc">\n</span><span class="st">Note: Each point represents one Core-Based Statistical Area (CBSA)"</span></span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"sans"</span>, <span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">5</span>)),</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"gray30"</span>, <span class="at">size =</span> <span class="dv">11</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>)),</span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">color =</span> <span class="st">"gray50"</span>, <span class="at">size =</span> <span class="dv">9</span>),</span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)</span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This visualization examines whether metropolitan areas with higher household incomes experience proportionally higher rental costs, and how regional patterns differ across the United States in 2009.</p>
</section>
</section>
<section id="total-employment-vs.-total-employment-in-health-care-and-social-services" class="level2">
<h2 class="anchored" data-anchor-id="total-employment-vs.-total-employment-in-health-care-and-social-services">Total Employment vs.&nbsp;Total Employment in Health Care and Social Services</h2>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: viz-2-healthcare-share</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate healthcare share by year</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>healthcare_share <span class="ot">&lt;-</span> WAGES <span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> YEAR,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_healthcare =</span> <span class="fu">str_starts</span>(<span class="fu">as.character</span>(INDUSTRY), <span class="st">"62"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_employment =</span> <span class="fu">sum</span>(EMPLOYMENT, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">healthcare_employment =</span> <span class="fu">sum</span>(<span class="fu">if_else</span>(is_healthcare, EMPLOYMENT, <span class="dv">0</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">healthcare_share =</span> healthcare_employment <span class="sc">/</span> total_employment <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Create line plot</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(healthcare_share, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> healthcare_share)) <span class="sc">+</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">percent_format</span>(<span class="at">scale =</span> <span class="dv">1</span>),</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>),</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>))</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2009</span>, <span class="dv">2023</span>, <span class="dv">2</span>),</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.02</span>))</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Healthcare &amp; Social Services as Share of Total Employment"</span>,</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Steady growth from 9.3% (2009) to 10.1% (2023), with pandemic-driven acceleration"</span>,</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Healthcare Share of Total Employment"</span>,</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: Bureau of Labor Statistics, Quarterly Census of Employment and Wages (QCEW)</span><span class="sc">\n</span><span class="st">NAICS 62: Health Care and Social Assistance | 2020 excluded due to COVID-19 data artifacts"</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"sans"</span>, <span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">5</span>)),</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"gray30"</span>, <span class="at">size =</span> <span class="dv">11</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>)),</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">color =</span> <span class="st">"gray50"</span>, <span class="at">size =</span> <span class="dv">9</span>),</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Healthcare and social service jobs grew from 9.3% to 10.1% of all metro employment between 2009 and 2023. This steady growth, which spiked in 2021 due to the pandemic, shows healthcare is an increasing part of the American economy.</p>
<section id="evolution-of-average-household" class="level3">
<h3 class="anchored" data-anchor-id="evolution-of-average-household">Evolution of Average Household</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: viz-3-household-size</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Calculate household size by CBSA and year</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>household_size_data <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(HOUSEHOLDS, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">household_size =</span> population <span class="sc">/</span> households,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">str_extract</span>(NAME, <span class="st">", ([A-Z]{2})"</span>, <span class="at">group =</span> <span class="dv">1</span>),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"CT"</span>, <span class="st">"ME"</span>, <span class="st">"MA"</span>, <span class="st">"NH"</span>, <span class="st">"RI"</span>, <span class="st">"VT"</span>, <span class="st">"NJ"</span>, <span class="st">"NY"</span>, <span class="st">"PA"</span>) <span class="sc">~</span> <span class="st">"Northeast"</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"IL"</span>, <span class="st">"IN"</span>, <span class="st">"MI"</span>, <span class="st">"OH"</span>, <span class="st">"WI"</span>, <span class="st">"IA"</span>, <span class="st">"KS"</span>, <span class="st">"MN"</span>, <span class="st">"MO"</span>, <span class="st">"NE"</span>, <span class="st">"ND"</span>, <span class="st">"SD"</span>) <span class="sc">~</span> <span class="st">"Midwest"</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DE"</span>, <span class="st">"FL"</span>, <span class="st">"GA"</span>, <span class="st">"MD"</span>, <span class="st">"NC"</span>, <span class="st">"SC"</span>, <span class="st">"VA"</span>, <span class="st">"WV"</span>, <span class="st">"AL"</span>, <span class="st">"KY"</span>, <span class="st">"MS"</span>, <span class="st">"TN"</span>, <span class="st">"AR"</span>, <span class="st">"LA"</span>, <span class="st">"OK"</span>, <span class="st">"TX"</span>, <span class="st">"DC"</span>) <span class="sc">~</span> <span class="st">"South"</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"AZ"</span>, <span class="st">"CO"</span>, <span class="st">"ID"</span>, <span class="st">"MT"</span>, <span class="st">"NV"</span>, <span class="st">"NM"</span>, <span class="st">"UT"</span>, <span class="st">"WY"</span>, <span class="st">"AK"</span>, <span class="st">"CA"</span>, <span class="st">"HI"</span>, <span class="st">"OR"</span>, <span class="st">"WA"</span>) <span class="sc">~</span> <span class="st">"West"</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>      state <span class="sc">==</span> <span class="st">"PR"</span> <span class="sc">~</span> <span class="st">"Puerto Rico"</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">!=</span> <span class="st">"Other"</span>, region <span class="sc">!=</span> <span class="st">"Puerto Rico"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME, year, household_size, region, population, households)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Calculate regional averages (weighted by population)</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>regional_averages <span class="ot">&lt;-</span> household_size_data <span class="sc">%&gt;%</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region, year) <span class="sc">%&gt;%</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_household_size =</span> <span class="fu">weighted.mean</span>(household_size, <span class="at">w =</span> population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Calculate national average (weighted by population)</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>national_average <span class="ot">&lt;-</span> household_size_data <span class="sc">%&gt;%</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_household_size =</span> <span class="fu">weighted.mean</span>(household_size, <span class="at">w =</span> population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="st">"National Average"</span>,</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Combine for plotting</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>plot_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(regional_averages, national_average) <span class="sc">%&gt;%</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">factor</span>(region, </span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>                   <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"National Average"</span>, <span class="st">"Northeast"</span>, <span class="st">"Midwest"</span>, <span class="st">"South"</span>, <span class="st">"West"</span>))</span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Create expanded, properly spaced plot</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plot_data, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> avg_household_size, <span class="at">color =</span> region, <span class="at">linetype =</span> region)) <span class="sc">+</span></span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.2</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Region"</span>,</span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"National Average"</span> <span class="ot">=</span> <span class="st">"gray30"</span>,</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Northeast"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, </span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Midwest"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>, </span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>               <span class="st">"South"</span> <span class="ot">=</span> <span class="st">"#2ca02c"</span>, </span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>               <span class="st">"West"</span> <span class="ot">=</span> <span class="st">"#d62728"</span>)</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(</span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Region"</span>,</span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"National Average"</span> <span class="ot">=</span> <span class="st">"dashed"</span>,</span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Northeast"</span> <span class="ot">=</span> <span class="st">"solid"</span>,</span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Midwest"</span> <span class="ot">=</span> <span class="st">"solid"</span>,</span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>               <span class="st">"South"</span> <span class="ot">=</span> <span class="st">"solid"</span>,</span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>               <span class="st">"West"</span> <span class="ot">=</span> <span class="st">"solid"</span>)</span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fl">2.0</span>, <span class="fl">3.5</span>, <span class="fl">0.25</span>),</span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">2.0</span>, <span class="fl">3.5</span>),</span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.05</span>))</span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2009</span>, <span class="dv">2023</span>, <span class="dv">2</span>),</span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.02</span>))</span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Evolution of Average Household Size by Region"</span>,</span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Population-weighted regional averages, 2009-2023"</span>,</span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Household Size</span><span class="sc">\n</span><span class="st">(Persons per Household)"</span>,</span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: American Community Survey (ACS)</span><span class="sc">\n</span><span class="st">Regional colors consistent with Visualization 1; national average shown as dashed line"</span></span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>)),</span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"gray40"</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>)),</span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">15</span>)),</span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="dv">20</span>)),</span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">"gray50"</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">15</span>)),</span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"cm"</span>),</span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"cm"</span>),</span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray90"</span>),</span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">20</span>)</span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Nationally, the average household size fell from 2.62 to 2.54 people between 2009 and 2023, a trend seen across all U.S. regions. Regional differences have been consistent: the West has the largest households (2.75 people in 2023), and the Midwest has the smallest (2.45).</p>
<p>This long-term national decline reflects documented demographic and economic factors, including shifts in family structure (<a href="https://usafacts.org/articles/why-are-us-homes-getting-bigger-while-households-shrink/" target="_blank"> such as smaller family sizes</a>) and economic pressures (like housing costs) that influence living arrangements, <a href="https://www.pewresearch.org/short-reads/2025/04/17/the-shares-of-young-adults-living-with-parents-vary-widely-across-the-us/" target="_blank"> especially for young adults</a>.</p>
</section>
</section>
<section id="task-4-rent-burden-analysis" class="level2">
<h2 class="anchored" data-anchor-id="task-4-rent-burden-analysis">Task 4: Rent Burden Analysis</h2>
<section id="change-of-rent-burden-over-time" class="level3">
<h3 class="anchored" data-anchor-id="change-of-rent-burden-over-time">Change of Rent Burden Over Time</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task4-rent-burden</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Part 1: Data Preparation</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>df_rent_burden <span class="ot">&lt;-</span> INCOME <span class="sc">%&gt;%</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Metro Area"</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    RENT <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Metro Area"</span>, NAME)),</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">!=</span> <span class="dv">2020</span>, household_income <span class="sc">&gt;</span> <span class="dv">0</span>, monthly_rent <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">str_extract</span>(NAME, <span class="st">", ([A-Z]{2})"</span>, <span class="at">group =</span> <span class="dv">1</span>)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">!=</span> <span class="st">"PR"</span>) <span class="sc">%&gt;%</span>  <span class="co"># Exclude Puerto Rico</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">monthly_income =</span> household_income <span class="sc">/</span> <span class="dv">12</span>,</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_to_income_ratio =</span> monthly_rent <span class="sc">/</span> monthly_income,</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">affordability_gap_pp =</span> (rent_to_income_ratio <span class="sc">-</span> <span class="fl">0.30</span>) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">rti_pct =</span> rent_to_income_ratio <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME, state, year, affordability_gap_pp, rti_pct, </span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>         rent_to_income_ratio, <span class="at">median_rent =</span> monthly_rent, </span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">median_income =</span> household_income) <span class="sc">%&gt;%</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(NAME, year)</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>latest_year <span class="ot">&lt;-</span> <span class="fu">max</span>(df_rent_burden<span class="sc">$</span>year)</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>metro_single <span class="ot">&lt;-</span> <span class="st">"Colorado Springs, CO Metro Area"</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>metro_highest <span class="ot">&lt;-</span> <span class="st">"Miami-Fort Lauderdale-West Palm Beach, FL Metro Area"</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>metro_lowest <span class="ot">&lt;-</span> df_rent_burden <span class="sc">%&gt;%</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> latest_year) <span class="sc">%&gt;%</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(affordability_gap_pp) <span class="sc">%&gt;%</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(NAME)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<hr>
<p>To measure housing affordability, an <strong>Affordability Gap</strong> metric calculates how many percentage points a metro areaâ€™s rent-to-income ratio deviates from the <a href="https://www.huduser.gov/portal/datasets/cp/CHAS/bg_chas.html" target="_blank">30% affordability threshold</a> established by the U.S. Department of Housing and Urban Development (HUD).</p>
<p><strong>Formula:</strong></p>
<p><span class="math display">\[\text{Affordability Gap (pp)} = (\text{Rent-to-Income Ratio} - 0.30) \times 100\]</span></p>
<p><strong>Metric Interpretation:</strong></p>
<p>This metric shows how many percentage points a metroâ€™s rent-to-income ratio is above or below the 30% federal affordability standard.</p>
<ul>
<li><strong>Positive values</strong> (e.g., +8.0 pp): Burdened. Rent is 8 points above the 30% limit.</li>
<li><strong>Negative values</strong> (e.g., -12.8 pp): Affordable. Rent is 12.8 points below the 30% limit.</li>
<li><strong>Zero value</strong> (0.0 pp): At the 30% limit.</li>
</ul>
<p>The formula is more intuitive than a raw ratio and directly answers the policy question: â€œHow far from the affordability standard is this metro?â€</p>
<p><strong>Note:</strong> Analysis covers all U.S. metropolitan areas, excluding Puerto Rico. 2020 data is omitted due to pandemic anomalies.</p>
<hr>
<section id="finding-deteriorating-affordability-in-fast-growing-southern-mountain-west-metros" class="level4">
<h4 class="anchored" data-anchor-id="finding-deteriorating-affordability-in-fast-growing-southern-mountain-west-metros"><strong>Finding: Deteriorating Affordability in Fast-Growing Southern &amp; Mountain-West Metros</strong></h4>
<p>The metros with the largest rent-burden increases from 2009â€“2023 cluster in the South and Mountain West, with many appearing from traditional Sunbelt markets. Colorado Springs ranks first, with its affordability cushion narrowing from comfortable to concerning. While still below the 30% HUD threshold, the broader pattern shows historically affordable, fast-growing metros facing increasing affordability pressures.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 1: Largest Increases</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>df_change <span class="ot">&lt;-</span> df_rent_burden <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2009</span>, <span class="dv">2023</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME, state, year, affordability_gap_pp) <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> affordability_gap_pp, </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">"gap_"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change_pp =</span> gap_2023 <span class="sc">-</span> gap_2009) <span class="sc">%&gt;%</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(change_pp))</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>df_table1 <span class="ot">&lt;-</span> df_change <span class="sc">%&gt;%</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(change_pp)) <span class="sc">%&gt;%</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Gap 2009 (pp)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(gap_2009, <span class="dv">1</span>),</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Gap 2023 (pp)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(gap_2023, <span class="dv">1</span>),</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Change (pp)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(change_pp, <span class="dv">1</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  df_table1,</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 1: Top 5 Metro Areas with Largest Rent Burden Increases (2009-2023)"</span></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatRound</span>(<span class="fu">c</span>(<span class="st">"Gap 2009 (pp)"</span>, <span class="st">"Gap 2023 (pp)"</span>, <span class="st">"Change (pp)"</span>), <span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Metro Area"</span>,</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> <span class="st">'row'</span>,</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleEqual</span>(metro_single, <span class="st">'#fdebd0'</span>),</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontWeight =</span> <span class="fu">styleEqual</span>(metro_single, <span class="st">'bold'</span>)</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Change (pp)"</span>,</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>), <span class="fu">c</span>(<span class="st">"#d4edda"</span>, <span class="st">"#fff3cd"</span>, <span class="st">"#f8d7da"</span>, <span class="st">"#f5c6cb"</span>))</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0f707332cf2f013cc16a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0f707332cf2f013cc16a">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">Table 1: Top 5 Metro Areas with Largest Rent Burden Increases (2009-2023)<\/caption>","data":[[1,2,3,4,5],["Colorado Springs, CO Metro Area","Cape Coral-Fort Myers, FL Metro Area","Houma-Bayou Cane-Thibodaux, LA Metro Area","Boulder, CO Metro Area","Naples-Marco Island, FL Metro Area"],["CO","FL","LA","CO","FL"],[-12.8,-5.4,-13.8,-10.8,-7.5],[-7.2,0.1,-8.800000000000001,-5.9,-2.8],[5.6,5.5,5,4.9,4.7]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Gap 2009 (pp)<\/th>\n      <th>Gap 2023 (pp)<\/th>\n      <th>Change (pp)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Gap 2009 (pp)","targets":3},{"name":"Gap 2023 (pp)","targets":4},{"name":"Change (pp)","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(row).css({'font-weight':value == \"Colorado Springs, CO Metro Area\" ? \"bold\" : null,'background-color':value == \"Colorado Springs, CO Metro Area\" ? \"#fdebd0\" : null});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 2 ? \"#d4edda\" : value <= 4 ? \"#fff3cd\" : value <= 6 ? \"#f8d7da\" : \"#f5c6cb\"});\n}"}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p>Sunbelt metros face this tightening as a result of several converging factors during the study period.</p>
<ul>
<li>Migration Surge: Many high-earning residents migrated to these areas.</li>
<li>Constrained Supply: Existing housing and zoning rules prevented developers from increasing the supply of new housing.</li>
<li>Wage Stagnation: Rents rose faster than local wages, widening the affordability gap.</li>
</ul>
<hr>
</section>
<section id="anatomy-of-a-squeeze-colorado-springs-rent-burden-evolution" class="level4">
<h4 class="anchored" data-anchor-id="anatomy-of-a-squeeze-colorado-springs-rent-burden-evolution"><strong>Anatomy of a Squeeze: Colorado Springs Rent Burden Evolution</strong></h4>
<p>The Colorado Springs metro experienced the largest sustained increase in rent burden, illustrating how affordability can wane over time.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 2: Time Series </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>df_table2 <span class="ot">&lt;-</span> df_rent_burden <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NAME <span class="sc">==</span> metro_single) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Year =</span> year,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Affordability Gap (pp)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(affordability_gap_pp, <span class="dv">1</span>),</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Rent-to-Income Ratio (RTI)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(rent_to_income_ratio, <span class="dv">2</span>),</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Median Rent ($)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(median_rent, <span class="dv">0</span>),</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Median Income ($)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(median_income, <span class="dv">0</span>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  df_table2,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">15</span>,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">"Table 2: Rent Burden Over Time â€”"</span>, metro_single, <span class="st">"(2009-2023)"</span>)</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatRound</span>(<span class="fu">c</span>(<span class="st">"Affordability Gap (pp)"</span>, <span class="st">"Rent-to-Income Ratio (RTI)"</span>), <span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="fu">c</span>(<span class="st">"Median Rent ($)"</span>, <span class="st">"Median Income ($)"</span>), <span class="at">currency =</span> <span class="st">"$"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Affordability Gap (pp)"</span>,</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">cuts =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>),</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#d4edda"</span>, <span class="st">"#fff3cd"</span>, <span class="st">"#f8d7da"</span>, <span class="st">"#f5c6cb"</span>)</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-d99b7e8e98cd6c2d82d6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d99b7e8e98cd6c2d82d6">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">Table 2: Rent Burden Over Time â€” Colorado Springs, CO Metro Area (2009-2023)<\/caption>","data":[[2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2021,2022,2023],[-12.8,-11.3,-10.8,-10.5,-9.6,-10.2,-9.199999999999999,-10.1,-9,-8.9,-9.300000000000001,-7.8,-6.9,-7.2],[0.17,0.19,0.19,0.2,0.2,0.2,0.21,0.2,0.21,0.21,0.21,0.22,0.23,0.23],[792,807,880,899,976,978,1049,1057,1146,1188,1251,1465,1575,1706],[55176,51683,54877,55320,57484,59411,60458,63651,65593,67430,72633,79014,81912,89792]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Year<\/th>\n      <th>Affordability Gap (pp)<\/th>\n      <th>Rent-to-Income Ratio (RTI)<\/th>\n      <th>Median Rent ($)<\/th>\n      <th>Median Income ($)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":15,"dom":"t","ordering":false,"columnDefs":[{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"className":"dt-left","targets":"_all"},{"name":"Year","targets":0},{"name":"Affordability Gap (pp)","targets":1},{"name":"Rent-to-Income Ratio (RTI)","targets":2},{"name":"Median Rent ($)","targets":3},{"name":"Median Income ($)","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,15,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= -10 ? \"#d4edda\" : value <= 0 ? \"#fff3cd\" : value <= 10 ? \"#f8d7da\" : \"#f5c6cb\"});\n}"}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
</section>
<section id="context-national-rent-burden-extremes" class="level4">
<h4 class="anchored" data-anchor-id="context-national-rent-burden-extremes"><strong>Context: National Rent Burden Extremes</strong></h4>
<p>While Colorado Springs is on a slippery path, itâ€™s still more affordable than metros on the edge of an affordability gap like Florida (as shown in Table 3). However, this metro is catching up fast. It has already lost 5.6 points of affordability since 2009. If this trend continues, it will become another unaffordable metro within the next two decades.</p>
<p>Table 3 highlights that metros with rapid growth lacking sufficient building can lead to potential affordability gaps.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 3: Highest Burden</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>df_table3 <span class="ot">&lt;-</span> df_rent_burden <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> latest_year) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(affordability_gap_pp)) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Affordability Gap (pp)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(affordability_gap_pp, <span class="dv">1</span>),</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">RTI (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(rti_pct, <span class="dv">1</span>),</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Median Rent ($)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(median_rent, <span class="dv">0</span>),</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Median Income ($)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(median_income, <span class="dv">0</span>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  df_table3,</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">TRUE</span>,</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HTML</span>(<span class="fu">paste0</span>(<span class="st">"Table 3: Top 5 Highest Rent Burden Metro Areas â€” "</span>, latest_year, </span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"&lt;br&gt;&lt;span style='font-size: 0.85em; font-weight: normal; color: #666;'&gt;"</span>,</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Note: Cape Coral-Fort Myers and Miami are statistically tied at 0.1 pp above the affordability threshold (both 30.1% RTI). "</span>,</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Miami is highlighted due to its larger population (6.1M vs 830K) and greater policy significance.&lt;/span&gt;"</span>))</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatRound</span>(<span class="fu">c</span>(<span class="st">"Affordability Gap (pp)"</span>, <span class="st">"RTI (%)"</span>), <span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="fu">c</span>(<span class="st">"Median Rent ($)"</span>, <span class="st">"Median Income ($)"</span>), <span class="at">currency =</span> <span class="st">"$"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Metro Area"</span>,</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> <span class="st">'row'</span>,</span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleEqual</span>(metro_highest, <span class="st">'#fff3cd'</span>),</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontWeight =</span> <span class="fu">styleEqual</span>(metro_highest, <span class="st">'bold'</span>)</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Affordability Gap (pp)"</span>,</span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="dv">0</span>, <span class="fu">c</span>(<span class="st">"#d4edda"</span>, <span class="st">"#f8d7da"</span>))</span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-75a6356bbe39d8332948" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-75a6356bbe39d8332948">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">Table 3: Top 5 Highest Rent Burden Metro Areas â€” 2023<br><span style='font-size: 0.85em; font-weight: normal; color: #666;'>Note: Cape Coral-Fort Myers and Miami are statistically tied at 0.1 pp above the affordability threshold (both 30.1% RTI). Miami is highlighted due to its larger population (6.1M vs 830K) and greater policy significance.<\/span><\/caption>","data":[[1,2,3,4,5],["Cape Coral-Fort Myers, FL Metro Area","Miami-Fort Lauderdale-West Palm Beach, FL Metro Area","Port St. Lucie, FL Metro Area","Tampa-St. Petersburg-Clearwater, FL Metro Area","North Port-Bradenton-Sarasota, FL Metro Area"],["FL","FL","FL","FL","FL"],[0.1,0.1,-0.5,-1.5,-1.8],[30.1,30.1,29.5,28.5,28.2],[1797,1914,1679,1729,1854],[71547,76271,68316,72743,78914]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Affordability Gap (pp)<\/th>\n      <th>RTI (%)<\/th>\n      <th>Median Rent ($)<\/th>\n      <th>Median Income ($)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":true,"columnDefs":[{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":6,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Affordability Gap (pp)","targets":3},{"name":"RTI (%)","targets":4},{"name":"Median Rent ($)","targets":5},{"name":"Median Income ($)","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(row).css({'font-weight':value == \"Miami-Fort Lauderdale-West Palm Beach, FL Metro Area\" ? \"bold\" : null,'background-color':value == \"Miami-Fort Lauderdale-West Palm Beach, FL Metro Area\" ? \"#fff3cd\" : null});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 0 ? \"#d4edda\" : \"#f8d7da\"});\n}"}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p>In different parts of the country, affordability is much stronger, with smaller Midwest/Plains metros, like Bismarck, with other metros like Jefferson City, Decatur, Dubuque, and Paducah close behind. Each of these metros are comfortably below the 30% rent standard, signaling real affordability relief compared with tighter Sunbelt markets.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 4: Lowest Burden</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>df_table4 <span class="ot">&lt;-</span> df_rent_burden <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> latest_year) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(affordability_gap_pp) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Affordability Gap (pp)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(affordability_gap_pp, <span class="dv">1</span>),</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">RTI (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(rti_pct, <span class="dv">1</span>),</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Median Rent ($)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(median_rent, <span class="dv">0</span>),</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Median Income ($)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(median_income, <span class="dv">0</span>)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  df_table4,</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">"Table 4: Top 5 Lowest Rent Burden Metro Areas â€”"</span>, latest_year)</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatRound</span>(<span class="fu">c</span>(<span class="st">"Affordability Gap (pp)"</span>, <span class="st">"RTI (%)"</span>), <span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="fu">c</span>(<span class="st">"Median Rent ($)"</span>, <span class="st">"Median Income ($)"</span>), <span class="at">currency =</span> <span class="st">"$"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Metro Area"</span>,</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> <span class="st">'row'</span>,</span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleEqual</span>(metro_lowest, <span class="st">'#d4edda'</span>),</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontWeight =</span> <span class="fu">styleEqual</span>(metro_lowest, <span class="st">'bold'</span>)</span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Affordability Gap (pp)"</span>,</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="dv">0</span>, <span class="fu">c</span>(<span class="st">"#d4edda"</span>, <span class="st">"#f8d7da"</span>))</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-cabc83a3bf030d8a8c82" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-cabc83a3bf030d8a8c82">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">Table 4: Top 5 Lowest Rent Burden Metro Areas â€” 2023<\/caption>","data":[[1,2,3,4,5],["Bismarck, ND Metro Area","Jefferson City, MO Metro Area","Decatur, AL Metro Area","Dubuque, IA Metro Area","Paducah, KY-IL Metro Area"],["ND","MO","AL","IA","KY"],[-16.3,-16.2,-16,-15.5,-15.3],[13.7,13.8,14,14.5,14.7],[951,792,854,868,754],[83440,68629,72956,71940,61699]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Affordability Gap (pp)<\/th>\n      <th>RTI (%)<\/th>\n      <th>Median Rent ($)<\/th>\n      <th>Median Income ($)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":6,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Affordability Gap (pp)","targets":3},{"name":"RTI (%)","targets":4},{"name":"Median Rent ($)","targets":5},{"name":"Median Income ($)","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(row).css({'font-weight':value == \"Bismarck, ND Metro Area\" ? \"bold\" : null,'background-color':value == \"Bismarck, ND Metro Area\" ? \"#d4edda\" : null});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 0 ? \"#d4edda\" : \"#f8d7da\"});\n}"}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p>By establishing how to measure rent burden, the next section focuses on the supply side of the affordability equation by addressing how intensively metros are building housing.</p>
<hr>
</section>
</section>
</section>
<section id="task-5-housing-growth" class="level2">
<h2 class="anchored" data-anchor-id="task-5-housing-growth">Task 5: Housing Growth</h2>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task5-housing-data-prep</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Prepare Population Data </span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>pop_metro <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Metro Area"</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">CBSA =</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(GEOID, <span class="st">"[0-9]+$"</span>)),</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">str_extract</span>(NAME, <span class="st">", ([A-Z]{2})"</span>, <span class="at">group =</span> <span class="dv">1</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">!=</span> <span class="st">"PR"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME, CBSA, state, year, population)</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Join with PERMITS</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>housing_data <span class="ot">&lt;-</span> pop_metro <span class="sc">%&gt;%</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>    PERMITS <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">permits =</span> new_housing_units_permitted),</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"CBSA"</span>, <span class="st">"year"</span>)</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(NAME, year)</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Calculate Five-Year Rolling Population Growth</span></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>housing_data <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GEOID, NAME, CBSA) <span class="sc">%&gt;%</span></span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_5yr_ago =</span> <span class="fu">lag</span>(population, <span class="at">n =</span> <span class="dv">5</span>),</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_change_5yr =</span> population <span class="sc">-</span> pop_5yr_ago,</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_growth_rate_5yr =</span> (population <span class="sc">-</span> pop_5yr_ago) <span class="sc">/</span> pop_5yr_ago <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_growing =</span> pop_change_5yr <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2014</span>, <span class="sc">!</span><span class="fu">is.na</span>(pop_change_5yr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task5-metrics-calculation</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Metric 1: Instantaneous Housing Supply </span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>housing_data <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">permits_per_1000 =</span> (permits <span class="sc">/</span> population) <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>national_avg_metric1 <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">nat_avg_permits_per_1000 =</span> <span class="fu">weighted.mean</span>(permits_per_1000, </span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">w =</span> population, </span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>housing_data <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(national_avg_metric1, <span class="at">by =</span> <span class="st">"year"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">metric1_index =</span> (permits_per_1000 <span class="sc">/</span> nat_avg_permits_per_1000) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Metric 2: Growth Acoommodation Index</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>IDEAL_HOUSEHOLD_SIZE <span class="ot">&lt;-</span> <span class="fl">2.5</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>IDEAL_PERMITS_PER_CAPITA <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> IDEAL_HOUSEHOLD_SIZE</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>housing_data <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">permits_per_pop_growth =</span> <span class="fu">if_else</span>(</span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>      is_growing <span class="sc">&amp;</span> pop_change_5yr <span class="sc">&gt;</span> <span class="dv">100</span>,</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>      permits <span class="sc">/</span> pop_change_5yr,</span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA_real_</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">metric2_index =</span> <span class="fu">if_else</span>(</span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(permits_per_pop_growth),</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>      (permits_per_pop_growth <span class="sc">/</span> IDEAL_PERMITS_PER_CAPITA) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA_real_</span></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Composite Score</span></span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>housing_data <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">composite_score =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(metric2_index) <span class="sc">~</span> <span class="fl">0.6</span> <span class="sc">*</span> metric1_index <span class="sc">+</span> <span class="fl">0.4</span> <span class="sc">*</span> metric2_index,</span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(metric1_index) <span class="sc">~</span> metric1_index,</span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span></span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<hr>
<p>Two complementary metrics can best assess housing supply across U.S. metros areas: current per-capita building rate and responsiveness to population growth.</p>
<section id="instantaneous-housing-supply-index-metric-1" class="level4">
<h4 class="anchored" data-anchor-id="instantaneous-housing-supply-index-metric-1"><strong>Instantaneous Housing Supply Index (Metric 1)</strong></h4>
<p>This metric shows how intensively a metro is currently building, focusing on permits issued relative to its present rising or falling population. It reflects the metroâ€™s near-term commitment to expanding supply.</p>
<p><strong>Calculation:</strong></p>
<ul>
<li>Per-capita permitting rate:</li>
</ul>
<p><span class="math display">\[\text{Permits per 1,000} = \frac{\text{Total Housing Permits}}{\text{Population}} \times 1,000\]</span></p>
<ul>
<li>Index (national baseline = 100): Divide each metroâ€™s rate by the same-year, population-weighted national average, then multiply by 100.</li>
</ul>
<p><span class="math display">\[\text{Metric 1 Index} = \frac{\text{Metro's Permits per 1,000}}{\text{National Average Permits per 1,000}} \times 100\]</span></p>
<p><strong>Interpretation:</strong></p>
<ul>
<li><strong>Index = 100</strong>: Building at the national average rate</li>
<li><strong>Index &gt; 100</strong>: Building faster than average (e.g., 150 = 50% above average)</li>
<li><strong>Index &lt; 100</strong>: Building less than average (e.g., 75 = 25% below average)</li>
</ul>
<p>For example, a metro with an index of 200 is issuing housing permits at twice the national per-capita rate, indicating fast housing supply expansion.</p>
<hr>
</section>
<section id="growth-accommodation-index-metric-2" class="level4">
<h4 class="anchored" data-anchor-id="growth-accommodation-index-metric-2"><strong>Growth Accommodation Index (Metric 2)</strong></h4>
<p>This metric measures whether a metro is permitting enough new homes to keep pace with five-year population growth.</p>
<p><strong>Calculation:</strong></p>
<ul>
<li>Permits per growth resident:</li>
</ul>
<p><span class="math display">\[\text{Permits per Growth} = \frac{\text{Annual Housing Permits}}{\text{Five-Year Population Change}}\]</span></p>
<ul>
<li>Index (ideal baseline = 100): Compare to the ideal 0.4 units per new resident or ~2.5 persons per household (<a href="https://usafacts.org/articles/why-are-us-homes-getting-bigger-while-households-shrink/" target="_blank">U.S. Census Bureau, 2023</a>).</li>
</ul>
<p><span class="math display">\[\text{Metric 2 Index} = \frac{\text{Permits per Growth}}{0.4} \times 100\]</span></p>
<p><strong>Interpretation:</strong></p>
<ul>
<li><strong>Index = 100</strong>: building on pace with growth</li>
<li><strong>Index &gt; 100</strong>: Surplus housing relative to growth</li>
<li><strong>Index &lt; 100</strong>: Deficit housing relative to growth</li>
</ul>
<p><strong>Metric Note:</strong> This metric is not applicable to metros with declining or stable populations (defined as five-year population change â‰¤ 100 people). For these metros, Metric 2 is recorded as NA, and their composite score is based solely on Metric 1.</p>
<p><strong>Data Note:</strong> Population growth includes both net migration and natural increase (births minus deaths). Housing demand is typically higher when there are higher levels of inward migration, as new households form immediately, compared to natural increase where housing needs develop gradually as families expand. Consequently, Metric 2 might make a metroâ€™s housing supply look fine if its population growth is mostly from births, even if itâ€™s not building enough.</p>
<hr>
</section>
<section id="composite-housing-growth-score" class="level4">
<h4 class="anchored" data-anchor-id="composite-housing-growth-score"><strong>Composite Housing Growth Score</strong></h4>
<p>A single score that blends current building effort (Metric 1) and growth responsiveness (Metric 2):</p>
<p><span class="math display">\[\text{Composite Score} = (0.6 \times \text{Metric 1}) + (0.4 \times \text{Metric 2})\]</span></p>
<ul>
<li><p><strong>Justification for 60/40</strong>: Most residents are current households, so steady per-capita building should carry slightly more weight than growth-driven need; thus, rewarding metros that keep up with population gains.</p></li>
<li><p><strong>Special Case for No Growth</strong>: If five-year population change â‰¤ 100 (Metric 2 = NA), the Composite = Metric 1.</p></li>
</ul>
<hr>
</section>
<section id="strategic-design-choices" class="level4">
<h4 class="anchored" data-anchor-id="strategic-design-choices"><strong>Strategic Design Choices</strong></h4>
<ul>
<li>Population-weighted baseline: National averages are weighted by population, thus the â€œ100â€ benchmark reflects where most people live.</li>
<li>Five-year window: Matches <a href="https://www.census.gov/content/dam/Census/library/publications/2018/acs/acs_general_handbook_2018_ch03.pdf" target="_blank">typical housing/ACS five-year cycles</a><a>, smoothing year-to-year noise.</a></li><a>
<li>Household size anchor: Uses ~2.5 persons/household â‡’ 0.4 units per new resident as the â€œon-paceâ€ benchmark for Metric 2.</li>
<li>Robustness: Results are stable under other nearby weights (e.g., 50/50 or 70/30); therefore, rankings move little, confirming the composite isnâ€™t overly sensitive.</li>
</a></ul><a>
<hr>
</a></section><a>
</a><section id="robustness-check-alternative-weighting-scenarios" class="level4"><a>
<h4 class="anchored" data-anchor-id="robustness-check-alternative-weighting-scenarios"><strong>Robustness Check: Alternative Weighting Scenarios</strong></h4>
<p>Testing different formulas shows the same five metros consistently at the Top 5, but rankings within this group shift drastically.</p>
<hr>
</a><div class="cell"><a>
</a><details class="code-fold"><a>
<summary>Show code</summary>
</a><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><a></a><pre class="sourceCode r code-with-copy"><a><code class="sourceCode r"><span id="cb28-1"></span></code></a><code class="sourceCode r"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task5-sensitivity-analysis</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate alternative composite scores</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>sensitivity_2023 <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>, <span class="sc">!</span><span class="fu">is.na</span>(metric2_index)) <span class="sc">%&gt;%</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">composite_50_50 =</span> <span class="fl">0.5</span> <span class="sc">*</span> metric1_index <span class="sc">+</span> <span class="fl">0.5</span> <span class="sc">*</span> metric2_index,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">composite_70_30 =</span> <span class="fl">0.7</span> <span class="sc">*</span> metric1_index <span class="sc">+</span> <span class="fl">0.3</span> <span class="sc">*</span> metric2_index</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(composite_score)) <span class="sc">%&gt;%</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metro =</span> <span class="fu">str_remove</span>(NAME, <span class="st">"</span><span class="sc">\\</span><span class="st">s*Metro Area$"</span>),</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">60/40 (Current)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(composite_score, <span class="dv">1</span>),</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">50/50</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(composite_50_50, <span class="dv">1</span>),</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">70/30</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(composite_70_30, <span class="dv">1</span>),</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Max Difference</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">pmax</span>(</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">abs</span>(composite_score <span class="sc">-</span> composite_50_50),</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">abs</span>(composite_score <span class="sc">-</span> composite_70_30)</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    ), <span class="dv">1</span>)</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- gt table ----</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>sensitivity_2023 <span class="sc">%&gt;%</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align =</span> <span class="st">"left"</span>,</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>,</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">16</span>)</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Robustness Check â€” Alternative Weighting Scenarios (2023 Top 5)**"</span>),</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Top 5 metros ranked by current 60/40 composite score"</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_row_striping</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metro =</span> <span class="st">"Metro"</span>,</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">60/40 (Current)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"60/40 (Current)"</span>,</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">50/50</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"50/50"</span>,</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">70/30</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"70/30"</span>,</span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Max Difference</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Max Difference"</span></span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">60/40 (Current)</span><span class="st">`</span>, <span class="st">`</span><span class="at">50/50</span><span class="st">`</span>, <span class="st">`</span><span class="at">70/30</span><span class="st">`</span>, <span class="st">`</span><span class="at">Max Difference</span><span class="st">`</span>),</span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">1</span>,</span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">use_seps =</span> <span class="cn">TRUE</span></span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"left"</span>,</span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">everything</span>()</span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span>(<span class="fu">paste0</span>(</span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>      <span class="st">"**Source.** Census Building Permits Survey, ACS Population estimates, 2023. "</span>))</span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="nnkhqhnzah" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nnkhqhnzah table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nnkhqhnzah thead, #nnkhqhnzah tbody, #nnkhqhnzah tfoot, #nnkhqhnzah tr, #nnkhqhnzah td, #nnkhqhnzah th {
  border-style: none;
}

#nnkhqhnzah p {
  margin: 0;
  padding: 0;
}

#nnkhqhnzah .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nnkhqhnzah .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nnkhqhnzah .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nnkhqhnzah .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nnkhqhnzah .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nnkhqhnzah .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nnkhqhnzah .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nnkhqhnzah .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nnkhqhnzah .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nnkhqhnzah .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nnkhqhnzah .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nnkhqhnzah .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nnkhqhnzah .gt_spanner_row {
  border-bottom-style: hidden;
}

#nnkhqhnzah .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nnkhqhnzah .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nnkhqhnzah .gt_from_md > :first-child {
  margin-top: 0;
}

#nnkhqhnzah .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nnkhqhnzah .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nnkhqhnzah .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nnkhqhnzah .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nnkhqhnzah .gt_row_group_first td {
  border-top-width: 2px;
}

#nnkhqhnzah .gt_row_group_first th {
  border-top-width: 2px;
}

#nnkhqhnzah .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nnkhqhnzah .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nnkhqhnzah .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nnkhqhnzah .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nnkhqhnzah .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nnkhqhnzah .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nnkhqhnzah .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nnkhqhnzah .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nnkhqhnzah .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nnkhqhnzah .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nnkhqhnzah .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nnkhqhnzah .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nnkhqhnzah .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nnkhqhnzah .gt_left {
  text-align: left;
}

#nnkhqhnzah .gt_center {
  text-align: center;
}

#nnkhqhnzah .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nnkhqhnzah .gt_font_normal {
  font-weight: normal;
}

#nnkhqhnzah .gt_font_bold {
  font-weight: bold;
}

#nnkhqhnzah .gt_font_italic {
  font-style: italic;
}

#nnkhqhnzah .gt_super {
  font-size: 65%;
}

#nnkhqhnzah .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nnkhqhnzah .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nnkhqhnzah .gt_indent_1 {
  text-indent: 5px;
}

#nnkhqhnzah .gt_indent_2 {
  text-indent: 10px;
}

#nnkhqhnzah .gt_indent_3 {
  text-indent: 15px;
}

#nnkhqhnzah .gt_indent_4 {
  text-indent: 20px;
}

#nnkhqhnzah .gt_indent_5 {
  text-indent: 25px;
}

#nnkhqhnzah .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nnkhqhnzah div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="5" class="gt_heading gt_title gt_font_normal"><strong>Robustness Check â€” Alternative Weighting Scenarios (2023 Top 5)</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Top 5 metros ranked by current 60/40 composite score</td>
</tr>
<tr class="gt_col_headings header">
<th id="Metro" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Metro</th>
<th id="a60/40-(Current)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">60/40 (Current)</th>
<th id="a50/50" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">50/50</th>
<th id="a70/30" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">70/30</th>
<th id="Max-Difference" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Max Difference</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Metro">Punta Gorda, FL</td>
<td class="gt_row gt_left" headers="60/40 (Current)">291.7</td>
<td class="gt_row gt_left" headers="50/50">250.7</td>
<td class="gt_row gt_left" headers="70/30">332.7</td>
<td class="gt_row gt_left" headers="Max Difference">41.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Metro">Urban Honolulu, HI</td>
<td class="gt_row gt_left gt_striped" headers="60/40 (Current)">268.0</td>
<td class="gt_row gt_left gt_striped" headers="50/50">325.1</td>
<td class="gt_row gt_left gt_striped" headers="70/30">210.9</td>
<td class="gt_row gt_left gt_striped" headers="Max Difference">57.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Metro">Crestview-Fort Walton Beach-Destin, FL</td>
<td class="gt_row gt_left" headers="60/40 (Current)">250.3</td>
<td class="gt_row gt_left" headers="50/50">215.5</td>
<td class="gt_row gt_left" headers="70/30">285.0</td>
<td class="gt_row gt_left" headers="Max Difference">34.7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Metro">Daphne-Fairhope-Foley, AL</td>
<td class="gt_row gt_left gt_striped" headers="60/40 (Current)">229.6</td>
<td class="gt_row gt_left gt_striped" headers="50/50">195.8</td>
<td class="gt_row gt_left gt_striped" headers="70/30">263.4</td>
<td class="gt_row gt_left gt_striped" headers="Max Difference">33.8</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Metro">Sherman-Denison, TX</td>
<td class="gt_row gt_left" headers="60/40 (Current)">227.4</td>
<td class="gt_row gt_left" headers="50/50">196.0</td>
<td class="gt_row gt_left" headers="70/30">258.9</td>
<td class="gt_row gt_left" headers="Max Difference">31.4</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="5" class="gt_sourcenote"><strong>Source.</strong> Census Building Permits Survey, ACS Population estimates, 2023.</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<hr>
<p><strong>Urban Honolulu</strong> metro shows a <strong>114.2-point swing</strong> between 50/50 (325.1) and 70/30 (210.9) weighting and has the largest sensitivity in this cohort. Although Honolulu excels at building for new arrivals (Metric 2) it falls extremely short for existing residents (Metric 1). The 50/50 weighting wrongly highlights this metro as a top performer despite neglecting the housing needs of its current residents.</p>
<p>Therefore, the <strong>60/40</strong> weight is the best option as it accurately reflects resident composition. Most of the analzyed metros consist of existing households needing stable supply, with population growth impacting a smaller share annually. This weighted balance recognizes and awards metros like Punta Gorda that are consistently building for <em>all</em> residents.</p>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task5-tables-metric1</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code for Metric 1 analysis"</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>metrics_2023 <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 1a: Top 5 - Metric 1</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>table1_high <span class="ot">&lt;-</span> metrics_2023 <span class="sc">%&gt;%</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(metric1_index)) <span class="sc">%&gt;%</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Index</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(metric1_index, <span class="dv">1</span>),</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Permits per 1,000</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(permits_per_1000, <span class="dv">2</span>),</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Total Permits</span><span class="st">`</span> <span class="ot">=</span> scales<span class="sc">::</span><span class="fu">comma</span>(permits),</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Population (M)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(population <span class="sc">/</span> <span class="fl">1e6</span>, <span class="dv">2</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  table1_high,</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>   <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 1a: Top 5 Metros â€” Instantaneous Housing Supply Index (2023)"</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Index"</span>,</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">250</span>, <span class="dv">350</span>), </span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">c</span>(<span class="st">"#ffffff"</span>, <span class="st">"#d4edda"</span>, <span class="st">"#c3e6cb"</span>, <span class="st">"#a8d5ba"</span>))</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-13563f6acd03f88f7005" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-13563f6acd03f88f7005">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">Table 1a: Top 5 Metros â€” Instantaneous Housing Supply Index (2023)<\/caption>","data":[[1,2,3,4,5],["Punta Gorda, FL Metro Area","Crestview-Fort Walton Beach-Destin, FL Metro Area","Daphne-Fairhope-Foley, AL Metro Area","Sherman-Denison, TX Metro Area","Cape Coral-Fort Myers, FL Metro Area"],["FL","FL","AL","TX","FL"],[455.6,389.2,364.9,353.2,344.4],[21.49,18.36,17.21,16.66,16.24],["4,429","5,596","4,363","2,447","13,556"],[0.21,0.3,0.25,0.15,0.83]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Index<\/th>\n      <th>Permits per 1,000<\/th>\n      <th>Total Permits<\/th>\n      <th>Population (M)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Index","targets":3},{"name":"Permits per 1,000","targets":4},{"name":"Total Permits","targets":5},{"name":"Population (M)","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 150 ? \"#ffffff\" : value <= 250 ? \"#d4edda\" : value <= 350 ? \"#c3e6cb\" : \"#a8d5ba\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 1B: Bottom 5 - Metric 1</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>table1_low <span class="ot">&lt;-</span> metrics_2023 <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(metric1_index) <span class="sc">%&gt;%</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Index</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(metric1_index, <span class="dv">1</span>),</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Permits per 1,000</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(permits_per_1000, <span class="dv">2</span>),</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Total Permits</span><span class="st">`</span> <span class="ot">=</span> scales<span class="sc">::</span><span class="fu">comma</span>(permits),</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Population (M)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(population <span class="sc">/</span> <span class="fl">1e6</span>, <span class="dv">2</span>)</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>  table1_low,</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 1b: Bottom 5 Metros â€” Instantaneous Housing Supply Index (2023)"</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Index"</span>,</span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">50</span>), </span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">c</span>(<span class="st">"#f5c6cb"</span>, <span class="st">"#f8d7da"</span>, <span class="st">"#fff3cd"</span>, <span class="st">"#ffffff"</span>))</span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-21488b04e17504b9860f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-21488b04e17504b9860f">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">Table 1b: Bottom 5 Metros â€” Instantaneous Housing Supply Index (2023)<\/caption>","data":[[1,2,3,4,5],["Wheeling, WV-OH Metro Area","Morgantown, WV Metro Area","Weirton-Steubenville, WV-OH Metro Area","Enid, OK Metro Area","Decatur, IL Metro Area"],["WV","WV","WV","OK","IL"],[1.7,2.5,3,3.4,7.2],[0.08,0.12,0.14,0.16,0.34],["11","17","16","10","34"],[0.14,0.14,0.11,0.06,0.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Index<\/th>\n      <th>Permits per 1,000<\/th>\n      <th>Total Permits<\/th>\n      <th>Population (M)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Index","targets":3},{"name":"Permits per 1,000","targets":4},{"name":"Total Permits","targets":5},{"name":"Population (M)","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 10 ? \"#f5c6cb\" : value <= 25 ? \"#f8d7da\" : value <= 50 ? \"#fff3cd\" : \"#ffffff\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task5-tables-metric2</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code for Metric 2 analysis"</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 2A: Top 5 - Metric 2</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>table2_high <span class="ot">&lt;-</span> metrics_2023 <span class="sc">%&gt;%</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(metric2_index)) <span class="sc">%&gt;%</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(metric2_index)) <span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Index</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(metric2_index, <span class="dv">1</span>),</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Permits per Growth</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(permits_per_pop_growth, <span class="dv">3</span>),</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">5yr Pop Growth</span><span class="st">`</span> <span class="ot">=</span> scales<span class="sc">::</span><span class="fu">comma</span>(pop_change_5yr),</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Total Permits</span><span class="st">`</span> <span class="ot">=</span> scales<span class="sc">::</span><span class="fu">comma</span>(permits)</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>  table2_high,</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 2a: Top 5 Metros â€” Growth Accommodation Index (2023)"</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Index"</span>,</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">400</span>), </span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">c</span>(<span class="st">"#ffffff"</span>, <span class="st">"#d4edda"</span>, <span class="st">"#c3e6cb"</span>, <span class="st">"#a8d5ba"</span>))</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-95b75ba8ca65cc1bd0f5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-95b75ba8ca65cc1bd0f5">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">Table 2a: Top 5 Metros â€” Growth Accommodation Index (2023)<\/caption>","data":[[1,2,3,4,5],["Urban Honolulu, HI Metro Area","Dalton, GA Metro Area","Anchorage, AK Metro Area","Hickory-Lenoir-Morganton, NC Metro Area","Brownsville-Harlingen, TX Metro Area"],["HI","GA","AK","NC","TX"],[610.5,439.7,268.2,170.1,163.5],[2.442,1.759,1.073,0.68,0.654],["758","282","426","3,496","2,985"],["1,851","496","457","2,379","1,952"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Index<\/th>\n      <th>Permits per Growth<\/th>\n      <th>5yr Pop Growth<\/th>\n      <th>Total Permits<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Index","targets":3},{"name":"Permits per Growth","targets":4},{"name":"5yr Pop Growth","targets":5},{"name":"Total Permits","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 100 ? \"#ffffff\" : value <= 200 ? \"#d4edda\" : value <= 400 ? \"#c3e6cb\" : \"#a8d5ba\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># TABLE 2B: Bottom 5 - Metric 2</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>table2_low <span class="ot">&lt;-</span> metrics_2023 <span class="sc">%&gt;%</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(metric2_index)) <span class="sc">%&gt;%</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(metric2_index) <span class="sc">%&gt;%</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Index</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(metric2_index, <span class="dv">1</span>),</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Permits per Growth</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(permits_per_pop_growth, <span class="dv">3</span>),</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">5yr Pop Growth</span><span class="st">`</span> <span class="ot">=</span> scales<span class="sc">::</span><span class="fu">comma</span>(pop_change_5yr),</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Total Permits</span><span class="st">`</span> <span class="ot">=</span> scales<span class="sc">::</span><span class="fu">comma</span>(permits)</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>  table2_low,</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 2b: Bottom 5 Metros â€” Growth Accommodation Index (2023)"</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Index"</span>,</span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">25</span>), </span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">c</span>(<span class="st">"#f5c6cb"</span>, <span class="st">"#f8d7da"</span>, <span class="st">"#fff3cd"</span>, <span class="st">"#ffffff"</span>))</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-cbe20da8870120b2ee5a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-cbe20da8870120b2ee5a">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">Table 2b: Bottom 5 Metros â€” Growth Accommodation Index (2023)<\/caption>","data":[[1,2,3,4,5],["Atlantic City-Hammonton, NJ Metro Area","Longview, TX Metro Area","Morgantown, WV Metro Area","Manhattan, KS Metro Area","Jackson, TN Metro Area"],["NJ","TX","WV","KS","TN"],[1,1.2,1.4,1.8,2.1],[0.004,0.005,0.005,0.007,0.008],["99,905","76,017","3,108","34,751","52,591"],["383","364","17","257","434"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Index<\/th>\n      <th>Permits per Growth<\/th>\n      <th>5yr Pop Growth<\/th>\n      <th>Total Permits<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Index","targets":3},{"name":"Permits per Growth","targets":4},{"name":"5yr Pop Growth","targets":5},{"name":"Total Permits","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 5 ? \"#f5c6cb\" : value <= 10 ? \"#f8d7da\" : value <= 25 ? \"#fff3cd\" : \"#ffffff\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task5-tables-composite</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code for Composite Score analysis"</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 3A: Top 5 - Composite Score</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>table3_high <span class="ot">&lt;-</span> metrics_2023 <span class="sc">%&gt;%</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(composite_score)) <span class="sc">%&gt;%</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(composite_score)) <span class="sc">%&gt;%</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Composite Score</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(composite_score, <span class="dv">1</span>),</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metric 1</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(metric1_index, <span class="dv">1</span>),</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metric 2</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(metric2_index, <span class="dv">1</span>),</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Population (M)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(population <span class="sc">/</span> <span class="fl">1e6</span>, <span class="dv">2</span>)</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>  table3_high,</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 3a: Top 5 Metros â€” Composite Housing Growth Score (2023)"</span>,</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HTML</span>(<span class="st">"&lt;br&gt;&lt;span style='font-size: 0.85em; font-weight: normal; color: #666;'&gt;</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a><span class="st">         Composite = 60% Instantaneous Index + 40% Growth Accommodation Index&lt;/span&gt;"</span>)</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Composite Score"</span>,</span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">225</span>, <span class="dv">300</span>), </span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">c</span>(<span class="st">"#ffffff"</span>, <span class="st">"#d4edda"</span>, <span class="st">"#c3e6cb"</span>, <span class="st">"#a8d5ba"</span>))</span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-fabe98df6c10cf0e0af7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-fabe98df6c10cf0e0af7">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">\n  Table 3a: Top 5 Metros â€” Composite Housing Growth Score (2023)\n  <br><span style='font-size: 0.85em; font-weight: normal; color: #666;'>\n         Composite = 60% Instantaneous Index + 40% Growth Accommodation Index<\/span>\n<\/caption>","data":[[1,2,3,4,5],["Punta Gorda, FL Metro Area","Urban Honolulu, HI Metro Area","Crestview-Fort Walton Beach-Destin, FL Metro Area","Daphne-Fairhope-Foley, AL Metro Area","Sherman-Denison, TX Metro Area"],["FL","HI","FL","AL","TX"],[291.7,268,250.3,229.6,227.4],[455.6,39.7,389.2,364.9,353.2],[45.9,610.5,41.8,26.7,38.8],[0.21,0.99,0.3,0.25,0.15]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Composite Score<\/th>\n      <th>Metric 1<\/th>\n      <th>Metric 2<\/th>\n      <th>Population (M)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Composite Score","targets":3},{"name":"Metric 1","targets":4},{"name":"Metric 2","targets":5},{"name":"Population (M)","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 150 ? \"#ffffff\" : value <= 225 ? \"#d4edda\" : value <= 300 ? \"#c3e6cb\" : \"#a8d5ba\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 3B: Bottom 5 - Composite Score</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>table3_low <span class="ot">&lt;-</span> metrics_2023 <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(composite_score)) <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(composite_score) <span class="sc">%&gt;%</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Composite Score</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(composite_score, <span class="dv">1</span>),</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metric 1</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(metric1_index, <span class="dv">1</span>),</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metric 2</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(metric2_index), <span class="fu">as.character</span>(<span class="fu">round</span>(metric2_index, <span class="dv">1</span>)), <span class="st">"â€”"</span>),</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Population (M)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(population <span class="sc">/</span> <span class="fl">1e6</span>, <span class="dv">2</span>)</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>  table3_low,</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 3b: Bottom 5 Metros â€” Composite Housing Growth Score (2023)"</span>,</span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HTML</span>(<span class="st">"&lt;br&gt;&lt;span style='font-size: 0.85em; font-weight: normal; color: #666;'&gt;</span></span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a><span class="st">         Composite = 60% Instantaneous Index + 40% Growth Accommodation Index (or Metric 1 only if declining)&lt;/span&gt;"</span>)</span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Composite Score"</span>,</span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">15</span>, <span class="dv">30</span>), </span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">c</span>(<span class="st">"#f5c6cb"</span>, <span class="st">"#f8d7da"</span>, <span class="st">"#fff3cd"</span>, <span class="st">"#ffffff"</span>))</span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f092816add51b4b342de" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f092816add51b4b342de">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">\n  Table 3b: Bottom 5 Metros â€” Composite Housing Growth Score (2023)\n  <br><span style='font-size: 0.85em; font-weight: normal; color: #666;'>\n         Composite = 60% Instantaneous Index + 40% Growth Accommodation Index (or Metric 1 only if declining)<\/span>\n<\/caption>","data":[[1,2,3,4,5],["Wheeling, WV-OH Metro Area","Morgantown, WV Metro Area","Weirton-Steubenville, WV-OH Metro Area","Enid, OK Metro Area","Decatur, IL Metro Area"],["WV","WV","WV","OK","IL"],[1.7,2.1,3,4.3,7.2],[1.7,2.5,3,3.4,7.2],["â€”","1.4","â€”","5.7","â€”"],[0.14,0.14,0.11,0.06,0.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>Composite Score<\/th>\n      <th>Metric 1<\/th>\n      <th>Metric 2<\/th>\n      <th>Population (M)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"Composite Score","targets":3},{"name":"Metric 1","targets":4},{"name":"Metric 2","targets":5},{"name":"Population (M)","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 5 ? \"#f5c6cb\" : value <= 15 ? \"#f8d7da\" : value <= 30 ? \"#fff3cd\" : \"#ffffff\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task5-declining-metros</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code for declining metros analysis"</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Explanatory Table: Declining Metros </span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>declining_explanation <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pop_change_5yr) <span class="sc">%&gt;%</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metro Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">5yr Pop Change</span><span class="st">`</span> <span class="ot">=</span> scales<span class="sc">::</span><span class="fu">comma</span>(pop_change_5yr),</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Growth Rate (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(pop_growth_rate_5yr, <span class="dv">1</span>),</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metric 2 Status</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(metric2_index), <span class="st">"Not Applicable"</span>, <span class="st">"Calculated"</span>),</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metric 1 Index</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(metric1_index, <span class="dv">1</span>)</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>  declining_explanation,</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>, </span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Supplemental Table: Metros with Declining or Minimal Population Growth (2018-2023)"</span>,</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HTML</span>(<span class="st">"&lt;br&gt;&lt;span style='font-size: 0.85em; font-weight: normal; color: #666;'&gt;</span></span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a><span class="st">         Metric 2 (Growth Accommodation Index) is not applicable for metros with declining or negligible growth,</span></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a><span class="st">         as there is no population increase to accommodate. These metros are evaluated solely on Metric 1.&lt;/span&gt;"</span>)</span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>    <span class="st">"5yr Pop Change"</span>,</span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="fu">styleInterval</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">5000</span>, <span class="dv">0</span>, <span class="dv">500</span>), </span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">c</span>(<span class="st">"#f5c6cb"</span>, <span class="st">"#f8d7da"</span>, <span class="st">"#fff3cd"</span>, <span class="st">"#ffffff"</span>))</span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-d03910580b7cb613f7f8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d03910580b7cb613f7f8">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">\n  Supplemental Table: Metros with Declining or Minimal Population Growth (2018-2023)\n  <br><span style='font-size: 0.85em; font-weight: normal; color: #666;'>\n         Metric 2 (Growth Accommodation Index) is not applicable for metros with declining or negligible growth,\n         as there is no population increase to accommodate. These metros are evaluated solely on Metric 1.<\/span>\n<\/caption>","data":[[1,2,3,4,5,6,7,8,9,10],["Los Angeles-Long Beach-Anaheim, CA Metro Area","New Orleans-Metairie, LA Metro Area","Springfield, MA Metro Area","Lafayette, LA Metro Area","Kalamazoo-Portage, MI Metro Area","Hartford-West Hartford-East Hartford, CT Metro Area","Shreveport-Bossier City, LA Metro Area","San Jose-Sunnyvale-Santa Clara, CA Metro Area","Fort Smith, AR-OK Metro Area","Asheville, NC Metro Area"],["CA","LA","MA","LA","MI","CT","LA","CA","AR","NC"],["-554,807","-313,597","-171,361","-77,270","-76,123","-62,752","-57,638","-52,696","-50,806","-38,943"],[-4.2,-24.6,-27.1,-15.7,-22.5,-5.2,-13.1,-2.6,-18,-8.5],["Not Applicable","Not Applicable","Not Applicable","Not Applicable","Not Applicable","Not Applicable","Not Applicable","Not Applicable","Not Applicable","Not Applicable"],[51,67.7,32.6,122.1,58.1,38.9,54.4,67.90000000000001,62.6,199.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro Area<\/th>\n      <th>State<\/th>\n      <th>5yr Pop Change<\/th>\n      <th>Growth Rate (%)<\/th>\n      <th>Metric 2 Status<\/th>\n      <th>Metric 1 Index<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","ordering":false,"columnDefs":[{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro Area","targets":1},{"name":"State","targets":2},{"name":"5yr Pop Change","targets":3},{"name":"Growth Rate (%)","targets":4},{"name":"Metric 2 Status","targets":5},{"name":"Metric 1 Index","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= -5000 ? \"#f5c6cb\" : value <= 0 ? \"#f8d7da\" : value <= 500 ? \"#fff3cd\" : \"#ffffff\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p>Defining rent burden (Task 4) and housing growth (Task 5) metrics, the next section explores identifying the metros that successfully addressed affordability challenges through sustained construction.</p>
<hr>
</section>
</section>
<section id="task-6-rent-burden-and-housing-growth-relationships" class="level2">
<h2 class="anchored" data-anchor-id="task-6-rent-burden-and-housing-growth-relationships">Task 6: Rent Burden and Housing Growth Relationships</h2>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task6-data-prep</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Preparation</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>rent_burden_periods <span class="ot">&lt;-</span> df_rent_burden <span class="sc">%&gt;%</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">period =</span> <span class="fu">case_when</span>(</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>      year <span class="sc">&gt;=</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2016</span> <span class="sc">~</span> <span class="st">"early"</span>,</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>      year <span class="sc">&gt;=</span> <span class="dv">2021</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2023</span> <span class="sc">~</span> <span class="st">"late"</span>,</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"middle"</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(period <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"early"</span>, <span class="st">"late"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GEOID, NAME, state, period) <span class="sc">%&gt;%</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_gap =</span> <span class="fu">mean</span>(affordability_gap_pp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> period, <span class="at">values_from =</span> avg_gap, <span class="at">names_prefix =</span> <span class="st">"gap_"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rent_burden_change =</span> gap_late <span class="sc">-</span> gap_early)</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>housing_2023 <span class="ot">&lt;-</span> housing_data <span class="sc">%&gt;%</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME, state, composite_score, pop_change_5yr, is_growing, population, pop_5yr_ago)</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>combined_analysis <span class="ot">&lt;-</span> rent_burden_periods <span class="sc">%&gt;%</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(housing_2023, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(composite_score), <span class="sc">!</span><span class="fu">is.na</span>(rent_burden_change)) <span class="sc">%&gt;%</span></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_growth_rate =</span> (pop_change_5yr <span class="sc">/</span> pop_5yr_ago) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>early_burden_threshold <span class="ot">&lt;-</span> <span class="fu">quantile</span>(combined_analysis<span class="sc">$</span>gap_early, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>combined_analysis <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span></span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">criterion1 =</span> gap_early <span class="sc">&gt;</span> early_burden_threshold,</span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">criterion2 =</span> rent_burden_change <span class="sc">&lt;</span> <span class="dv">0</span>,</span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">criterion3 =</span> is_growing <span class="sc">&amp;</span> pop_change_5yr <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">criterion4 =</span> composite_score <span class="sc">&gt;</span> <span class="dv">100</span>,</span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">yimby_score =</span> criterion1 <span class="sc">+</span> criterion2 <span class="sc">+</span> criterion3 <span class="sc">+</span> criterion4</span>
<span id="cb36-44"><a href="#cb36-44" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<hr>
<section id="yimby-success-identification" class="level3">
<h3 class="anchored" data-anchor-id="yimby-success-identification"><strong>YIMBY Success Identification</strong></h3>
<p>We classify â€œYIMBY successâ€ as metros who meet <strong>four</strong> special criteria, where aggressive building successfully reduces housing costs despite growing population demands.</p>
<ul>
<li><strong>Criteria 1 (C1)</strong>: High early rent burden (top 25%; threshold = -8.5 percentage points [pp] above 30%),<br>
</li>
<li><strong>Criteria 1 (C2)</strong>: Rent burden improved (2021â€“2023 avg &lt; 2014â€“2016 avg),<br>
</li>
<li><strong>Criteria 1 (C3)</strong>: (positive five-year change, 2018â€“2023), and<br>
</li>
<li><strong>Criteria 1 (C4)</strong>: Above-average housing growth (composite &gt; 100).</li>
</ul>
<p><em>Time Periods</em>: Early = 2014â€“2016; Late = 2021â€“2023.</p>
<hr>
</section>
<section id="key-findings-yimby-success-summary" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-yimby-success-summary"><strong>Key Findings: YIMBY Success Summary</strong></h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task6-summary</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate summary statistics</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>total_metros <span class="ot">&lt;-</span> <span class="fu">nrow</span>(combined_analysis)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>success_4of4 <span class="ot">&lt;-</span> <span class="fu">sum</span>(combined_analysis<span class="sc">$</span>yimby_score <span class="sc">==</span> <span class="dv">4</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>success_3of4 <span class="ot">&lt;-</span> <span class="fu">sum</span>(combined_analysis<span class="sc">$</span>yimby_score <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>avg_change_4of4 <span class="ot">&lt;-</span> <span class="fu">mean</span>(combined_analysis<span class="sc">$</span>rent_burden_change[combined_analysis<span class="sc">$</span>yimby_score <span class="sc">==</span> <span class="dv">4</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>avg_change_3of4 <span class="ot">&lt;-</span> <span class="fu">mean</span>(combined_analysis<span class="sc">$</span>rent_burden_change[combined_analysis<span class="sc">$</span>yimby_score <span class="sc">==</span> <span class="dv">3</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>The analysis of <strong>301 metropolitan areas</strong> reveals compelling evidence for YIMBY policy effectiveness:</p>
<ul>
<li><strong>Complete YIMBY success (4/4):</strong> 12 metros; average rent burden change <strong>1.4 pp</strong> (better).<br>
</li>
<li><strong>Strong performance (3/4):</strong> 49 metros; average rent burden change <strong>-0.7 pp</strong>.</li>
</ul>
<p>These metros demonstrate that sustained, above-average housing construction can successfully reduce rent burden even in rapidly growing markets.</p>
<hr>
</section>
<section id="complete-yimby-success-metros-meeting-all-4-criteria" class="level3">
<h3 class="anchored" data-anchor-id="complete-yimby-success-metros-meeting-all-4-criteria"><strong>Complete YIMBY Success: Metros Meeting All 4 Criteria</strong></h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task6-table-4of4</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>yimby_4of4 <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yimby_score <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(composite_score)) <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metro =</span> <span class="fu">str_remove</span>(NAME, <span class="st">" Metro Area"</span>),</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Early Burden</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(gap_early, <span class="dv">1</span>),</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Burden Change</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(rent_burden_change, <span class="dv">1</span>),</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Pop Growth (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(pop_growth_rate, <span class="dv">1</span>),</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Housing</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(composite_score, <span class="dv">1</span>)</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  yimby_4of4,</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'ltp'</span>, </span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">TRUE</span>,</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>),</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">width =</span> <span class="st">'200px'</span>, <span class="at">targets =</span> <span class="dv">1</span>),</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">width =</span> <span class="st">'50px'</span>, <span class="at">targets =</span> <span class="dv">2</span>),</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">width =</span> <span class="st">'90px'</span>, <span class="at">targets =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 1: Complete YIMBY Success (4/4 Criteria)"</span>,</span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HTML</span>(<span class="st">"&lt;br&gt;&lt;span style='font-size: 0.85em; font-weight: normal; color: #666;'&gt;</span></span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a><span class="st">         Metros meeting all four criteria: high early burden, improved, growing, and high housing growth&lt;/span&gt;"</span>)</span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>),</span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="st">"#e8f5e9"</span></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Burden Change"</span>,</span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"darkgreen"</span>,</span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontWeight =</span> <span class="st">"bold"</span></span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-6234c942872dfb3f9801" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6234c942872dfb3f9801">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">\n  Table 1: Complete YIMBY Success (4/4 Criteria)\n  <br><span style='font-size: 0.85em; font-weight: normal; color: #666;'>\n         Metros meeting all four criteria: high early burden, improved, growing, and high housing growth<\/span>\n<\/caption>","data":[[1,2,3,4,5,6,7,8,9,10,11,12],["Punta Gorda, FL","Urban Honolulu, HI","Burlington, NC","Port St. Lucie, FL","Deltona-Daytona Beach-Ormond Beach, FL","Fayetteville, NC","Brownsville-Harlingen, TX","Medford, OR","Tallahassee, FL","Clarksville, TN-KY","McAllen-Edinburg-Mission, TX","Hinesville, GA"],["FL","HI","NC","FL","FL","NC","TX","OR","FL","TN","TX","GA"],[-5.3,-4.9,-8.199999999999999,-3.9,-3.7,-5.8,-7,-6.4,-6.3,-8.4,-6.9,-2.2],[-0.3,-1,-2.8,-0.1,-0.7,-1.5,-2.5,-1.4,-0.8,-0.1,-1.6,-3.8],[13.2,0.1,10.3,13.4,11.2,1.5,0.7,1.5,2.1,17.9,4.4,9.5],[291.7,268,210.1,155.1,134.6,128.9,123.6,121.8,120.9,116.7,115.9,111.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro<\/th>\n      <th>State<\/th>\n      <th>Early Burden<\/th>\n      <th>Burden Change<\/th>\n      <th>Pop Growth (%)<\/th>\n      <th>Housing<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"ltp","ordering":true,"columnDefs":[{"className":"dt-left","targets":"_all"},{"width":"200px","targets":1},{"width":"50px","targets":2},{"width":"90px","targets":[3,4,5,6]},{"name":"Rank","targets":0},{"name":"Metro","targets":1},{"name":"State","targets":2},{"name":"Early Burden","targets":3},{"name":"Burden Change","targets":4},{"name":"Pop Growth (%)","targets":5},{"name":"Housing","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[0]; $(this.api().cell(row, 0).node()).css({'background-color':'#e8f5e9'});\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'background-color':'#e8f5e9'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'background-color':'#e8f5e9'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':'#e8f5e9'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'background-color':'#e8f5e9'});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'background-color':'#e8f5e9'});\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'background-color':'#e8f5e9'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'font-weight':'bold','color':'darkgreen'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
</section>
<section id="strong-performance-metros-meeting-3-of-4-criteria" class="level3">
<h3 class="anchored" data-anchor-id="strong-performance-metros-meeting-3-of-4-criteria"><strong>Strong Performance: Metros Meeting 3 of 4 Criteria</strong></h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task6-table-3of4</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>yimby_3of4 <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yimby_score <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(composite_score)) <span class="sc">%&gt;%</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_criterion =</span> <span class="fu">case_when</span>(</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>criterion1 <span class="sc">~</span> <span class="st">"C1"</span>,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>criterion2 <span class="sc">~</span> <span class="st">"C2"</span>,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>criterion3 <span class="sc">~</span> <span class="st">"C3"</span>,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>criterion4 <span class="sc">~</span> <span class="st">"C4"</span>,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"â€”"</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metro =</span> <span class="fu">str_remove</span>(NAME, <span class="st">" Metro Area"</span>),</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">Missing =</span> missing_criterion,</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Early</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(gap_early, <span class="dv">1</span>),</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Burden Change</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(rent_burden_change, <span class="dv">1</span>),</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Pop Growth (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(pop_growth_rate, <span class="dv">1</span>),</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Housing</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(composite_score, <span class="dv">1</span>)</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>  yimby_3of4,</span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'ltp'</span>, </span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">TRUE</span>,</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>),</span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">width =</span> <span class="st">'180px'</span>, <span class="at">targets =</span> <span class="dv">1</span>),</span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">width =</span> <span class="st">'50px'</span>, <span class="at">targets =</span> <span class="dv">2</span>),</span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">width =</span> <span class="st">'60px'</span>, <span class="at">targets =</span> <span class="dv">3</span>),</span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, <span class="at">targets =</span> <span class="dv">3</span>),</span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">width =</span> <span class="st">'80px'</span>, <span class="at">targets =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>)</span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb39-46"><a href="#cb39-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 2: Strong Performance (3/4 Criteria)"</span>,</span>
<span id="cb39-47"><a href="#cb39-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HTML</span>(<span class="st">"&lt;br&gt;&lt;span style='font-size: 0.85em; font-weight: normal; color: #666;'&gt;</span></span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a><span class="st">         Missing: C1 = High early burden | C2 = Improved | C3 = Growing | C4 = High housing&lt;/span&gt;"</span>)</span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>),</span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="st">"#f1f8e9"</span></span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb39-56"><a href="#cb39-56" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Burden Change"</span>,</span>
<span id="cb39-57"><a href="#cb39-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">styleInterval</span>(<span class="dv">0</span>, <span class="fu">c</span>(<span class="st">"darkgreen"</span>, <span class="st">"darkred"</span>))</span>
<span id="cb39-58"><a href="#cb39-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-59"><a href="#cb39-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(</span>
<span id="cb39-60"><a href="#cb39-60" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Missing"</span>,</span>
<span id="cb39-61"><a href="#cb39-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">backgroundColor =</span> <span class="st">"#fff3cd"</span></span>
<span id="cb39-62"><a href="#cb39-62" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-eacf6ac8e4c0f038b5d7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-eacf6ac8e4c0f038b5d7">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">\n  Table 2: Strong Performance (3/4 Criteria)\n  <br><span style='font-size: 0.85em; font-weight: normal; color: #666;'>\n         Missing: C1 = High early burden | C2 = Improved | C3 = Growing | C4 = High housing<\/span>\n<\/caption>","data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49],["Crestview-Fort Walton Beach-Destin, FL","Daphne-Fairhope-Foley, AL","Cape Coral-Fort Myers, FL","Dalton, GA","Lakeland-Winter Haven, FL","Homosassa Springs, FL","Ocala, FL","Jacksonville, FL","Hickory-Lenoir-Morganton, NC","Palm Bay-Melbourne-Titusville, FL","Lake Havasu City-Kingman, AZ","Charleston-North Charleston, SC","Warner Robins, GA","Hammond, LA","Eau Claire, WI","Flagstaff, AZ","Wichita, KS","Charlottesville, VA","Orlando-Kissimmee-Sanford, FL","Anchorage, AK","Laredo, TX","Jonesboro, AR","Grand Junction, CO","Fargo, ND-MN","Winston-Salem, NC","Savannah, GA","Wilmington, NC","Bowling Green, KY","Tampa-St. Petersburg-Clearwater, FL","Iowa City, IA","Valdosta, GA","Jacksonville, NC","Auburn-Opelika, AL","Dover, DE","Pensacola-Ferry Pass-Brent, FL","Riverside-San Bernardino-Ontario, CA","Yuma, AZ","Athens-Clarke County, GA","Redding, CA","Las Cruces, NM","Macon-Bibb County, GA","Grants Pass, OR","Modesto, CA","Stockton-Lodi, CA","Fresno, CA","Pueblo, CO","Jackson, TN","Columbus, GA-AL","Atlantic City-Hammonton, NJ"],["FL","AL","FL","GA","FL","FL","FL","FL","NC","FL","AZ","SC","GA","LA","WI","AZ","KS","VA","FL","AK","TX","AR","CO","ND","NC","GA","NC","KY","FL","IA","GA","NC","AL","DE","FL","CA","AZ","GA","CA","NM","GA","OR","CA","CA","CA","CO","TN","GA","NJ"],["C2","C1","C2","C1","C2","C2","C2","C2","C1","C2","C2","C2","C1","C1","C1","C2","C1","C3","C2","C1","C3","C1","C1","C1","C1","C2","C2","C1","C2","C1","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4","C4"],[-7.9,-9.199999999999999,-6.2,-11.6,-6.1,-5.9,-5.6,-7.9,-11.4,-7,-7.2,-8,-11,-8.9,-11.8,-6.9,-12.9,-8.5,-4.5,-11.2,-5.6,-9.800000000000001,-8.9,-14.1,-11.1,-7.9,-8.300000000000001,-11.7,-5.8,-11.6,-6.9,-6.1,-8.300000000000001,-8.199999999999999,-8.1,-4.7,-7.2,-6.8,-5.4,-7.2,-7.7,-4.4,-7,-6.9,-6.5,-7.9,-8,-6.9,-7.4],[1.7,-0.6,3.4,-1.5,0.1,0.7,0.7,0.7,-2.3,0.2,0.3,0.3,-1.6,-1,-2,2,-0.4,-1.1,1.5,-0.8,-4.6,-1.5,-1,-0.5,-0.7,0.3,0.1,-0.2,2,-1.1,-0.4,-2.3,-1.5,-0.6,-0.5,-0.6,-3.1,-1.8,-3.5,-3,-1.4,-2.1,-0.3,-0.4,-0.7,-1.8,-1.9,-1.6,-2],[12.3,19.2,12.9,0.2,19.2,14.5,15.7,13.8,1,9.300000000000001,8,9.5,4.2,4.2,4.4,2.6,1,-3.1,12.3,0.1,-2.1,3.9,5.3,8.800000000000001,4.2,9.6,62.2,7.7,8.1,5,4.1,10.2,25.4,7.3,8.699999999999999,2.3,2.7,6.2,0.2,4.5,1.6,1.7,0.6,11.9,19.3,1.8,40.7,7.6,37],[250.3,229.6,220.9,219.5,204,178.5,170.6,160.7,149.8,141.1,141,140,139.9,133.6,129.5,129.3,124.1,123.4,123,121.8,121.5,115.8,114.7,111,111,110.5,110.1,106.9,106.7,104.2,96.40000000000001,91.7,91.5,82.59999999999999,74.40000000000001,73.90000000000001,67.40000000000001,67.3,61.4,57.6,46,44.5,41.6,37,35.7,32.4,31.2,27.5,13.6]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro<\/th>\n      <th>State<\/th>\n      <th>Missing<\/th>\n      <th>Early<\/th>\n      <th>Burden Change<\/th>\n      <th>Pop Growth (%)<\/th>\n      <th>Housing<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"ltp","ordering":true,"columnDefs":[{"className":"dt-left","targets":"_all"},{"width":"180px","targets":1},{"width":"50px","targets":2},{"width":"60px","targets":3},{"className":"dt-center","targets":3},{"width":"80px","targets":[4,5,6,7]},{"name":"Rank","targets":0},{"name":"Metro","targets":1},{"name":"State","targets":2},{"name":"Missing","targets":3},{"name":"Early","targets":4},{"name":"Burden Change","targets":5},{"name":"Pop Growth (%)","targets":6},{"name":"Housing","targets":7}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[0]; $(this.api().cell(row, 0).node()).css({'background-color':'#f1f8e9'});\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'background-color':'#f1f8e9'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'background-color':'#f1f8e9'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':'#f1f8e9'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'background-color':'#f1f8e9'});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'background-color':'#f1f8e9'});\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'background-color':'#f1f8e9'});\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'background-color':'#f1f8e9'});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'color':isNaN(parseFloat(value)) ? '' : value <= 0 ? \"darkgreen\" : \"darkred\"});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':'#fff3cd'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
</section>
<section id="visualization-1-the-core-relationship" class="level3">
<h3 class="anchored" data-anchor-id="visualization-1-the-core-relationship"><strong>Visualization 1: The Core Relationship</strong></h3>
<p>This interactive scatterplot reveals the relationship between housing construction intensity and rent burden outcomes among YIMBY success candidates (3/4 and 4/4 metros only). <strong>Hover over bubbles to see metro details</strong>.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task6-plot1</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.width: 12</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.height: 9</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Background layer: ALL metros (for context)</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>background_data <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">metro_clean =</span> <span class="fu">str_remove</span>(NAME, <span class="st">" Metro Area"</span>),</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">yimby_category =</span> <span class="st">"0-2/4 (Other)"</span>,</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">hover_text =</span> <span class="fu">paste0</span>(</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;b&gt;"</span>, metro_clean, <span class="st">"&lt;/b&gt;&lt;br&gt;"</span>,</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"YIMBY Score: "</span>, yimby_score, <span class="st">"/4&lt;br&gt;"</span>,</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Housing Score: "</span>, <span class="fu">round</span>(composite_score, <span class="dv">1</span>), <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Burden Change: "</span>, <span class="fu">round</span>(rent_burden_change, <span class="dv">1</span>), <span class="st">" pp"</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Foreground layer: Only 3/4 and 4/4 metros (success stories)</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>plot_data <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yimby_score <span class="sc">&gt;=</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">metro_clean =</span> <span class="fu">str_remove</span>(NAME, <span class="st">" Metro Area"</span>),</span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_label =</span> <span class="fu">paste0</span>(yimby_score, <span class="st">"/4"</span>),</span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">yimby_category =</span> <span class="fu">if_else</span>(yimby_score <span class="sc">==</span> <span class="dv">4</span>, <span class="st">"4/4 (Complete)"</span>, <span class="st">"3/4 (Strong)"</span>),</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">hover_text =</span> <span class="fu">paste0</span>(</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;b&gt;"</span>, metro_clean, <span class="st">"&lt;/b&gt;&lt;br&gt;"</span>,</span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>      <span class="st">"YIMBY Score: "</span>, yimby_score, <span class="st">"/4&lt;br&gt;"</span>,</span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Population Growth: "</span>, <span class="fu">comma</span>(<span class="fu">abs</span>(pop_change_5yr)), <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Housing Score: "</span>, <span class="fu">round</span>(composite_score, <span class="dv">1</span>), <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Burden Change: "</span>, <span class="fu">round</span>(rent_burden_change, <span class="dv">1</span>), <span class="st">" pp"</span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Create ggplot with TWO layers</span></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># LAYER 1: Background - all metros in light gray</span></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> background_data,</span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> composite_score, </span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> rent_burden_change,</span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> yimby_category,</span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> hover_text),</span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.4</span></span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reference lines</span></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"gray30"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">100</span>, <span class="at">color =</span> <span class="st">"gray30"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-54"><a href="#cb40-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Shaded success quadrant (LOWER-RIGHT = Q4)</span></span>
<span id="cb40-55"><a href="#cb40-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="dv">100</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="dv">0</span>,</span>
<span id="cb40-56"><a href="#cb40-56" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.08</span>, <span class="at">fill =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb40-57"><a href="#cb40-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-58"><a href="#cb40-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Quadrant labels</span></span>
<span id="cb40-59"><a href="#cb40-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">220</span>, <span class="at">y =</span> <span class="dv">7</span>, </span>
<span id="cb40-60"><a href="#cb40-60" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Q1: Growing Pains"</span>, </span>
<span id="cb40-61"><a href="#cb40-61" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">"gray40"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb40-62"><a href="#cb40-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">30</span>, <span class="at">y =</span> <span class="dv">7</span>, </span>
<span id="cb40-63"><a href="#cb40-63" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Q2: Worst"</span>, </span>
<span id="cb40-64"><a href="#cb40-64" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">"gray40"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb40-65"><a href="#cb40-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">30</span>, <span class="at">y =</span> <span class="sc">-</span><span class="dv">7</span>, </span>
<span id="cb40-66"><a href="#cb40-66" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Q3: Lucky"</span>, </span>
<span id="cb40-67"><a href="#cb40-67" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">"gray40"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb40-68"><a href="#cb40-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">220</span>, <span class="at">y =</span> <span class="sc">-</span><span class="dv">7</span>, </span>
<span id="cb40-69"><a href="#cb40-69" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Q4: YIMBY SUCCESS"</span>, </span>
<span id="cb40-70"><a href="#cb40-70" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb40-71"><a href="#cb40-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-72"><a href="#cb40-72" aria-hidden="true" tabindex="-1"></a>  <span class="co"># LAYER 2: Foreground - success stories (3/4 and 4/4) in color</span></span>
<span id="cb40-73"><a href="#cb40-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb40-74"><a href="#cb40-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> plot_data,</span>
<span id="cb40-75"><a href="#cb40-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> composite_score, </span>
<span id="cb40-76"><a href="#cb40-76" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> rent_burden_change,</span>
<span id="cb40-77"><a href="#cb40-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> yimby_category,</span>
<span id="cb40-78"><a href="#cb40-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="fu">abs</span>(pop_change_5yr),</span>
<span id="cb40-79"><a href="#cb40-79" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> hover_text),</span>
<span id="cb40-80"><a href="#cb40-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span></span>
<span id="cb40-81"><a href="#cb40-81" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-82"><a href="#cb40-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-83"><a href="#cb40-83" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Color scale - now includes all three categories</span></span>
<span id="cb40-84"><a href="#cb40-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb40-85"><a href="#cb40-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb40-86"><a href="#cb40-86" aria-hidden="true" tabindex="-1"></a>      <span class="st">"0-2/4 (Other)"</span> <span class="ot">=</span> <span class="st">"gray85"</span>,</span>
<span id="cb40-87"><a href="#cb40-87" aria-hidden="true" tabindex="-1"></a>      <span class="st">"3/4 (Strong)"</span> <span class="ot">=</span> <span class="st">"#a1d99b"</span>,</span>
<span id="cb40-88"><a href="#cb40-88" aria-hidden="true" tabindex="-1"></a>      <span class="st">"4/4 (Complete)"</span> <span class="ot">=</span> <span class="st">"#006d2c"</span></span>
<span id="cb40-89"><a href="#cb40-89" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb40-90"><a href="#cb40-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"YIMBY Score"</span>,</span>
<span id="cb40-91"><a href="#cb40-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">"4/4 (Complete)"</span>, <span class="st">"3/4 (Strong)"</span>, <span class="st">"0-2/4 (Other)"</span>)</span>
<span id="cb40-92"><a href="#cb40-92" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-93"><a href="#cb40-93" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-94"><a href="#cb40-94" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Size scale (controls visual size, not in legend)</span></span>
<span id="cb40-95"><a href="#cb40-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(</span>
<span id="cb40-96"><a href="#cb40-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">16</span>),</span>
<span id="cb40-97"><a href="#cb40-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">guide =</span> <span class="st">"none"</span></span>
<span id="cb40-98"><a href="#cb40-98" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-99"><a href="#cb40-99" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-100"><a href="#cb40-100" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Scales</span></span>
<span id="cb40-101"><a href="#cb40-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb40-102"><a href="#cb40-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">310</span>, <span class="dv">50</span>),</span>
<span id="cb40-103"><a href="#cb40-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">310</span>),</span>
<span id="cb40-104"><a href="#cb40-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.02</span>))</span>
<span id="cb40-105"><a href="#cb40-105" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-106"><a href="#cb40-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb40-107"><a href="#cb40-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="fl">2.5</span>),</span>
<span id="cb40-108"><a href="#cb40-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>),</span>
<span id="cb40-109"><a href="#cb40-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.02</span>))</span>
<span id="cb40-110"><a href="#cb40-110" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-111"><a href="#cb40-111" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-112"><a href="#cb40-112" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Labels</span></span>
<span id="cb40-113"><a href="#cb40-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb40-114"><a href="#cb40-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Housing Growth vs. Rent Burden Outcomes"</span>,</span>
<span id="cb40-115"><a href="#cb40-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Housing Growth Composite Score (100 = National Average)"</span>,</span>
<span id="cb40-116"><a href="#cb40-116" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Change in Rent Burden (pp), 2023 vs 2014-2016</span><span class="sc">\n</span><span class="st">Negative = Improvement"</span></span>
<span id="cb40-117"><a href="#cb40-117" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-118"><a href="#cb40-118" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-119"><a href="#cb40-119" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Theme</span></span>
<span id="cb40-120"><a href="#cb40-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb40-121"><a href="#cb40-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb40-122"><a href="#cb40-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">16</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb40-123"><a href="#cb40-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb40-124"><a href="#cb40-124" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb40-125"><a href="#cb40-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb40-126"><a href="#cb40-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb40-127"><a href="#cb40-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb40-128"><a href="#cb40-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb40-129"><a href="#cb40-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb40-130"><a href="#cb40-130" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-131"><a href="#cb40-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-132"><a href="#cb40-132" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to plotly - it will handle both layers automatically</span></span>
<span id="cb40-133"><a href="#cb40-133" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-134"><a href="#cb40-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb40-135"><a href="#cb40-135" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">list</span>(</span>
<span id="cb40-136"><a href="#cb40-136" aria-hidden="true" tabindex="-1"></a>      <span class="at">text =</span> <span class="st">"Housing Growth vs. Rent Burden Outcomes"</span>,</span>
<span id="cb40-137"><a href="#cb40-137" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fl">0.5</span>,</span>
<span id="cb40-138"><a href="#cb40-138" aria-hidden="true" tabindex="-1"></a>      <span class="at">xanchor =</span> <span class="st">"center"</span>,</span>
<span id="cb40-139"><a href="#cb40-139" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">17</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb40-140"><a href="#cb40-140" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb40-141"><a href="#cb40-141" aria-hidden="true" tabindex="-1"></a>    <span class="at">margin =</span> <span class="fu">list</span>(<span class="at">t =</span> <span class="dv">90</span>, <span class="at">r =</span> <span class="dv">180</span>, <span class="at">b =</span> <span class="dv">80</span>, <span class="at">l =</span> <span class="dv">90</span>),</span>
<span id="cb40-142"><a href="#cb40-142" aria-hidden="true" tabindex="-1"></a>    <span class="at">showlegend =</span> <span class="cn">TRUE</span>,</span>
<span id="cb40-143"><a href="#cb40-143" aria-hidden="true" tabindex="-1"></a>    <span class="at">hoverlabel =</span> <span class="fu">list</span>(</span>
<span id="cb40-144"><a href="#cb40-144" aria-hidden="true" tabindex="-1"></a>      <span class="at">bgcolor =</span> <span class="st">"white"</span>,</span>
<span id="cb40-145"><a href="#cb40-145" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">13</span>, <span class="at">color =</span> <span class="st">"black"</span>),</span>
<span id="cb40-146"><a href="#cb40-146" aria-hidden="true" tabindex="-1"></a>      <span class="at">bordercolor =</span> <span class="st">"gray"</span>,</span>
<span id="cb40-147"><a href="#cb40-147" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"left"</span></span>
<span id="cb40-148"><a href="#cb40-148" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb40-149"><a href="#cb40-149" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(</span>
<span id="cb40-150"><a href="#cb40-150" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">list</span>(</span>
<span id="cb40-151"><a href="#cb40-151" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="st">"Housing Growth Composite Score (100 = National Average)"</span>,</span>
<span id="cb40-152"><a href="#cb40-152" aria-hidden="true" tabindex="-1"></a>        <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">11</span>)</span>
<span id="cb40-153"><a href="#cb40-153" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb40-154"><a href="#cb40-154" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickfont =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb40-155"><a href="#cb40-155" aria-hidden="true" tabindex="-1"></a>      <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">310</span>)</span>
<span id="cb40-156"><a href="#cb40-156" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb40-157"><a href="#cb40-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(</span>
<span id="cb40-158"><a href="#cb40-158" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">list</span>(</span>
<span id="cb40-159"><a href="#cb40-159" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="st">"Change in Rent Burden (pp), 2023 vs 2014-2016&lt;br&gt;Negative = Improvement"</span>,</span>
<span id="cb40-160"><a href="#cb40-160" aria-hidden="true" tabindex="-1"></a>        <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">11</span>)</span>
<span id="cb40-161"><a href="#cb40-161" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb40-162"><a href="#cb40-162" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickfont =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">10</span>)</span>
<span id="cb40-163"><a href="#cb40-163" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb40-164"><a href="#cb40-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend =</span> <span class="fu">list</span>(</span>
<span id="cb40-165"><a href="#cb40-165" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fl">1.02</span>,</span>
<span id="cb40-166"><a href="#cb40-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="fl">0.98</span>,</span>
<span id="cb40-167"><a href="#cb40-167" aria-hidden="true" tabindex="-1"></a>      <span class="at">xanchor =</span> <span class="st">"left"</span>,</span>
<span id="cb40-168"><a href="#cb40-168" aria-hidden="true" tabindex="-1"></a>      <span class="at">yanchor =</span> <span class="st">"top"</span>,</span>
<span id="cb40-169"><a href="#cb40-169" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb40-170"><a href="#cb40-170" aria-hidden="true" tabindex="-1"></a>      <span class="at">bgcolor =</span> <span class="st">"rgba(255,255,255,0.9)"</span>,</span>
<span id="cb40-171"><a href="#cb40-171" aria-hidden="true" tabindex="-1"></a>      <span class="at">bordercolor =</span> <span class="st">"lightgray"</span>,</span>
<span id="cb40-172"><a href="#cb40-172" aria-hidden="true" tabindex="-1"></a>      <span class="at">borderwidth =</span> <span class="dv">1</span></span>
<span id="cb40-173"><a href="#cb40-173" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb40-174"><a href="#cb40-174" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb40-175"><a href="#cb40-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">config</span>(</span>
<span id="cb40-176"><a href="#cb40-176" aria-hidden="true" tabindex="-1"></a>    <span class="at">displayModeBar =</span> <span class="cn">TRUE</span>,</span>
<span id="cb40-177"><a href="#cb40-177" aria-hidden="true" tabindex="-1"></a>    <span class="at">modeBarButtonsToRemove =</span> <span class="fu">c</span>(<span class="st">"select2d"</span>, <span class="st">"lasso2d"</span>, <span class="st">"toggleSpikelines"</span>),</span>
<span id="cb40-178"><a href="#cb40-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">displaylogo =</span> <span class="cn">FALSE</span></span>
<span id="cb40-179"><a href="#cb40-179" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-180"><a href="#cb40-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-181"><a href="#cb40-181" aria-hidden="true" tabindex="-1"></a>fig</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-9d23fccf97e7fbf332e3" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9d23fccf97e7fbf332e3">{"x":{"data":[{"x":[37.020450174746117,28.536821396791566,26.383435869915257,39.577538171985111,37.127003321796799,66.274806686477845,34.485343892918877,30.523053547970846,19.391226173986173,41.601388748393006,27.578061338494834,121.76350863818482,92.630816369318438,46.176927547338302,199.51917672579776,67.295855815140683,83.517294647228525,13.557945975140937,91.47770567165017,84.974325042841912,62.677190302893734,45.132610063508643,33.018629457525364,56.080310818875603,20.82604970032725,7.860324251326464,63.315085958632757,17.315210968009456,57.540187301690665,24.995130684210746,39.097500863028657,38.51902522386014,57.315888732482179,26.745154858126082,75.913209585781487,160.74851929093182,41.080475929484237,101.94759681018721,106.91517888590417,123.58773719087324,210.11431875583048,79.566701506909155,27.17453824869261,220.85002025042962,17.10081005815606,60.399050172545756,90.021115301686365,49.729443755756719,54.469626759488051,19.29757219474169,140.04405580896824,143.93031980402094,123.38692250512904,77.948726324487552,46.956068478472822,95.074792420375616,41.702053868875097,116.72285599003841,95.042357737412715,147.94053325538474,72.823099192497224,99.053418038050395,41.956666641700096,98.272729196188052,27.466363188953501,31.571474027778937,78.015254994770658,87.985755698971118,58.571566763093969,250.26264658761079,116.56584473325272,219.4857831761812,229.61403259543835,34.270090253913779,30.294718246006354,7.1663913680340574,134.57253876627914,91.764781304777429,42.70944863715453,46.420993477209066,82.589684956369368,35.649147657858641,67.884618964860707,168.03262428866967,129.50575191253927,31.1419049748541,38.530676518299195,20.596041103796022,40.42485622317605,4.3135074391812349,17.74964645984328,111.01528740147486,20.556505312013044,128.92568503417715,129.2686604932635,20.065730788374296,78.274880206781148,18.948265617510323,25.776742170104487,62.612833160163269,78.173884794536391,35.655330492351204,34.871976701047707,73.653382293624361,84.585027349371316,47.940875814060718,40.231539610398052,96.108879254015207,43.726194527476267,110.61433825612399,114.71461762663064,44.502068393655222,27.277538265163582,134.9837349993627,46.455014285630732,68.72169097687626,166.35436263274246,77.773181951071564,133.55578918283209,91.181576602892562,44.583988701745668,73.535990177228712,38.922932566831832,15.612243543785508,149.83718005386399,111.13339400421951,178.50573261160744,18.169071009667906,12.752737145419918,151.58956446150643,145.34713939371989,104.15558968318733,70.224910796494953,32.138707218444466,28.964436015367998,31.189707696904744,160.68648352641418,91.653744484647362,40.134401388371089,22.941154412917065,73.954921159937385,7.6262202642867569,115.84461547902015,58.056071230857263,17.211519498485433,51.146782080160392,91.94519688249936,96.947186557829113,35.797750550513634,95.242494311930898,30.341979110483862,36.688222667481128,122.10932088214609,143.3463074324122,58.182275559059754,141.04751967743124,204.01085575445603,54.188226230142739,42.522943219153305,121.47137492964195,57.574718310290351,39.219998361649765,25.605903790117473,28.598840603283282,32.064682053430005,44.47738031558405,92.75839174272113,16.190014299536752,96.881738324129614,54.377155321831545,89.67021962785546,16.255978047693798,50.966692383916659,72.219995635574605,94.691772637028492,72.350261450649,46.026131244301205,111.58465405230936,48.965783968279837,25.35260999265229,16.376553978530602,115.92838743098726,121.82989012222897,64.421813578614405,19.802121708722328,52.278009641569241,40.428388185572608,48.455098423973539,63.436745327190025,80.582315461931913,74.26720286459711,47.2315824757966,41.626118836114671,24.808766325425164,25.950006497794512,35.146473424741316,2.0719150269432105,99.248108752175341,55.427550484904501,15.478669296128933,52.680796805836231,154.2001676758947,67.694344477453853,170.6126553860986,62.677378632262787,65.131999949628678,122.98270593733771,64.703009101213453,55.527837498798114,29.723293979397535,141.05858465105996,23.227852739046519,74.420308310227455,12.299986980543762,32.489166352167921,40.092294102127944,43.258050726043599,55.753734602504238,77.975999407909342,77.1899893843852,155.07870208696275,18.038524837690577,32.378752178133801,291.70728970437403,144.19037949246876,12.697694118914105,61.411928664826362,100.54498742034271,114.49672611943197,73.872935015644146,81.733567664887801,76.069036448570273,34.722769205051691,12.691210697083818,89.543790640336042,54.631744122904493,21.452621544156589,56.899543023189011,184.86320881147955,17.331101328366429,53.902254218815195,74.291916128980617,30.371611188416363,60.848862730434249,84.722434420987966,67.852954496979365,43.774858147757655,88.384123456296749,22.631327515150996,110.48759794139363,63.854837440972346,91.759499265246788,83.75530423272005,227.41609881248951,54.375228421219191,82.672212304030921,53.784616196185787,32.319799714257641,101.00461309737585,93.553261583689107,25.428859700510912,32.612305723230776,63.81745349703332,33.864281547982074,46.221702225534315,37.00692759248777,96.276446658498614,20.878908282781801,120.85784049120468,106.6951750533153,19.220940178363868,35.780498025090061,47.305104909290563,32.215516465987065,75.888626262325417,70.378894155002314,34.999137064393793,43.372532365961568,267.99448482251876,18.614028004975168,96.448906673625416,19.085406746500325,77.929106468440253,94.701831536830767,139.92388734571756,74.180915824120319,60.645410910316279,53.83345934305845,72.439682648978362,2.9729816717455235,1.7209951117747875,124.06301377657776,38.743023692670306,10.721096249613602,110.14354933255468,96.753659211017634,110.97896933166521,42.296805554637359,38.238169509420068,48.275920290009246,67.436229456993004],"y":[0.79801452233883818,-1.1086369712777522,-0.46318775318557748,1.6390798177275911,0.2019452259801362,-0.33003910197331976,-0.46687504666250845,0.4395091511882967,-1.2034784966073602,0.53532357807597464,-4.0117084429335552,-0.78839227689513791,1.3330325638836182,0.25737505428970131,0.84060561208505824,-1.8365940887291723,3.0378466764523733,-1.9611863192034553,-1.5012394514858407,-0.46233272998762054,0.064806341744837681,-0.69702327695843458,-0.20265303224224596,1.3247054384881007,-0.80993008705875269,-0.19288086560975515,-0.35534716635314645,0.26348964818033949,2.2421774867263577,-1.5712426626082507,-0.12439382206751226,-0.28186542748006893,1.4705690301025474,0.070575653506141478,-1.0087307642952519,1.8593643282047765,1.350047572744554,2.2105446411247458,-0.22948046341708839,-2.4509419740271667,-2.8366873062863096,-0.23769251786049139,-0.78354664736481006,3.4186714728055732,-2.2080706029982977,-0.90181906689066338,-0.65929300046335904,0.36155304818768386,-0.95134228386090847,-1.0355745120780853,0.25293636219218207,1.594343477163747,-1.1421322296165606,0.29035279050534513,0.31165250271047817,-0.53216868710263476,0.068967751626347606,-0.10671068227923541,-1.8753534176713398,1.7591821582800149,0.042046272406802032,2.5399074432516455,-0.25574572642353921,0.35705817745671276,-1.6438755801310725,-0.98054605118573512,0.94257318755848729,1.6494606969974015,1.3301987037822212,1.7479605848400217,2.2736816415058012,-1.4682080742114465,-0.56369664075639392,-0.11698617168212166,-1.1956714774759547,0.87975758403895199,-0.7137783402955411,0.28419633371519559,-0.24034492293364274,-1.7532479748357552,-0.60801631098490461,-0.42632949805743792,-0.25200210768969455,0.11193671485691148,-2.009792967508508,-1.4836106047178141,1.598163798841064,1.7222960252733479,0.49724908679829394,-1.4975193902160733,-0.55210226658455674,-0.46634096404510927,1.9249305033169257,-1.4637812618948915,1.955587039698047,-1.0349282183315989,-0.16567280455286415,-1.1874877428120438,0.2121416482803653,-1.4511901728299144,0.81870700186927792,-0.70151668304908821,-0.63234343284022287,2.3269707437096843,0.50660182597258974,-1.1655634972585052,-1.6262395455522896,-1.8486821267087246,-2.0385142846096755,0.10877512977460135,-0.99703691901079061,-2.0611708596674241,-1.587214309625816,1.8786463957363342,-0.090771202205303325,-0.27450248504245067,0.037001363929780595,-0.85257195439071154,-1.034960202808243,0.70294253443118659,0.011024190857392924,-1.2392583496985914,0.83949267100077485,-0.74684985311561292,-2.3237966007109687,-3.7812031671584929,0.72191410984148963,-0.53677811194896563,-1.304674254789159,0.56012565824477889,0.65092911151258726,-1.0583482034409339,0.85131300958412215,0.61147866281433139,0.14503715951083507,-1.9244894533738641,0.68378763222187278,-2.2892057061953528,-0.59131144843141215,-0.20843126597717188,-1.6074233841786896,-0.46934685436713508,-1.5338394556321937,0.76594682352416754,-0.4246583579495784,0.76708581731802639,0.41584368031075059,0.62207464168521298,-0.042151449418906139,-0.041954623155209703,1.4682513160715729,-0.36626242529231945,0.51390858084672786,2.070252143428581,-0.3918119495846959,0.25746459748019213,0.095350424819837798,-0.16510844138716863,-0.74036253911931382,-4.6294719590106954,-3.0176307113625747,-0.76794115438718258,0.88755846809188554,-0.43011093347412377,0.29823196029317955,0.41633431058030013,0.670461474265025,1.0981298306090501,0.46846829630712961,-0.54427779984147051,1.7456995204558456,-0.51936889822469823,0.14731039883551134,0.67529868198422882,0.64178986666786209,-1.5046866976124136,-1.4396284545277647,1.1754875780159537,0.83105717416653313,-1.2016529468300376,-0.77657181677275844,-1.6019323494481519,-1.4008454827030379,0.48382382231696219,1.2213754444749538,1.3473909965516118,-0.54003514200625524,-0.60913552903456214,-1.7587300403390138,1.2301632916457823,-2.1799623163981732,-0.32743798102171251,-0.34933039871171889,0.69059564983143407,1.3244992735543644,-0.94876851713718935,-2.7947679438786253,-1.1833614105153725,0.72685660386696149,-1.7420619792966949,0.50263533091365709,1.8853110056924685,-0.38580924771800085,0.68743825546541792,0.74039969325089316,0.65666335349957983,1.5216300028664977,-0.64472793059129963,-1.1624682776204871,1.1939347657695762,0.2402224476784669,-2.0569979294210619,-0.50255978155965231,0.30895844521572968,-0.13784728037378713,-0.14703442735224748,-0.77534976629769048,-0.71145520584350308,0.58493009293058051,0.72441156516409855,-0.10235954294258409,-0.16379192586862068,-1.78025564446998,-0.29124259001876496,0.0049131281852492492,0.17573224076843452,-3.5074146729034101,2.3851937391809663,0.10191142520247354,-0.56074637202712996,-0.48510567497836909,1.8274014128500209,-0.34859611414199065,0.28495075046644835,-2.8111596616294978,-0.049489802731041976,0.092306513165373971,0.17363315608905872,3.5429034044725665,-0.49650490762958199,-1.0351456889846116,2.7255076304032961,0.6511363378453936,0.12884936941546066,1.0158816548229339,-0.9902828378809776,-2.1518983996625107,-0.6345969847447126,-0.63388992676284106,0.2795127633232859,0.74947622415312054,0.70988588273887654,0.88777272631358883,3.2350252403019635,-0.06002917782970929,-0.64597134518566435,1.2061774757834076,0.86663906737944885,0.30191427406728266,0.87609792473209325,-1.1805415577993319,-0.4566737524384088,-1.1637581041365817,-2.3461695355955499,-0.49731502786778492,-0.37626681207645873,-0.39153029972874265,-0.13797480550379504,-0.78011831180120872,1.9970351919027012,0.34977592673745583,-0.003352740505945917,-0.35437846944688189,1.0413300073314833,-0.28370335247587875,0.42143415257375949,-1.0484774546028817,-0.89346613610579517,-0.99771825656526669,-0.379296290234997,-0.3757260263609945,2.0688415130743518,0.10316629082827333,-0.8720926423362485,-1.5894322527015792,-0.75921888979268637,0.61816066914175849,0.1638940072120656,0.48822019318394894,-0.045538087441174824,-0.76014764559614711,-0.36026862357926959,-1.1158970624028832,-2.4696245208792238,0.060821123844009506,-0.15533927063132857,-0.72115389387601248,-1.0761276339829902,-0.83412562425664483,0.65208935633368625,-3.1414569814540414],"text":["<b>Abilene, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 37<br>Burden Change: 0.8 pp","<b>Akron, OH<\/b><br>YIMBY Score: 1/4<br>Housing Score: 28.5<br>Burden Change: -1.1 pp","<b>Albany, GA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 26.4<br>Burden Change: -0.5 pp","<b>Albany, OR<\/b><br>YIMBY Score: 2/4<br>Housing Score: 39.6<br>Burden Change: 1.6 pp","<b>Albany-Schenectady-Troy, NY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 37.1<br>Burden Change: 0.2 pp","<b>Albuquerque, NM<\/b><br>YIMBY Score: 2/4<br>Housing Score: 66.3<br>Burden Change: -0.3 pp","<b>Alexandria, LA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 34.5<br>Burden Change: -0.5 pp","<b>Allentown-Bethlehem-Easton, PA-NJ<\/b><br>YIMBY Score: 1/4<br>Housing Score: 30.5<br>Burden Change: 0.4 pp","<b>Altoona, PA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 19.4<br>Burden Change: -1.2 pp","<b>Amarillo, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 41.6<br>Burden Change: 0.5 pp","<b>Ames, IA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 27.6<br>Burden Change: -4 pp","<b>Anchorage, AK<\/b><br>YIMBY Score: 3/4<br>Housing Score: 121.8<br>Burden Change: -0.8 pp","<b>Ann Arbor, MI<\/b><br>YIMBY Score: 0/4<br>Housing Score: 92.6<br>Burden Change: 1.3 pp","<b>Appleton, WI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 46.2<br>Burden Change: 0.3 pp","<b>Asheville, NC<\/b><br>YIMBY Score: 1/4<br>Housing Score: 199.5<br>Burden Change: 0.8 pp","<b>Athens-Clarke County, GA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 67.3<br>Burden Change: -1.8 pp","<b>Atlanta-Sandy Springs-Roswell, GA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 83.5<br>Burden Change: 3 pp","<b>Atlantic City-Hammonton, NJ<\/b><br>YIMBY Score: 3/4<br>Housing Score: 13.6<br>Burden Change: -2 pp","<b>Auburn-Opelika, AL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 91.5<br>Burden Change: -1.5 pp","<b>Augusta-Richmond County, GA-SC<\/b><br>YIMBY Score: 2/4<br>Housing Score: 85<br>Burden Change: -0.5 pp","<b>Baltimore-Columbia-Towson, MD<\/b><br>YIMBY Score: 1/4<br>Housing Score: 62.7<br>Burden Change: 0.1 pp","<b>Bangor, ME<\/b><br>YIMBY Score: 2/4<br>Housing Score: 45.1<br>Burden Change: -0.7 pp","<b>Barnstable Town, MA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 33<br>Burden Change: -0.2 pp","<b>Baton Rouge, LA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 56.1<br>Burden Change: 1.3 pp","<b>Battle Creek, MI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 20.8<br>Burden Change: -0.8 pp","<b>Bay City, MI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 7.9<br>Burden Change: -0.2 pp","<b>Beaumont-Port Arthur, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 63.3<br>Burden Change: -0.4 pp","<b>Beckley, WV<\/b><br>YIMBY Score: 0/4<br>Housing Score: 17.3<br>Burden Change: 0.3 pp","<b>Bellingham, WA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 57.5<br>Burden Change: 2.2 pp","<b>Billings, MT<\/b><br>YIMBY Score: 2/4<br>Housing Score: 25<br>Burden Change: -1.6 pp","<b>Binghamton, NY<\/b><br>YIMBY Score: 2/4<br>Housing Score: 39.1<br>Burden Change: -0.1 pp","<b>Bismarck, ND<\/b><br>YIMBY Score: 2/4<br>Housing Score: 38.5<br>Burden Change: -0.3 pp","<b>Blacksburg-Christiansburg-Radford, VA<\/b><br>YIMBY Score: 0/4<br>Housing Score: 57.3<br>Burden Change: 1.5 pp","<b>Bloomington, IL<\/b><br>YIMBY Score: 0/4<br>Housing Score: 26.7<br>Burden Change: 0.1 pp","<b>Bloomington, IN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 75.9<br>Burden Change: -1 pp","<b>Boise City, ID<\/b><br>YIMBY Score: 2/4<br>Housing Score: 160.7<br>Burden Change: 1.9 pp","<b>Boston-Cambridge-Newton, MA-NH<\/b><br>YIMBY Score: 1/4<br>Housing Score: 41.1<br>Burden Change: 1.4 pp","<b>Boulder, CO<\/b><br>YIMBY Score: 2/4<br>Housing Score: 101.9<br>Burden Change: 2.2 pp","<b>Bowling Green, KY<\/b><br>YIMBY Score: 3/4<br>Housing Score: 106.9<br>Burden Change: -0.2 pp","<b>Brownsville-Harlingen, TX<\/b><br>YIMBY Score: 4/4<br>Housing Score: 123.6<br>Burden Change: -2.5 pp","<b>Burlington, NC<\/b><br>YIMBY Score: 4/4<br>Housing Score: 210.1<br>Burden Change: -2.8 pp","<b>Burlington-South Burlington, VT<\/b><br>YIMBY Score: 2/4<br>Housing Score: 79.6<br>Burden Change: -0.2 pp","<b>Canton-Massillon, OH<\/b><br>YIMBY Score: 1/4<br>Housing Score: 27.2<br>Burden Change: -0.8 pp","<b>Cape Coral-Fort Myers, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 220.9<br>Burden Change: 3.4 pp","<b>Cape Girardeau, MO-IL<\/b><br>YIMBY Score: 1/4<br>Housing Score: 17.1<br>Burden Change: -2.2 pp","<b>Carson City, NV<\/b><br>YIMBY Score: 2/4<br>Housing Score: 60.4<br>Burden Change: -0.9 pp","<b>Casper, WY<\/b><br>YIMBY Score: 2/4<br>Housing Score: 90<br>Burden Change: -0.7 pp","<b>Cedar Rapids, IA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 49.7<br>Burden Change: 0.4 pp","<b>Champaign-Urbana, IL<\/b><br>YIMBY Score: 1/4<br>Housing Score: 54.5<br>Burden Change: -1 pp","<b>Charleston, WV<\/b><br>YIMBY Score: 1/4<br>Housing Score: 19.3<br>Burden Change: -1 pp","<b>Charleston-North Charleston, SC<\/b><br>YIMBY Score: 3/4<br>Housing Score: 140<br>Burden Change: 0.3 pp","<b>Charlotte-Concord-Gastonia, NC-SC<\/b><br>YIMBY Score: 2/4<br>Housing Score: 143.9<br>Burden Change: 1.6 pp","<b>Charlottesville, VA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 123.4<br>Burden Change: -1.1 pp","<b>Chattanooga, TN-GA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 77.9<br>Burden Change: 0.3 pp","<b>Cheyenne, WY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 47<br>Burden Change: 0.3 pp","<b>Chico, CA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 95.1<br>Burden Change: -0.5 pp","<b>Cincinnati, OH-KY-IN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 41.7<br>Burden Change: 0.1 pp","<b>Clarksville, TN-KY<\/b><br>YIMBY Score: 4/4<br>Housing Score: 116.7<br>Burden Change: -0.1 pp","<b>Cleveland, TN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 95<br>Burden Change: -1.9 pp","<b>Coeur d'Alene, ID<\/b><br>YIMBY Score: 2/4<br>Housing Score: 147.9<br>Burden Change: 1.8 pp","<b>College Station-Bryan, TX<\/b><br>YIMBY Score: 2/4<br>Housing Score: 72.8<br>Burden Change: 0 pp","<b>Colorado Springs, CO<\/b><br>YIMBY Score: 1/4<br>Housing Score: 99.1<br>Burden Change: 2.5 pp","<b>Columbia, MO<\/b><br>YIMBY Score: 2/4<br>Housing Score: 42<br>Burden Change: -0.3 pp","<b>Columbia, SC<\/b><br>YIMBY Score: 1/4<br>Housing Score: 98.3<br>Burden Change: 0.4 pp","<b>Columbus, GA-AL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 27.5<br>Burden Change: -1.6 pp","<b>Columbus, IN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 31.6<br>Burden Change: -1 pp","<b>Columbus, OH<\/b><br>YIMBY Score: 1/4<br>Housing Score: 78<br>Burden Change: 0.9 pp","<b>Corpus Christi, TX<\/b><br>YIMBY Score: 0/4<br>Housing Score: 88<br>Burden Change: 1.6 pp","<b>Corvallis, OR<\/b><br>YIMBY Score: 1/4<br>Housing Score: 58.6<br>Burden Change: 1.3 pp","<b>Crestview-Fort Walton Beach-Destin, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 250.3<br>Burden Change: 1.7 pp","<b>Dallas-Fort Worth-Arlington, TX<\/b><br>YIMBY Score: 2/4<br>Housing Score: 116.6<br>Burden Change: 2.3 pp","<b>Dalton, GA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 219.5<br>Burden Change: -1.5 pp","<b>Daphne-Fairhope-Foley, AL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 229.6<br>Burden Change: -0.6 pp","<b>Davenport-Moline-Rock Island, IA-IL<\/b><br>YIMBY Score: 1/4<br>Housing Score: 34.3<br>Burden Change: -0.1 pp","<b>Decatur, AL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 30.3<br>Burden Change: -1.2 pp","<b>Decatur, IL<\/b><br>YIMBY Score: 0/4<br>Housing Score: 7.2<br>Burden Change: 0.9 pp","<b>Deltona-Daytona Beach-Ormond Beach, FL<\/b><br>YIMBY Score: 4/4<br>Housing Score: 134.6<br>Burden Change: -0.7 pp","<b>Des Moines-West Des Moines, IA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 91.8<br>Burden Change: 0.3 pp","<b>Detroit-Warren-Dearborn, MI<\/b><br>YIMBY Score: 2/4<br>Housing Score: 42.7<br>Burden Change: -0.2 pp","<b>Dothan, AL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 46.4<br>Burden Change: -1.8 pp","<b>Dover, DE<\/b><br>YIMBY Score: 3/4<br>Housing Score: 82.6<br>Burden Change: -0.6 pp","<b>Dubuque, IA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 35.6<br>Burden Change: -0.4 pp","<b>Duluth, MN-WI<\/b><br>YIMBY Score: 2/4<br>Housing Score: 67.9<br>Burden Change: -0.3 pp","<b>Durham-Chapel Hill, NC<\/b><br>YIMBY Score: 2/4<br>Housing Score: 168<br>Burden Change: 0.1 pp","<b>Eau Claire, WI<\/b><br>YIMBY Score: 3/4<br>Housing Score: 129.5<br>Burden Change: -2 pp","<b>El Centro, CA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 31.1<br>Burden Change: -1.5 pp","<b>Elkhart-Goshen, IN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 38.5<br>Burden Change: 1.6 pp","<b>Elmira, NY<\/b><br>YIMBY Score: 0/4<br>Housing Score: 20.6<br>Burden Change: 1.7 pp","<b>El Paso, TX<\/b><br>YIMBY Score: 2/4<br>Housing Score: 40.4<br>Burden Change: 0.5 pp","<b>Enid, OK<\/b><br>YIMBY Score: 2/4<br>Housing Score: 4.3<br>Burden Change: -1.5 pp","<b>Erie, PA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 17.7<br>Burden Change: -0.6 pp","<b>Fargo, ND-MN<\/b><br>YIMBY Score: 3/4<br>Housing Score: 111<br>Burden Change: -0.5 pp","<b>Farmington, NM<\/b><br>YIMBY Score: 0/4<br>Housing Score: 20.6<br>Burden Change: 1.9 pp","<b>Fayetteville, NC<\/b><br>YIMBY Score: 4/4<br>Housing Score: 128.9<br>Burden Change: -1.5 pp","<b>Flagstaff, AZ<\/b><br>YIMBY Score: 3/4<br>Housing Score: 129.3<br>Burden Change: 2 pp","<b>Flint, MI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 20.1<br>Burden Change: -1 pp","<b>Florence, SC<\/b><br>YIMBY Score: 1/4<br>Housing Score: 78.3<br>Burden Change: -0.2 pp","<b>Florence-Muscle Shoals, AL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 18.9<br>Burden Change: -1.2 pp","<b>Fond du Lac, WI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 25.8<br>Burden Change: 0.2 pp","<b>Fort Smith, AR-OK<\/b><br>YIMBY Score: 1/4<br>Housing Score: 62.6<br>Burden Change: -1.5 pp","<b>Fort Wayne, IN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 78.2<br>Burden Change: 0.8 pp","<b>Fresno, CA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 35.7<br>Burden Change: -0.7 pp","<b>Gadsden, AL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 34.9<br>Burden Change: -0.6 pp","<b>Gainesville, FL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 73.7<br>Burden Change: 2.3 pp","<b>Gainesville, GA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 84.6<br>Burden Change: 0.5 pp","<b>Gettysburg, PA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 47.9<br>Burden Change: -1.2 pp","<b>Glens Falls, NY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 40.2<br>Burden Change: -1.6 pp","<b>Goldsboro, NC<\/b><br>YIMBY Score: 2/4<br>Housing Score: 96.1<br>Burden Change: -1.8 pp","<b>Grand Forks, ND-MN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 43.7<br>Burden Change: -2 pp","<b>Grand Island, NE<\/b><br>YIMBY Score: 1/4<br>Housing Score: 110.6<br>Burden Change: 0.1 pp","<b>Grand Junction, CO<\/b><br>YIMBY Score: 3/4<br>Housing Score: 114.7<br>Burden Change: -1 pp","<b>Grants Pass, OR<\/b><br>YIMBY Score: 3/4<br>Housing Score: 44.5<br>Burden Change: -2.1 pp","<b>Great Falls, MT<\/b><br>YIMBY Score: 2/4<br>Housing Score: 27.3<br>Burden Change: -1.6 pp","<b>Greeley, CO<\/b><br>YIMBY Score: 2/4<br>Housing Score: 135<br>Burden Change: 1.9 pp","<b>Green Bay, WI<\/b><br>YIMBY Score: 2/4<br>Housing Score: 46.5<br>Burden Change: -0.1 pp","<b>Greensboro-High Point, NC<\/b><br>YIMBY Score: 2/4<br>Housing Score: 68.7<br>Burden Change: -0.3 pp","<b>Greenville, NC<\/b><br>YIMBY Score: 1/4<br>Housing Score: 166.4<br>Burden Change: 0 pp","<b>Hagerstown-Martinsburg, MD-WV<\/b><br>YIMBY Score: 2/4<br>Housing Score: 77.8<br>Burden Change: -0.9 pp","<b>Hammond, LA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 133.6<br>Burden Change: -1 pp","<b>Hanford-Corcoran, CA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 91.2<br>Burden Change: 0.7 pp","<b>Harrisburg-Carlisle, PA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 44.6<br>Burden Change: 0 pp","<b>Harrisonburg, VA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 73.5<br>Burden Change: -1.2 pp","<b>Hartford-West Hartford-East Hartford, CT<\/b><br>YIMBY Score: 0/4<br>Housing Score: 38.9<br>Burden Change: 0.8 pp","<b>Hattiesburg, MS<\/b><br>YIMBY Score: 2/4<br>Housing Score: 15.6<br>Burden Change: -0.7 pp","<b>Hickory-Lenoir-Morganton, NC<\/b><br>YIMBY Score: 3/4<br>Housing Score: 149.8<br>Burden Change: -2.3 pp","<b>Hinesville, GA<\/b><br>YIMBY Score: 4/4<br>Housing Score: 111.1<br>Burden Change: -3.8 pp","<b>Homosassa Springs, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 178.5<br>Burden Change: 0.7 pp","<b>Hot Springs, AR<\/b><br>YIMBY Score: 2/4<br>Housing Score: 18.2<br>Burden Change: -0.5 pp","<b>Huntington-Ashland, WV-KY-OH<\/b><br>YIMBY Score: 2/4<br>Housing Score: 12.8<br>Burden Change: -1.3 pp","<b>Huntsville, AL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 151.6<br>Burden Change: 0.6 pp","<b>Idaho Falls, ID<\/b><br>YIMBY Score: 2/4<br>Housing Score: 145.3<br>Burden Change: 0.7 pp","<b>Iowa City, IA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 104.2<br>Burden Change: -1.1 pp","<b>Ithaca, NY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 70.2<br>Burden Change: 0.9 pp","<b>Jackson, MI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 32.1<br>Burden Change: 0.6 pp","<b>Jackson, MS<\/b><br>YIMBY Score: 1/4<br>Housing Score: 29<br>Burden Change: 0.1 pp","<b>Jackson, TN<\/b><br>YIMBY Score: 3/4<br>Housing Score: 31.2<br>Burden Change: -1.9 pp","<b>Jacksonville, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 160.7<br>Burden Change: 0.7 pp","<b>Jacksonville, NC<\/b><br>YIMBY Score: 3/4<br>Housing Score: 91.7<br>Burden Change: -2.3 pp","<b>Janesville-Beloit, WI<\/b><br>YIMBY Score: 2/4<br>Housing Score: 40.1<br>Burden Change: -0.6 pp","<b>Jefferson City, MO<\/b><br>YIMBY Score: 2/4<br>Housing Score: 22.9<br>Burden Change: -0.2 pp","<b>Johnson City, TN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 74<br>Burden Change: -1.6 pp","<b>Johnstown, PA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 7.6<br>Burden Change: -0.5 pp","<b>Jonesboro, AR<\/b><br>YIMBY Score: 3/4<br>Housing Score: 115.8<br>Burden Change: -1.5 pp","<b>Kalamazoo-Portage, MI<\/b><br>YIMBY Score: 0/4<br>Housing Score: 58.1<br>Burden Change: 0.8 pp","<b>Kankakee, IL<\/b><br>YIMBY Score: 1/4<br>Housing Score: 17.2<br>Burden Change: -0.4 pp","<b>Kansas City, MO-KS<\/b><br>YIMBY Score: 1/4<br>Housing Score: 51.1<br>Burden Change: 0.8 pp","<b>Kennewick-Richland, WA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 91.9<br>Burden Change: 0.4 pp","<b>Killeen-Temple, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 96.9<br>Burden Change: 0.6 pp","<b>Kingston, NY<\/b><br>YIMBY Score: 2/4<br>Housing Score: 35.8<br>Burden Change: 0 pp","<b>Knoxville, TN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 95.2<br>Burden Change: 0 pp","<b>Kokomo, IN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 30.3<br>Burden Change: 1.5 pp","<b>La Crosse-Onalaska, WI-MN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 36.7<br>Burden Change: -0.4 pp","<b>Lafayette, LA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 122.1<br>Burden Change: 0.5 pp","<b>Lafayette-West Lafayette, IN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 143.3<br>Burden Change: 2.1 pp","<b>Lake Charles, LA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 58.2<br>Burden Change: -0.4 pp","<b>Lake Havasu City-Kingman, AZ<\/b><br>YIMBY Score: 3/4<br>Housing Score: 141<br>Burden Change: 0.3 pp","<b>Lakeland-Winter Haven, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 204<br>Burden Change: 0.1 pp","<b>Lancaster, PA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 54.2<br>Burden Change: -0.2 pp","<b>Lansing-East Lansing, MI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 42.5<br>Burden Change: -0.7 pp","<b>Laredo, TX<\/b><br>YIMBY Score: 3/4<br>Housing Score: 121.5<br>Burden Change: -4.6 pp","<b>Las Cruces, NM<\/b><br>YIMBY Score: 3/4<br>Housing Score: 57.6<br>Burden Change: -3 pp","<b>Lawrence, KS<\/b><br>YIMBY Score: 1/4<br>Housing Score: 39.2<br>Burden Change: -0.8 pp","<b>Lawton, OK<\/b><br>YIMBY Score: 0/4<br>Housing Score: 25.6<br>Burden Change: 0.9 pp","<b>Lebanon, PA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 28.6<br>Burden Change: -0.4 pp","<b>Lewiston, ID-WA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 32.1<br>Burden Change: 0.3 pp","<b>Lewiston-Auburn, ME<\/b><br>YIMBY Score: 1/4<br>Housing Score: 44.5<br>Burden Change: 0.4 pp","<b>Lexington-Fayette, KY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 92.8<br>Burden Change: 0.7 pp","<b>Lima, OH<\/b><br>YIMBY Score: 0/4<br>Housing Score: 16.2<br>Burden Change: 1.1 pp","<b>Lincoln, NE<\/b><br>YIMBY Score: 1/4<br>Housing Score: 96.9<br>Burden Change: 0.5 pp","<b>Little Rock-North Little Rock-Conway, AR<\/b><br>YIMBY Score: 2/4<br>Housing Score: 54.4<br>Burden Change: -0.5 pp","<b>Logan, UT-ID<\/b><br>YIMBY Score: 1/4<br>Housing Score: 89.7<br>Burden Change: 1.7 pp","<b>Longview, TX<\/b><br>YIMBY Score: 2/4<br>Housing Score: 16.3<br>Burden Change: -0.5 pp","<b>Los Angeles-Long Beach-Anaheim, CA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 51<br>Burden Change: 0.1 pp","<b>Louisville/Jefferson County, KY-IN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 72.2<br>Burden Change: 0.7 pp","<b>Lubbock, TX<\/b><br>YIMBY Score: 2/4<br>Housing Score: 94.7<br>Burden Change: 0.6 pp","<b>Lynchburg, VA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 72.4<br>Burden Change: -1.5 pp","<b>Macon-Bibb County, GA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 46<br>Burden Change: -1.4 pp","<b>Madison, WI<\/b><br>YIMBY Score: 2/4<br>Housing Score: 111.6<br>Burden Change: 1.2 pp","<b>Manchester-Nashua, NH<\/b><br>YIMBY Score: 1/4<br>Housing Score: 49<br>Burden Change: 0.8 pp","<b>Manhattan, KS<\/b><br>YIMBY Score: 2/4<br>Housing Score: 25.4<br>Burden Change: -1.2 pp","<b>Mansfield, OH<\/b><br>YIMBY Score: 2/4<br>Housing Score: 16.4<br>Burden Change: -0.8 pp","<b>McAllen-Edinburg-Mission, TX<\/b><br>YIMBY Score: 4/4<br>Housing Score: 115.9<br>Burden Change: -1.6 pp","<b>Medford, OR<\/b><br>YIMBY Score: 4/4<br>Housing Score: 121.8<br>Burden Change: -1.4 pp","<b>Memphis, TN-MS-AR<\/b><br>YIMBY Score: 0/4<br>Housing Score: 64.4<br>Burden Change: 0.5 pp","<b>Merced, CA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 19.8<br>Burden Change: 1.2 pp","<b>Miami-Fort Lauderdale-West Palm Beach, FL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 52.3<br>Burden Change: 1.3 pp","<b>Michigan City-La Porte, IN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 40.4<br>Burden Change: -0.5 pp","<b>Midland, MI<\/b><br>YIMBY Score: 2/4<br>Housing Score: 48.5<br>Burden Change: -0.6 pp","<b>Midland, TX<\/b><br>YIMBY Score: 2/4<br>Housing Score: 63.4<br>Burden Change: -1.8 pp","<b>Minneapolis-St. Paul-Bloomington, MN-WI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 80.6<br>Burden Change: 1.2 pp","<b>Missoula, MT<\/b><br>YIMBY Score: 2/4<br>Housing Score: 74.3<br>Burden Change: -2.2 pp","<b>Mobile, AL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 47.2<br>Burden Change: -0.3 pp","<b>Modesto, CA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 41.6<br>Burden Change: -0.3 pp","<b>Monroe, LA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 24.8<br>Burden Change: 0.7 pp","<b>Monroe, MI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 26<br>Burden Change: 1.3 pp","<b>Montgomery, AL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 35.1<br>Burden Change: -0.9 pp","<b>Morgantown, WV<\/b><br>YIMBY Score: 2/4<br>Housing Score: 2.1<br>Burden Change: -2.8 pp","<b>Morristown, TN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 99.2<br>Burden Change: -1.2 pp","<b>Mount Vernon-Anacortes, WA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 55.4<br>Burden Change: 0.7 pp","<b>Muncie, IN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 15.5<br>Burden Change: -1.7 pp","<b>Napa, CA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 52.7<br>Burden Change: 0.5 pp","<b>Nashville-Davidson--Murfreesboro--Franklin, TN<\/b><br>YIMBY Score: 2/4<br>Housing Score: 154.2<br>Burden Change: 1.9 pp","<b>New Orleans-Metairie, LA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 67.7<br>Burden Change: -0.4 pp","<b>Ocala, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 170.6<br>Burden Change: 0.7 pp","<b>Odessa, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 62.7<br>Burden Change: 0.7 pp","<b>Oklahoma City, OK<\/b><br>YIMBY Score: 1/4<br>Housing Score: 65.1<br>Burden Change: 0.7 pp","<b>Orlando-Kissimmee-Sanford, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 123<br>Burden Change: 1.5 pp","<b>Oshkosh-Neenah, WI<\/b><br>YIMBY Score: 2/4<br>Housing Score: 64.7<br>Burden Change: -0.6 pp","<b>Owensboro, KY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 55.5<br>Burden Change: -1.2 pp","<b>Oxnard-Thousand Oaks-Ventura, CA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 29.7<br>Burden Change: 1.2 pp","<b>Palm Bay-Melbourne-Titusville, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 141.1<br>Burden Change: 0.2 pp","<b>Parkersburg-Vienna, WV<\/b><br>YIMBY Score: 1/4<br>Housing Score: 23.2<br>Burden Change: -2.1 pp","<b>Pensacola-Ferry Pass-Brent, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 74.4<br>Burden Change: -0.5 pp","<b>Peoria, IL<\/b><br>YIMBY Score: 0/4<br>Housing Score: 12.3<br>Burden Change: 0.3 pp","<b>Philadelphia-Camden-Wilmington, PA-NJ-DE-MD<\/b><br>YIMBY Score: 2/4<br>Housing Score: 32.5<br>Burden Change: -0.1 pp","<b>Pittsburgh, PA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 40.1<br>Burden Change: -0.1 pp","<b>Pittsfield, MA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 43.3<br>Burden Change: -0.8 pp","<b>Pocatello, ID<\/b><br>YIMBY Score: 2/4<br>Housing Score: 55.8<br>Burden Change: -0.7 pp","<b>Portland-South Portland, ME<\/b><br>YIMBY Score: 1/4<br>Housing Score: 78<br>Burden Change: 0.6 pp","<b>Portland-Vancouver-Hillsboro, OR-WA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 77.2<br>Burden Change: 0.7 pp","<b>Port St. Lucie, FL<\/b><br>YIMBY Score: 4/4<br>Housing Score: 155.1<br>Burden Change: -0.1 pp","<b>Providence-Warwick, RI-MA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 18<br>Burden Change: -0.2 pp","<b>Pueblo, CO<\/b><br>YIMBY Score: 3/4<br>Housing Score: 32.4<br>Burden Change: -1.8 pp","<b>Punta Gorda, FL<\/b><br>YIMBY Score: 4/4<br>Housing Score: 291.7<br>Burden Change: -0.3 pp","<b>Rapid City, SD<\/b><br>YIMBY Score: 2/4<br>Housing Score: 144.2<br>Burden Change: 0 pp","<b>Reading, PA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 12.7<br>Burden Change: 0.2 pp","<b>Redding, CA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 61.4<br>Burden Change: -3.5 pp","<b>Reno, NV<\/b><br>YIMBY Score: 2/4<br>Housing Score: 100.5<br>Burden Change: 2.4 pp","<b>Richmond, VA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 114.5<br>Burden Change: 0.1 pp","<b>Riverside-San Bernardino-Ontario, CA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 73.9<br>Burden Change: -0.6 pp","<b>Roanoke, VA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 81.7<br>Burden Change: -0.5 pp","<b>Rochester, MN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 76.1<br>Burden Change: 1.8 pp","<b>Rochester, NY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 34.7<br>Burden Change: -0.3 pp","<b>Rockford, IL<\/b><br>YIMBY Score: 0/4<br>Housing Score: 12.7<br>Burden Change: 0.3 pp","<b>Rocky Mount, NC<\/b><br>YIMBY Score: 1/4<br>Housing Score: 89.5<br>Burden Change: -2.8 pp","<b>Rome, GA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 54.6<br>Burden Change: 0 pp","<b>Saginaw, MI<\/b><br>YIMBY Score: 0/4<br>Housing Score: 21.5<br>Burden Change: 0.1 pp","<b>St. Cloud, MN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 56.9<br>Burden Change: 0.2 pp","<b>St. George, UT<\/b><br>YIMBY Score: 2/4<br>Housing Score: 184.9<br>Burden Change: 3.5 pp","<b>St. Joseph, MO-KS<\/b><br>YIMBY Score: 1/4<br>Housing Score: 17.3<br>Burden Change: -0.5 pp","<b>St. Louis, MO-IL<\/b><br>YIMBY Score: 1/4<br>Housing Score: 53.9<br>Burden Change: -1 pp","<b>Salem, OR<\/b><br>YIMBY Score: 1/4<br>Housing Score: 74.3<br>Burden Change: 2.7 pp","<b>Salinas, CA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 30.4<br>Burden Change: 0.7 pp","<b>San Angelo, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 60.8<br>Burden Change: 0.1 pp","<b>San Antonio-New Braunfels, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 84.7<br>Burden Change: 1 pp","<b>San Jose-Sunnyvale-Santa Clara, CA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 67.9<br>Burden Change: -1 pp","<b>Santa Cruz-Watsonville, CA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 43.8<br>Burden Change: -2.2 pp","<b>Santa Fe, NM<\/b><br>YIMBY Score: 2/4<br>Housing Score: 88.4<br>Burden Change: -0.6 pp","<b>Santa Maria-Santa Barbara, CA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 22.6<br>Burden Change: -0.6 pp","<b>Savannah, GA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 110.5<br>Burden Change: 0.3 pp","<b>Seattle-Tacoma-Bellevue, WA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 63.9<br>Burden Change: 0.7 pp","<b>Sebring, FL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 91.8<br>Burden Change: 0.7 pp","<b>Sheboygan, WI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 83.8<br>Burden Change: 0.9 pp","<b>Sherman-Denison, TX<\/b><br>YIMBY Score: 2/4<br>Housing Score: 227.4<br>Burden Change: 3.2 pp","<b>Shreveport-Bossier City, LA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 54.4<br>Burden Change: -0.1 pp","<b>Sierra Vista-Douglas, AZ<\/b><br>YIMBY Score: 1/4<br>Housing Score: 82.7<br>Burden Change: -0.6 pp","<b>Sioux City, IA-NE-SD<\/b><br>YIMBY Score: 0/4<br>Housing Score: 53.8<br>Burden Change: 1.2 pp","<b>South Bend-Mishawaka, IN-MI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 32.3<br>Burden Change: 0.9 pp","<b>Spartanburg, SC<\/b><br>YIMBY Score: 2/4<br>Housing Score: 101<br>Burden Change: 0.3 pp","<b>Spokane-Spokane Valley, WA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 93.6<br>Burden Change: 0.9 pp","<b>Springfield, IL<\/b><br>YIMBY Score: 1/4<br>Housing Score: 25.4<br>Burden Change: -1.2 pp","<b>Springfield, MA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 32.6<br>Burden Change: -0.5 pp","<b>Springfield, MO<\/b><br>YIMBY Score: 2/4<br>Housing Score: 63.8<br>Burden Change: -1.2 pp","<b>Springfield, OH<\/b><br>YIMBY Score: 2/4<br>Housing Score: 33.9<br>Burden Change: -2.3 pp","<b>State College, PA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 46.2<br>Burden Change: -0.5 pp","<b>Stockton-Lodi, CA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 37<br>Burden Change: -0.4 pp","<b>Sumter, SC<\/b><br>YIMBY Score: 2/4<br>Housing Score: 96.3<br>Burden Change: -0.4 pp","<b>Syracuse, NY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 20.9<br>Burden Change: -0.1 pp","<b>Tallahassee, FL<\/b><br>YIMBY Score: 4/4<br>Housing Score: 120.9<br>Burden Change: -0.8 pp","<b>Tampa-St. Petersburg-Clearwater, FL<\/b><br>YIMBY Score: 3/4<br>Housing Score: 106.7<br>Burden Change: 2 pp","<b>Terre Haute, IN<\/b><br>YIMBY Score: 1/4<br>Housing Score: 19.2<br>Burden Change: 0.3 pp","<b>Texarkana, TX-AR<\/b><br>YIMBY Score: 1/4<br>Housing Score: 35.8<br>Burden Change: 0 pp","<b>Toledo, OH<\/b><br>YIMBY Score: 1/4<br>Housing Score: 47.3<br>Burden Change: -0.4 pp","<b>Topeka, KS<\/b><br>YIMBY Score: 0/4<br>Housing Score: 32.2<br>Burden Change: 1 pp","<b>Tucson, AZ<\/b><br>YIMBY Score: 2/4<br>Housing Score: 75.9<br>Burden Change: -0.3 pp","<b>Tulsa, OK<\/b><br>YIMBY Score: 1/4<br>Housing Score: 70.4<br>Burden Change: 0.4 pp","<b>Tuscaloosa, AL<\/b><br>YIMBY Score: 2/4<br>Housing Score: 35<br>Burden Change: -1 pp","<b>Tyler, TX<\/b><br>YIMBY Score: 2/4<br>Housing Score: 43.4<br>Burden Change: -0.9 pp","<b>Urban Honolulu, HI<\/b><br>YIMBY Score: 4/4<br>Housing Score: 268<br>Burden Change: -1 pp","<b>Utica-Rome, NY<\/b><br>YIMBY Score: 1/4<br>Housing Score: 18.6<br>Burden Change: -0.4 pp","<b>Valdosta, GA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 96.4<br>Burden Change: -0.4 pp","<b>Victoria, TX<\/b><br>YIMBY Score: 0/4<br>Housing Score: 19.1<br>Burden Change: 2.1 pp","<b>Waco, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 77.9<br>Burden Change: 0.1 pp","<b>Walla Walla, WA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 94.7<br>Burden Change: -0.9 pp","<b>Warner Robins, GA<\/b><br>YIMBY Score: 3/4<br>Housing Score: 139.9<br>Burden Change: -1.6 pp","<b>Washington-Arlington-Alexandria, DC-VA-MD-WV<\/b><br>YIMBY Score: 2/4<br>Housing Score: 74.2<br>Burden Change: -0.8 pp","<b>Waterloo-Cedar Falls, IA<\/b><br>YIMBY Score: 0/4<br>Housing Score: 60.6<br>Burden Change: 0.6 pp","<b>Watertown-Fort Drum, NY<\/b><br>YIMBY Score: 2/4<br>Housing Score: 53.8<br>Burden Change: 0.2 pp","<b>Wausau, WI<\/b><br>YIMBY Score: 1/4<br>Housing Score: 72.4<br>Burden Change: 0.5 pp","<b>Weirton-Steubenville, WV-OH<\/b><br>YIMBY Score: 1/4<br>Housing Score: 3<br>Burden Change: 0 pp","<b>Wheeling, WV-OH<\/b><br>YIMBY Score: 1/4<br>Housing Score: 1.7<br>Burden Change: -0.8 pp","<b>Wichita, KS<\/b><br>YIMBY Score: 3/4<br>Housing Score: 124.1<br>Burden Change: -0.4 pp","<b>Wichita Falls, TX<\/b><br>YIMBY Score: 1/4<br>Housing Score: 38.7<br>Burden Change: -1.1 pp","<b>Williamsport, PA<\/b><br>YIMBY Score: 1/4<br>Housing Score: 10.7<br>Burden Change: -2.5 pp","<b>Wilmington, NC<\/b><br>YIMBY Score: 3/4<br>Housing Score: 110.1<br>Burden Change: 0.1 pp","<b>Winchester, VA-WV<\/b><br>YIMBY Score: 2/4<br>Housing Score: 96.8<br>Burden Change: -0.2 pp","<b>Winston-Salem, NC<\/b><br>YIMBY Score: 3/4<br>Housing Score: 111<br>Burden Change: -0.7 pp","<b>Yakima, WA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 42.3<br>Burden Change: -1.1 pp","<b>York-Hanover, PA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 38.2<br>Burden Change: -0.8 pp","<b>Yuba City, CA<\/b><br>YIMBY Score: 2/4<br>Housing Score: 48.3<br>Burden Change: 0.7 pp","<b>Yuma, AZ<\/b><br>YIMBY Score: 3/4<br>Housing Score: 67.4<br>Burden Change: -3.1 pp"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(217,217,217,1)","opacity":0.40000000000000002,"size":7.559055118110237,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(217,217,217,1)"}},"hoveron":"points","name":"0-2/4 (Other)","legendgroup":"0-2/4 (Other)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-6.2000000000000002,316.19999999999999],"y":[0,0],"text":"","type":"scatter","mode":"lines","line":{"width":3.0236220472440949,"color":"rgba(77,77,77,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[100,100],"y":[-10.4,10.4],"text":"","type":"scatter","mode":"lines","line":{"width":3.0236220472440949,"color":"rgba(77,77,77,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[100,100,null,null,100],"y":[null,0,0,null,null],"text":"","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,0.08)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[220],"y":[7],"text":"Q1: Growing Pains","hovertext":"","textfont":{"size":13.228346456692915,"color":"rgba(102,102,102,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[30],"y":[7],"text":"Q2: Worst","hovertext":"","textfont":{"size":13.228346456692915,"color":"rgba(102,102,102,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[30],"y":[-7],"text":"Q3: Lucky","hovertext":"","textfont":{"size":13.228346456692915,"color":"rgba(102,102,102,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[220],"y":[-7],"text":"Q4: YIMBY SUCCESS","hovertext":"","textfont":{"size":15.118110236220474,"color":"rgba(0,100,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[121.76350863818482,67.295855815140683,13.557945975140937,91.47770567165017,106.91517888590417,220.85002025042962,140.04405580896824,123.38692250512904,27.466363188953501,250.26264658761079,219.4857831761812,229.61403259543835,82.589684956369368,129.50575191253927,111.01528740147486,129.2686604932635,35.655330492351204,114.71461762663064,44.502068393655222,133.55578918283209,149.83718005386399,178.50573261160744,104.15558968318733,31.189707696904744,160.68648352641418,91.653744484647362,115.84461547902015,141.04751967743124,204.01085575445603,121.47137492964195,57.574718310290351,46.026131244301205,41.626118836114671,170.6126553860986,122.98270593733771,141.05858465105996,74.420308310227455,32.378752178133801,61.411928664826362,73.872935015644146,110.48759794139363,37.00692759248777,106.6951750533153,96.448906673625416,139.92388734571756,124.06301377657776,110.14354933255468,110.97896933166521,67.436229456993004],"y":[-0.78839227689513791,-1.8365940887291723,-1.9611863192034553,-1.5012394514858407,-0.22948046341708839,3.4186714728055732,0.25293636219218207,-1.1421322296165606,-1.6438755801310725,1.7479605848400217,-1.4682080742114465,-0.56369664075639392,-0.60801631098490461,-2.009792967508508,-0.46634096404510927,1.955587039698047,-0.70151668304908821,-0.99703691901079061,-2.0611708596674241,-1.034960202808243,-2.3237966007109687,0.72191410984148963,-1.0583482034409339,-1.9244894533738641,0.68378763222187278,-2.2892057061953528,-1.5338394556321937,0.25746459748019213,0.095350424819837798,-4.6294719590106954,-3.0176307113625747,-1.4396284545277647,-0.34933039871171889,0.68743825546541792,1.5216300028664977,0.2402224476784669,-0.50255978155965231,-1.78025564446998,-3.5074146729034101,-0.56074637202712996,0.2795127633232859,-0.37626681207645873,1.9970351919027012,-0.3757260263609945,-1.5894322527015792,-0.36026862357926959,0.060821123844009506,-0.72115389387601248,-3.1414569814540414],"text":["<b>Anchorage, AK<\/b><br>YIMBY Score: 3/4<br>Population Growth: 426<br>Housing Score: 121.8<br>Burden Change: -0.8 pp","<b>Athens-Clarke County, GA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 12,933<br>Housing Score: 67.3<br>Burden Change: -1.8 pp","<b>Atlantic City-Hammonton, NJ<\/b><br>YIMBY Score: 3/4<br>Population Growth: 99,905<br>Housing Score: 13.6<br>Burden Change: -2 pp","<b>Auburn-Opelika, AL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 41,072<br>Housing Score: 91.5<br>Burden Change: -1.5 pp","<b>Bowling Green, KY<\/b><br>YIMBY Score: 3/4<br>Population Growth: 13,717<br>Housing Score: 106.9<br>Burden Change: -0.2 pp","<b>Cape Coral-Fort Myers, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 95,349<br>Housing Score: 220.9<br>Burden Change: 3.4 pp","<b>Charleston-North Charleston, SC<\/b><br>YIMBY Score: 3/4<br>Population Growth: 73,586<br>Housing Score: 140<br>Burden Change: 0.3 pp","<b>Charlottesville, VA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 7,250<br>Housing Score: 123.4<br>Burden Change: -1.1 pp","<b>Columbus, GA-AL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 23,136<br>Housing Score: 27.5<br>Burden Change: -1.6 pp","<b>Crestview-Fort Walton Beach-Destin, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 33,472<br>Housing Score: 250.3<br>Burden Change: 1.7 pp","<b>Dalton, GA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 282<br>Housing Score: 219.5<br>Burden Change: -1.5 pp","<b>Daphne-Fairhope-Foley, AL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 40,879<br>Housing Score: 229.6<br>Burden Change: -0.6 pp","<b>Dover, DE<\/b><br>YIMBY Score: 3/4<br>Population Growth: 12,965<br>Housing Score: 82.6<br>Burden Change: -0.6 pp","<b>Eau Claire, WI<\/b><br>YIMBY Score: 3/4<br>Population Growth: 7,389<br>Housing Score: 129.5<br>Burden Change: -2 pp","<b>Fargo, ND-MN<\/b><br>YIMBY Score: 3/4<br>Population Growth: 21,264<br>Housing Score: 111<br>Burden Change: -0.5 pp","<b>Flagstaff, AZ<\/b><br>YIMBY Score: 3/4<br>Population Growth: 3,696<br>Housing Score: 129.3<br>Burden Change: 2 pp","<b>Fresno, CA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 190,765<br>Housing Score: 35.7<br>Burden Change: -0.7 pp","<b>Grand Junction, CO<\/b><br>YIMBY Score: 3/4<br>Population Growth: 8,065<br>Housing Score: 114.7<br>Burden Change: -1 pp","<b>Grants Pass, OR<\/b><br>YIMBY Score: 3/4<br>Population Growth: 1,469<br>Housing Score: 44.5<br>Burden Change: -2.1 pp","<b>Hammond, LA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 5,567<br>Housing Score: 133.6<br>Burden Change: -1 pp","<b>Hickory-Lenoir-Morganton, NC<\/b><br>YIMBY Score: 3/4<br>Population Growth: 3,496<br>Housing Score: 149.8<br>Burden Change: -2.3 pp","<b>Homosassa Springs, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 21,049<br>Housing Score: 178.5<br>Burden Change: 0.7 pp","<b>Iowa City, IA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 8,597<br>Housing Score: 104.2<br>Burden Change: -1.1 pp","<b>Jackson, TN<\/b><br>YIMBY Score: 3/4<br>Population Growth: 52,591<br>Housing Score: 31.2<br>Burden Change: -1.9 pp","<b>Jacksonville, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 208,260<br>Housing Score: 160.7<br>Burden Change: 0.7 pp","<b>Jacksonville, NC<\/b><br>YIMBY Score: 3/4<br>Population Growth: 19,783<br>Housing Score: 91.7<br>Burden Change: -2.3 pp","<b>Jonesboro, AR<\/b><br>YIMBY Score: 3/4<br>Population Growth: 5,121<br>Housing Score: 115.8<br>Burden Change: -1.5 pp","<b>Lake Havasu City-Kingman, AZ<\/b><br>YIMBY Score: 3/4<br>Population Growth: 16,482<br>Housing Score: 141<br>Burden Change: 0.3 pp","<b>Lakeland-Winter Haven, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 131,847<br>Housing Score: 204<br>Burden Change: 0.1 pp","<b>Laredo, TX<\/b><br>YIMBY Score: 3/4<br>Population Growth: 5,646<br>Housing Score: 121.5<br>Burden Change: -4.6 pp","<b>Las Cruces, NM<\/b><br>YIMBY Score: 3/4<br>Population Growth: 9,631<br>Housing Score: 57.6<br>Burden Change: -3 pp","<b>Macon-Bibb County, GA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 3,762<br>Housing Score: 46<br>Burden Change: -1.4 pp","<b>Modesto, CA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 3,531<br>Housing Score: 41.6<br>Burden Change: -0.3 pp","<b>Ocala, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 55,606<br>Housing Score: 170.6<br>Burden Change: 0.7 pp","<b>Orlando-Kissimmee-Sanford, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 308,102<br>Housing Score: 123<br>Burden Change: 1.5 pp","<b>Palm Bay-Melbourne-Titusville, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 54,817<br>Housing Score: 141.1<br>Burden Change: 0.2 pp","<b>Pensacola-Ferry Pass-Brent, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 42,306<br>Housing Score: 74.4<br>Burden Change: -0.5 pp","<b>Pueblo, CO<\/b><br>YIMBY Score: 3/4<br>Population Growth: 2,947<br>Housing Score: 32.4<br>Burden Change: -1.8 pp","<b>Redding, CA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 445<br>Housing Score: 61.4<br>Burden Change: -3.5 pp","<b>Riverside-San Bernardino-Ontario, CA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 107,383<br>Housing Score: 73.9<br>Burden Change: -0.6 pp","<b>Savannah, GA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 37,392<br>Housing Score: 110.5<br>Burden Change: 0.3 pp","<b>Stockton-Lodi, CA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 85,368<br>Housing Score: 37<br>Burden Change: -0.4 pp","<b>Tampa-St. Petersburg-Clearwater, FL<\/b><br>YIMBY Score: 3/4<br>Population Growth: 251,564<br>Housing Score: 106.7<br>Burden Change: 2 pp","<b>Valdosta, GA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 6,052<br>Housing Score: 96.4<br>Burden Change: -0.4 pp","<b>Warner Robins, GA<\/b><br>YIMBY Score: 3/4<br>Population Growth: 8,013<br>Housing Score: 139.9<br>Burden Change: -1.6 pp","<b>Wichita, KS<\/b><br>YIMBY Score: 3/4<br>Population Growth: 6,397<br>Housing Score: 124.1<br>Burden Change: -0.4 pp","<b>Wilmington, NC<\/b><br>YIMBY Score: 3/4<br>Population Growth: 179,181<br>Housing Score: 110.1<br>Burden Change: 0.1 pp","<b>Winston-Salem, NC<\/b><br>YIMBY Score: 3/4<br>Population Growth: 27,897<br>Housing Score: 111<br>Burden Change: -0.7 pp","<b>Yuma, AZ<\/b><br>YIMBY Score: 3/4<br>Population Growth: 5,687<br>Housing Score: 67.4<br>Burden Change: -3.1 pp"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(161,217,155,1)","opacity":0.80000000000000004,"size":[12.401290060330494,21.299397804536014,39.290542260015748,29.224421156041529,21.60340147268866,38.643907447865438,35.315662471334704,18.731000795772299,24.726516696473169,27.472360722933605,11.338582677165356,29.182057098610279,21.311987511910012,18.804369922035036,24.166492348514829,16.513032860884447,49.989567393744792,19.151369366449526,14.389692297623355,17.776641607110928,16.359179975143551,24.100600101942973,19.413974032178395,31.593042284465835,51.725541404151407,23.705483927338044,17.499001836238715,22.610296632961553,43.46058704652858,17.824581065093398,19.901367521130975,16.562810090922113,16.386442747199759,32.168581151103957,60.472440944881896,32.019514863218504,29.492951140849247,15.910317780897854,12.469227644601876,40.320640242557218,28.398539551274837,37.170789283015637,55.731444371052042,18.065566114272517,19.125226120181832,18.26375656003999,48.795877413844586,26.055097614657893,17.849321903293728],"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(161,217,155,1)"}},"hoveron":"points","name":"3/4 (Strong)","legendgroup":"3/4 (Strong)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[123.58773719087324,210.11431875583048,116.72285599003841,134.57253876627914,128.92568503417715,111.13339400421951,115.92838743098726,121.82989012222897,155.07870208696275,291.70728970437403,120.85784049120468,267.99448482251876],"y":[-2.4509419740271667,-2.8366873062863096,-0.10671068227923541,-0.7137783402955411,-1.4637812618948915,-3.7812031671584929,-1.6019323494481519,-1.4008454827030379,-0.10235954294258409,-0.29124259001876496,-0.78011831180120872,-0.99771825656526669],"text":["<b>Brownsville-Harlingen, TX<\/b><br>YIMBY Score: 4/4<br>Population Growth: 2,985<br>Housing Score: 123.6<br>Burden Change: -2.5 pp","<b>Burlington, NC<\/b><br>YIMBY Score: 4/4<br>Population Growth: 16,774<br>Housing Score: 210.1<br>Burden Change: -2.8 pp","<b>Clarksville, TN-KY<\/b><br>YIMBY Score: 4/4<br>Population Growth: 51,259<br>Housing Score: 116.7<br>Burden Change: -0.1 pp","<b>Deltona-Daytona Beach-Ormond Beach, FL<\/b><br>YIMBY Score: 4/4<br>Population Growth: 72,594<br>Housing Score: 134.6<br>Burden Change: -0.7 pp","<b>Fayetteville, NC<\/b><br>YIMBY Score: 4/4<br>Population Growth: 5,674<br>Housing Score: 128.9<br>Burden Change: -1.5 pp","<b>Hinesville, GA<\/b><br>YIMBY Score: 4/4<br>Population Growth: 7,709<br>Housing Score: 111.1<br>Burden Change: -3.8 pp","<b>McAllen-Edinburg-Mission, TX<\/b><br>YIMBY Score: 4/4<br>Population Growth: 37,810<br>Housing Score: 115.9<br>Burden Change: -1.6 pp","<b>Medford, OR<\/b><br>YIMBY Score: 4/4<br>Population Growth: 3,289<br>Housing Score: 121.8<br>Burden Change: -1.4 pp","<b>Port St. Lucie, FL<\/b><br>YIMBY Score: 4/4<br>Population Growth: 63,472<br>Housing Score: 155.1<br>Burden Change: -0.1 pp","<b>Punta Gorda, FL<\/b><br>YIMBY Score: 4/4<br>Population Growth: 24,101<br>Housing Score: 291.7<br>Burden Change: -0.3 pp","<b>Tallahassee, FL<\/b><br>YIMBY Score: 4/4<br>Population Growth: 7,941<br>Housing Score: 120.9<br>Burden Change: -0.8 pp","<b>Urban Honolulu, HI<\/b><br>YIMBY Score: 4/4<br>Population Growth: 758<br>Housing Score: 268<br>Burden Change: -1 pp"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,109,44,1)","opacity":0.80000000000000004,"size":[15.942796397119249,22.711427537413147,31.33349889099593,35.152872706018918,17.841487438481686,18.970596772158775,28.494350566417751,16.194811763761766,33.600195721345244,25.006244167844017,19.088882195090758,13.270710828006415],"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,109,44,1)"}},"hoveron":"points","name":"4/4 (Complete)","legendgroup":"4/4 (Complete)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":90,"r":180,"b":80,"l":90},"font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241},"title":{"text":"Housing Growth vs. Rent Burden Outcomes","font":{"color":"black","family":"","size":17},"x":0.5,"xref":"paper","xanchor":"center"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,310],"tickmode":"array","ticktext":["0","50","100","150","200","250","300"],"tickvals":[0,49.999999999999993,100,150,200,250,300],"categoryorder":"array","categoryarray":["0","50","100","150","200","250","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.9850560398505603,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.72455564360919278,"zeroline":false,"anchor":"y","title":{"text":"Housing Growth Composite Score (100 = National Average)","font":{"color":"rgba(0,0,0,1)","family":"","size":11}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-10.4,10.4],"tickmode":"array","ticktext":["-10.0","-7.5","-5.0","-2.5","0.0","2.5","5.0","7.5","10.0"],"tickvals":[-10,-7.5,-5,-2.5,0,2.5,5,7.4999999999999982,9.9999999999999982],"categoryorder":"array","categoryarray":["-10.0","-7.5","-5.0","-2.5","0.0","2.5","5.0","7.5","10.0"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.9850560398505608,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.72455564360919289,"zeroline":false,"anchor":"x","title":{"text":"Change in Rent Burden (pp), 2023 vs 2014-2016<br>Negative = Improvement","font":{"color":"rgba(0,0,0,1)","family":"","size":11}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,0.9)","bordercolor":"lightgray","borderwidth":1,"font":{"color":"rgba(0,0,0,1)","family":"","size":11},"title":{"text":"YIMBY Score","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"x":1.02,"y":0.97999999999999998,"xanchor":"left","yanchor":"top"},"hovermode":"closest","barmode":"relative","hoverlabel":{"bgcolor":"white","font":{"size":13,"color":"black"},"bordercolor":"gray","align":"left"}},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":true,"modeBarButtonsToRemove":["select2d","lasso2d","toggleSpikelines"],"displaylogo":false},"source":"A","attrs":{"a816d379c90":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"},"a8163e07b8b7":{"yintercept":{}},"a8166cf01631":{"xintercept":{}},"a81664122d7":{"xmin":{},"xmax":{},"ymin":{},"ymax":{}},"a8161e565476":{"x":{},"y":{}},"a81635c31e89":{"x":{},"y":{}},"a8161d09cff2":{"x":{},"y":{}},"a8166f3327c2":{"x":{},"y":{}},"a8167776a97":{"x":{},"y":{},"colour":{},"size":{},"text":{}}},"cur_data":"a816d379c90","visdat":{"a816d379c90":["function (y) ","x"],"a8163e07b8b7":["function (y) ","x"],"a8166cf01631":["function (y) ","x"],"a81664122d7":["function (y) ","x"],"a8161e565476":["function (y) ","x"],"a81635c31e89":["function (y) ","x"],"a8161d09cff2":["function (y) ","x"],"a8166f3327c2":["function (y) ","x"],"a8167776a97":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Notes</strong></p>
<ul>
<li><strong>Q1 (upper-right)</strong>: Building but burden rising</li>
<li><strong>Q2 (upper-left)</strong>: Low building + Worsening</li>
<li><strong>Q3 (lower-left)</strong>: Improving without building</li>
<li><strong>Q4 (lower-right)</strong>: YIMBY SUCCESS (High building + Improving)</li>
<li><strong>Circle</strong> size represents absolute population growth 2018-2023. Larger circles imply higher population growth.</li>
<li><strong>Periods</strong>: Early = 2014-2016 avg, Late = 2021-2023 avg.</li>
</ul>
<hr>
<section id="the-q3-quandary-improving-without-building" class="level4">
<h4 class="anchored" data-anchor-id="the-q3-quandary-improving-without-building"><strong>The Q3 Quandary: Improving Without Building</strong></h4>
<p>Some metros became more affordable without building new homes, but this wasnâ€™t circumstance. It occured due to two factors:</p>
<ul>
<li><strong>Population Loss</strong>: Metros like those in the Rust Belt lost residents, reducing housing demand. (Note: These metros technically fail C3 and should not appear in the 3/4 or 4/4 groups under analysis.)</li>
<li><strong>Wages Increased</strong>: A few metros had sudden industry surges (like energy), raising salaries faster than rent, but these gains are volatile and sector-specific.</li>
</ul>
<p>However, these outcomes are unrealistic. A growing metro canâ€™t gamble on â€œlosing peopleâ€ to address housing issues. For metros experience population influxes, building more remains the only feasible solution. Therefore, Q4 (YIMBY successâ€”building metros) remains the only sustainable model for identified growth metros.</p>
<hr>
</section>
</section>
<section id="visualization-2-distribution-by-criteria-met" class="level3">
<h3 class="anchored" data-anchor-id="visualization-2-distribution-by-criteria-met"><strong>Visualization 2: Distribution by Criteria Met</strong></h3>
<p>This boxplot shows how rent burden change varies by the number of YIMBY criteria met across all metros.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task6-plot2</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show code"</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.width: 10</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.height: 6</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate summary statistics for labels</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>summary_by_score <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yimby_score) <span class="sc">%&gt;%</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_change =</span> <span class="fu">median</span>(rent_burden_change, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">yimby_label =</span> <span class="fu">paste0</span>(yimby_score, <span class="st">"/4</span><span class="sc">\n</span><span class="st">(n="</span>, n, <span class="st">")"</span>)</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Create boxplot</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(combined_analysis, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(yimby_score), <span class="at">y =</span> rent_burden_change)) <span class="sc">+</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">factor</span>(yimby_score)),</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.7</span>,</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlier.alpha =</span> <span class="fl">0.3</span>,</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlier.size =</span> <span class="fl">1.5</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add median value labels</span></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> median,</span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"text"</span>,</span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(<span class="fu">after_stat</span>(y), <span class="dv">1</span>)),</span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">3.5</span>,</span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span></span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a>      <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"#006d2c"</span>,  <span class="co"># Rich dark green</span></span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a>      <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"#a1d99b"</span>,  <span class="co"># Soft light green</span></span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a>      <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"#fee090"</span>,</span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>      <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"#fc8d59"</span>,</span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a>      <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"#d73027"</span></span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">guide =</span> <span class="st">"none"</span></span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> summary_by_score<span class="sc">$</span>yimby_label</span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Rent Burden Change by YIMBY Criteria Met"</span>,</span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Distribution of burden change for metros meeting 0-4 criteria | Numbers show median values</span><span class="sc">\n</span><span class="st">Dashed red line at 0 = no change | Negative values = improvement"</span>,</span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"YIMBY Score (number of criteria met)"</span>,</span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Change in Rent Burden (pp), 2023 vs 2014-2016</span><span class="sc">\n</span><span class="st">Negative = Improvement"</span>,</span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Box shows interquartile range; whiskers extend to 1.5Ã—IQR</span><span class="sc">\n</span><span class="st">Higher YIMBY scores correlate with greater rent burden improvements"</span></span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb41-62"><a href="#cb41-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb41-63"><a href="#cb41-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb41-64"><a href="#cb41-64" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="interpretation-and-policy-implications" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-and-policy-implications"><strong>Interpretation and Policy Implications</strong></h3>
<p>Across the sample, 12 metros meeting all 4 criteria cut rent burden by ~1.4 pp between 2014â€“2016 and 2021â€“2023 despite population growth. As a result, there is clear evidence that sustained building can relieve affordability pressure.</p>
<p><strong>The Data Story</strong></p>
<ul>
<li><strong>Where it works</strong>: Success clusters in the Southeast/Sunbelt and a few high-growth markets, with faster permitting and fewer density constraints.</li>
<li><strong>More criteria, bigger gains</strong>: The more YIMBY criteria a metro meets, the larger the burden improvement; 4/4 metros outperform lower scorers.</li>
<li><strong>Mechanism</strong>: â€œQ4â€ metros (high building + improving burden) absorbed growth without proportional rent increases.</li>
<li><strong>Timing</strong>: Gains materialize over ~7â€“9 years, and likely compound with continued permitting.</li>
</ul>
<p>The policy implication is clear: regulatory reform that enables sustained construction may lead to improved affordability within a 7-9 year timeframe.</p>
<hr>
</section>
</section>
<section id="task-7-policy-brief---sponsor-city-selection" class="level2">
<h2 class="anchored" data-anchor-id="task-7-policy-brief---sponsor-city-selection">Task 7: Policy Brief - Sponsor City Selection</h2>
<section id="primary-sponsor-yimby-success-city" class="level3">
<h3 class="anchored" data-anchor-id="primary-sponsor-yimby-success-city">Primary Sponsor: YIMBY Success City</h3>
<p>Building on Task 6 outcomes,<strong>Punta Gorda, FL</strong> is the flagship YIMBY success story. This metro meets all four YIMBY tests: high early burden, burden fell (-0.3 pp), strong growth (+13.2%), and nation-leading building (housing index ~292).</p>
<p>A key takeaway is that when metros build at scale, they can grow and keep rents in check.</p>
<hr>
</section>
<section id="co-sponsor-opportunity-city-selection" class="level3">
<h3 class="anchored" data-anchor-id="co-sponsor-opportunity-city-selection">Co-Sponsor: Opportunity City Selection</h3>
<p>To identify optimal co-sponsor cities, analysis refinements are necessary to target metros exhibiting the inverse pattern, specifically fast-growing metros with reduced affordability and lagging construction lags. A simple three-part test will seek to uncover:</p>
<ul>
<li>Population growth (real demand),</li>
<li>Burden flat/worse (no relief), and</li>
<li>Below-average building (under-supply).</li>
</ul>
<p>Metros that exhibit these indicators are on a potential path to crisis, making them the best candidates for a federal YIMBY incentive to enhance supply and shift rents down.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task7-nimby-table</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate NIMBY candidates (from previous analysis)</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>nimby_candidates <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(criterion3 <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(criterion2 <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(criterion4 <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(population <span class="sc">&gt;=</span> <span class="dv">500000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">!=</span> <span class="st">"FL"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rent_burden_change <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">metro_clean =</span> <span class="fu">str_remove</span>(NAME, <span class="st">" Metro Area"</span>),</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">current_burden =</span> gap_late,</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_millions =</span> population <span class="sc">/</span> <span class="dv">1000000</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(rent_burden_change)) <span class="sc">%&gt;%</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(metro_clean, state, current_burden, rent_burden_change,</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>         pop_growth_rate, pop_millions, composite_score)</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Display table</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>display_nimby <span class="ot">&lt;-</span> nimby_candidates <span class="sc">%&gt;%</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metro =</span> metro_clean,</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">State =</span> state,</span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Burden (pp)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(current_burden, <span class="dv">1</span>),</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Worsened (pp)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(rent_burden_change, <span class="dv">1</span>),</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Pop (M)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(pop_millions, <span class="dv">1</span>),</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Growth (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(pop_growth_rate, <span class="dv">1</span>),</span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Housing</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(composite_score, <span class="dv">0</span>)</span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a>  display_nimby,</span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb42-39"><a href="#cb42-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">5</span>,</span>
<span id="cb42-40"><a href="#cb42-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'ltp'</span>, </span>
<span id="cb42-41"><a href="#cb42-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb42-42"><a href="#cb42-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb42-43"><a href="#cb42-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-left'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>)</span>
<span id="cb42-44"><a href="#cb42-44" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb42-45"><a href="#cb42-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb42-46"><a href="#cb42-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb42-47"><a href="#cb42-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;'</span>,</span>
<span id="cb42-48"><a href="#cb42-48" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Table 1: Opportunity Cities: Metros Where Affordability is Worsening"</span>,</span>
<span id="cb42-49"><a href="#cb42-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HTML</span>(<span class="st">"&lt;br&gt;&lt;span style='font-size: 0.85em; font-weight: normal; color: #666;'&gt;</span></span>
<span id="cb42-50"><a href="#cb42-50" aria-hidden="true" tabindex="-1"></a><span class="st">         Growing cities with worsening burden and insufficient building | Sorted by magnitude of burden increase | M = Millions&lt;/span&gt;"</span>)</span>
<span id="cb42-51"><a href="#cb42-51" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb42-52"><a href="#cb42-52" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb42-53"><a href="#cb42-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(<span class="st">"Worsened (pp)"</span>, <span class="at">backgroundColor =</span> <span class="st">"#ffc107"</span>, <span class="at">fontWeight =</span> <span class="st">"bold"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-54"><a href="#cb42-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(<span class="st">"Housing"</span>, <span class="at">color =</span> <span class="fu">styleInterval</span>(<span class="dv">90</span>, <span class="fu">c</span>(<span class="st">"#dc3545"</span>, <span class="st">"#6c757d"</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-cffd5e6dc73bb49aa32d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-cffd5e6dc73bb49aa32d">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">\n  Table 1: Opportunity Cities: Metros Where Affordability is Worsening\n  <br><span style='font-size: 0.85em; font-weight: normal; color: #666;'>\n         Growing cities with worsening burden and insufficient building | Sorted by magnitude of burden increase | M = Millions<\/span>\n<\/caption>","data":[[1,2,3,4,5,6,7,8,9,10],["Atlanta-Sandy Springs-Roswell, GA","Colorado Springs, CO","Boston-Cambridge-Newton, MA-NH","Baton Rouge, LA","Minneapolis-St. Paul-Bloomington, MN-WI","San Antonio-New Braunfels, TX","Columbus, OH","Spokane-Spokane Valley, WA","Kansas City, MO-KS","Seattle-Tacoma-Bellevue, WA"],["GA","CO","MA","LA","MN","TX","OH","WA","MO","WA"],[-6.4,-7.3,-8.800000000000001,-9.5,-12.4,-8.6,-11.3,-9.699999999999999,-11.8,-9.199999999999999],[3,2.5,1.4,1.3,1.2,1,0.9,0.9,0.8,0.7],[6.3,0.8,4.9,0.9,3.7,2.7,2.2,0.6,2.2,4],[12.4,6.2,1.7,4.7,3.1,9.300000000000001,4.9,6.4,4.4,4.6],[84,99,41,56,81,85,78,94,51,64]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Rank<\/th>\n      <th>Metro<\/th>\n      <th>State<\/th>\n      <th>Burden (pp)<\/th>\n      <th>Worsened (pp)<\/th>\n      <th>Pop (M)<\/th>\n      <th>Growth (%)<\/th>\n      <th>Housing<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"ltp","ordering":false,"columnDefs":[{"className":"dt-left","targets":"_all"},{"name":"Rank","targets":0},{"name":"Metro","targets":1},{"name":"State","targets":2},{"name":"Burden (pp)","targets":3},{"name":"Worsened (pp)","targets":4},{"name":"Pop (M)","targets":5},{"name":"Growth (%)","targets":6},{"name":"Housing","targets":7}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'font-weight':'bold','background-color':'#ffc107'});\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'color':isNaN(parseFloat(value)) ? '' : value <= 90 ? \"#dc3545\" : \"#6c757d\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p><strong>Recommended Co-Sponsor:</strong> <strong>Atlanta, GA Metro</strong> â€” With 6.3 million residents and 12.4% population growth, this metro highlights a booming area where rent burden worsened by 3.0 pp due to below-average housing construction (score: 84). This profile is highly attractive to a policy bill that can support a metro candidate with federal incentives to unlock housing supply to reduce rents.</p>
<hr>
</section>
<section id="federal-yimby-bill-proposal-success-stories-vs.-opportunity-cities" class="level3">
<h3 class="anchored" data-anchor-id="federal-yimby-bill-proposal-success-stories-vs.-opportunity-cities">Federal YIMBY Bill Proposal: Success Stories vs.&nbsp;Opportunity Cities</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task7-side-by-side-comparison</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Preparation</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>yimby_success <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yimby_score <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(composite_score)) <span class="sc">%&gt;%</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">metro_clean     =</span> <span class="fu">str_remove</span>(NAME, <span class="st">" Metro Area"</span>),</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">burden_display  =</span> <span class="fu">round</span>(rent_burden_change, <span class="dv">1</span>),</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">housing_display =</span> <span class="fu">round</span>(composite_score, <span class="dv">1</span>)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(metro_clean, state, burden_display, housing_display) <span class="sc">%&gt;%</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>nimby_opportunity <span class="ot">&lt;-</span> nimby_candidates <span class="sc">%&gt;%</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(rent_burden_change)) <span class="sc">%&gt;%</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">burden_display  =</span> <span class="fu">round</span>(rent_burden_change, <span class="dv">1</span>),</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">housing_display =</span> <span class="fu">round</span>(composite_score, <span class="dv">0</span>)</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(metro_clean, state, burden_display, housing_display) <span class="sc">%&gt;%</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">rank                =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">success_metro       =</span> <span class="fu">paste0</span>(yimby_success<span class="sc">$</span>metro_clean, <span class="st">", "</span>, yimby_success<span class="sc">$</span>state),</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">burden_change_s     =</span> <span class="fu">paste0</span>(yimby_success<span class="sc">$</span>burden_display, <span class="st">" pp"</span>),</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">housing_s           =</span> yimby_success<span class="sc">$</span>housing_display,</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">opportunity_metro   =</span> <span class="fu">paste0</span>(nimby_opportunity<span class="sc">$</span>metro_clean, <span class="st">", "</span>, nimby_opportunity<span class="sc">$</span>state),</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">burden_change_o     =</span> <span class="fu">paste0</span>(<span class="st">"+"</span>, nimby_opportunity<span class="sc">$</span>burden_display, <span class="st">" pp"</span>),</span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">housing_o           =</span> nimby_opportunity<span class="sc">$</span>housing_display</span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a><span class="co"># add star to rank 1 success metro</span></span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>tbl<span class="sc">$</span>success_metro[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(tbl<span class="sc">$</span>success_metro[<span class="dv">1</span>], <span class="st">" â˜…"</span>)</span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- render with gt ----</span></span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>gt_tbl <span class="ot">&lt;-</span> tbl <span class="sc">%&gt;%</span></span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align =</span> <span class="st">"left"</span>,</span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>,</span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">14</span>)   </span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 2: Federal YIMBY Bill Proposal: Rewarding Success, Catalyzing Change**"</span>)</span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make column headers bold</span></span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()</span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># column labels</span></span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank              =</span> <span class="st">"Rank"</span>,</span>
<span id="cb43-58"><a href="#cb43-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">success_metro     =</span> <span class="st">"Success Story Metro"</span>,</span>
<span id="cb43-59"><a href="#cb43-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">burden_change_s   =</span> <span class="st">"Burden Change"</span>,</span>
<span id="cb43-60"><a href="#cb43-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">housing_s         =</span> <span class="st">"Housing"</span>,</span>
<span id="cb43-61"><a href="#cb43-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">opportunity_metro =</span> <span class="st">"Opportunity City Metro"</span>,</span>
<span id="cb43-62"><a href="#cb43-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">burden_change_o   =</span> <span class="st">"Burden Change"</span>,</span>
<span id="cb43-63"><a href="#cb43-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">housing_o         =</span> <span class="st">"Housing"</span></span>
<span id="cb43-64"><a href="#cb43-64" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-65"><a href="#cb43-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># spanners (group headers)</span></span>
<span id="cb43-66"><a href="#cb43-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb43-67"><a href="#cb43-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Grant Recipients (4/4 YIMBY Success)"</span>,</span>
<span id="cb43-68"><a href="#cb43-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(success_metro, burden_change_s, housing_s)</span>
<span id="cb43-69"><a href="#cb43-69" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-70"><a href="#cb43-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb43-71"><a href="#cb43-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Priority Cities (Worsening Burden)"</span>,</span>
<span id="cb43-72"><a href="#cb43-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(opportunity_metro, burden_change_o, housing_o)</span>
<span id="cb43-73"><a href="#cb43-73" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-74"><a href="#cb43-74" aria-hidden="true" tabindex="-1"></a>  <span class="co"># widths</span></span>
<span id="cb43-75"><a href="#cb43-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_width</span>(</span>
<span id="cb43-76"><a href="#cb43-76" aria-hidden="true" tabindex="-1"></a>    rank <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">48</span>),</span>
<span id="cb43-77"><a href="#cb43-77" aria-hidden="true" tabindex="-1"></a>    success_metro <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">240</span>),</span>
<span id="cb43-78"><a href="#cb43-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(burden_change_s, housing_s) <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">70</span>),</span>
<span id="cb43-79"><a href="#cb43-79" aria-hidden="true" tabindex="-1"></a>    opportunity_metro <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">240</span>),</span>
<span id="cb43-80"><a href="#cb43-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(burden_change_o, housing_o) <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">70</span>)</span>
<span id="cb43-81"><a href="#cb43-81" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-82"><a href="#cb43-82" aria-hidden="true" tabindex="-1"></a>  <span class="co"># alignment</span></span>
<span id="cb43-83"><a href="#cb43-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">"left"</span>, <span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb43-84"><a href="#cb43-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">"center"</span>, <span class="at">columns =</span> rank) <span class="sc">%&gt;%</span></span>
<span id="cb43-85"><a href="#cb43-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">"left"</span>,</span>
<span id="cb43-86"><a href="#cb43-86" aria-hidden="true" tabindex="-1"></a>             <span class="at">columns =</span> <span class="fu">c</span>(burden_change_s, housing_s, burden_change_o, housing_o)) <span class="sc">%&gt;%</span></span>
<span id="cb43-87"><a href="#cb43-87" aria-hidden="true" tabindex="-1"></a>  <span class="co"># left border before Opportunity columns</span></span>
<span id="cb43-88"><a href="#cb43-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb43-89"><a href="#cb43-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_borders</span>(<span class="at">sides =</span> <span class="st">"left"</span>, <span class="at">color =</span> <span class="st">"#dee2e6"</span>, <span class="at">weight =</span> <span class="fu">px</span>(<span class="dv">2</span>)),</span>
<span id="cb43-90"><a href="#cb43-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">list</span>(</span>
<span id="cb43-91"><a href="#cb43-91" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cells_body</span>(<span class="at">columns =</span> opportunity_metro),</span>
<span id="cb43-92"><a href="#cb43-92" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> opportunity_metro)</span>
<span id="cb43-93"><a href="#cb43-93" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb43-94"><a href="#cb43-94" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-95"><a href="#cb43-95" aria-hidden="true" tabindex="-1"></a>  <span class="co"># row striping</span></span>
<span id="cb43-96"><a href="#cb43-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_row_striping</span>() <span class="sc">%&gt;%</span></span>
<span id="cb43-97"><a href="#cb43-97" aria-hidden="true" tabindex="-1"></a>  <span class="co"># highlight rank 1 row</span></span>
<span id="cb43-98"><a href="#cb43-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb43-99"><a href="#cb43-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(<span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#d4edda"</span>), <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>)),</span>
<span id="cb43-100"><a href="#cb43-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> rank <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb43-101"><a href="#cb43-101" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-102"><a href="#cb43-102" aria-hidden="true" tabindex="-1"></a>  <span class="co"># light background for spanner row</span></span>
<span id="cb43-103"><a href="#cb43-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb43-104"><a href="#cb43-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#f8f9fa"</span>),</span>
<span id="cb43-105"><a href="#cb43-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_spanners</span>(</span>
<span id="cb43-106"><a href="#cb43-106" aria-hidden="true" tabindex="-1"></a>      <span class="at">spanners =</span> <span class="fu">c</span>(<span class="st">"Grant Recipients (4/4 YIMBY Success)"</span>,</span>
<span id="cb43-107"><a href="#cb43-107" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Priority Cities (Worsening Burden)"</span>)</span>
<span id="cb43-108"><a href="#cb43-108" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb43-109"><a href="#cb43-109" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-110"><a href="#cb43-110" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Source note at bottom</span></span>
<span id="cb43-111"><a href="#cb43-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb43-112"><a href="#cb43-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span>(<span class="st">"**Note:** Burden Change = Change in rent burden (pp), 2023 vs 2014â€“2016. Negative = improvement. Housing = Composite growth score (100 = national avg)."</span>)</span>
<span id="cb43-113"><a href="#cb43-113" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-114"><a href="#cb43-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-115"><a href="#cb43-115" aria-hidden="true" tabindex="-1"></a>gt_tbl</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="hfxdenbmdy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hfxdenbmdy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hfxdenbmdy thead, #hfxdenbmdy tbody, #hfxdenbmdy tfoot, #hfxdenbmdy tr, #hfxdenbmdy td, #hfxdenbmdy th {
  border-style: none;
}

#hfxdenbmdy p {
  margin: 0;
  padding: 0;
}

#hfxdenbmdy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 14px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hfxdenbmdy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hfxdenbmdy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hfxdenbmdy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hfxdenbmdy .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hfxdenbmdy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hfxdenbmdy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hfxdenbmdy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hfxdenbmdy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hfxdenbmdy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hfxdenbmdy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hfxdenbmdy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hfxdenbmdy .gt_spanner_row {
  border-bottom-style: hidden;
}

#hfxdenbmdy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hfxdenbmdy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hfxdenbmdy .gt_from_md > :first-child {
  margin-top: 0;
}

#hfxdenbmdy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hfxdenbmdy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hfxdenbmdy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hfxdenbmdy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hfxdenbmdy .gt_row_group_first td {
  border-top-width: 2px;
}

#hfxdenbmdy .gt_row_group_first th {
  border-top-width: 2px;
}

#hfxdenbmdy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hfxdenbmdy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hfxdenbmdy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hfxdenbmdy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hfxdenbmdy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hfxdenbmdy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hfxdenbmdy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hfxdenbmdy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hfxdenbmdy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hfxdenbmdy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hfxdenbmdy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hfxdenbmdy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hfxdenbmdy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hfxdenbmdy .gt_left {
  text-align: left;
}

#hfxdenbmdy .gt_center {
  text-align: center;
}

#hfxdenbmdy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hfxdenbmdy .gt_font_normal {
  font-weight: normal;
}

#hfxdenbmdy .gt_font_bold {
  font-weight: bold;
}

#hfxdenbmdy .gt_font_italic {
  font-style: italic;
}

#hfxdenbmdy .gt_super {
  font-size: 65%;
}

#hfxdenbmdy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hfxdenbmdy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hfxdenbmdy .gt_indent_1 {
  text-indent: 5px;
}

#hfxdenbmdy .gt_indent_2 {
  text-indent: 10px;
}

#hfxdenbmdy .gt_indent_3 {
  text-indent: 15px;
}

#hfxdenbmdy .gt_indent_4 {
  text-indent: 20px;
}

#hfxdenbmdy .gt_indent_5 {
  text-indent: 25px;
}

#hfxdenbmdy .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hfxdenbmdy div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="7" class="gt_heading gt_title gt_font_normal gt_bottom_border"><strong>Table 2: Federal YIMBY Bill Proposal: Rewarding Success, Catalyzing Change</strong></td>
</tr>
<tr class="gt_col_headings gt_spanner_row even">
<th rowspan="2" id="rank" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Rank</th>
<th colspan="3" id="Grant Recipients (4/4 YIMBY Success)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="background-color: #F8F9FA" scope="colgroup"><div class="gt_column_spanner">
Grant Recipients (4/4 YIMBY Success)
</div></th>
<th colspan="3" id="Priority Cities (Worsening Burden)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="background-color: #F8F9FA" scope="colgroup"><div class="gt_column_spanner">
Priority Cities (Worsening Burden)
</div></th>
</tr>
<tr class="gt_col_headings header">
<th id="success_metro" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Success Story Metro</th>
<th id="burden_change_s" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Burden Change</th>
<th id="housing_s" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Housing</th>
<th id="opportunity_metro" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold; border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6" scope="col">Opportunity City Metro</th>
<th id="burden_change_o" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Burden Change</th>
<th id="housing_o" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Housing</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="rank" style="background-color: #D4EDDA; font-weight: bold">1</td>
<td class="gt_row gt_left" headers="success_metro" style="background-color: #D4EDDA; font-weight: bold">Punta Gorda, FL, FL â˜…</td>
<td class="gt_row gt_left" headers="burden_change_s" style="background-color: #D4EDDA; font-weight: bold">-0.3 pp</td>
<td class="gt_row gt_left" headers="housing_s" style="background-color: #D4EDDA; font-weight: bold">291.7</td>
<td class="gt_row gt_left" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6; background-color: #D4EDDA; font-weight: bold">Atlanta-Sandy Springs-Roswell, GA, GA</td>
<td class="gt_row gt_left" headers="burden_change_o" style="background-color: #D4EDDA; font-weight: bold">+3 pp</td>
<td class="gt_row gt_left" headers="housing_o" style="background-color: #D4EDDA; font-weight: bold">84</td>
</tr>
<tr class="even">
<td class="gt_row gt_center gt_striped" headers="rank">2</td>
<td class="gt_row gt_left gt_striped" headers="success_metro">Urban Honolulu, HI, HI</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_s">-1 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_s">268.0</td>
<td class="gt_row gt_left gt_striped" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">Colorado Springs, CO, CO</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_o">+2.5 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_o">99</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="rank">3</td>
<td class="gt_row gt_left" headers="success_metro">Burlington, NC, NC</td>
<td class="gt_row gt_left" headers="burden_change_s">-2.8 pp</td>
<td class="gt_row gt_left" headers="housing_s">210.1</td>
<td class="gt_row gt_left" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">Boston-Cambridge-Newton, MA-NH, MA</td>
<td class="gt_row gt_left" headers="burden_change_o">+1.4 pp</td>
<td class="gt_row gt_left" headers="housing_o">41</td>
</tr>
<tr class="even">
<td class="gt_row gt_center gt_striped" headers="rank">4</td>
<td class="gt_row gt_left gt_striped" headers="success_metro">Port St. Lucie, FL, FL</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_s">-0.1 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_s">155.1</td>
<td class="gt_row gt_left gt_striped" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">Baton Rouge, LA, LA</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_o">+1.3 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_o">56</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="rank">5</td>
<td class="gt_row gt_left" headers="success_metro">Deltona-Daytona Beach-Ormond Beach, FL, FL</td>
<td class="gt_row gt_left" headers="burden_change_s">-0.7 pp</td>
<td class="gt_row gt_left" headers="housing_s">134.6</td>
<td class="gt_row gt_left" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">Minneapolis-St. Paul-Bloomington, MN-WI, MN</td>
<td class="gt_row gt_left" headers="burden_change_o">+1.2 pp</td>
<td class="gt_row gt_left" headers="housing_o">81</td>
</tr>
<tr class="even">
<td class="gt_row gt_center gt_striped" headers="rank">6</td>
<td class="gt_row gt_left gt_striped" headers="success_metro">Fayetteville, NC, NC</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_s">-1.5 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_s">128.9</td>
<td class="gt_row gt_left gt_striped" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">San Antonio-New Braunfels, TX, TX</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_o">+1 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_o">85</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="rank">7</td>
<td class="gt_row gt_left" headers="success_metro">Brownsville-Harlingen, TX, TX</td>
<td class="gt_row gt_left" headers="burden_change_s">-2.5 pp</td>
<td class="gt_row gt_left" headers="housing_s">123.6</td>
<td class="gt_row gt_left" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">Columbus, OH, OH</td>
<td class="gt_row gt_left" headers="burden_change_o">+0.9 pp</td>
<td class="gt_row gt_left" headers="housing_o">78</td>
</tr>
<tr class="even">
<td class="gt_row gt_center gt_striped" headers="rank">8</td>
<td class="gt_row gt_left gt_striped" headers="success_metro">Medford, OR, OR</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_s">-1.4 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_s">121.8</td>
<td class="gt_row gt_left gt_striped" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">Spokane-Spokane Valley, WA, WA</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_o">+0.9 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_o">94</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="rank">9</td>
<td class="gt_row gt_left" headers="success_metro">Tallahassee, FL, FL</td>
<td class="gt_row gt_left" headers="burden_change_s">-0.8 pp</td>
<td class="gt_row gt_left" headers="housing_s">120.9</td>
<td class="gt_row gt_left" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">Kansas City, MO-KS, MO</td>
<td class="gt_row gt_left" headers="burden_change_o">+0.8 pp</td>
<td class="gt_row gt_left" headers="housing_o">51</td>
</tr>
<tr class="even">
<td class="gt_row gt_center gt_striped" headers="rank">10</td>
<td class="gt_row gt_left gt_striped" headers="success_metro">Clarksville, TN-KY, TN</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_s">-0.1 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_s">116.7</td>
<td class="gt_row gt_left gt_striped" headers="opportunity_metro" style="border-left-width: 2px; border-left-style: solid; border-left-color: #dee2e6">Seattle-Tacoma-Bellevue, WA, WA</td>
<td class="gt_row gt_left gt_striped" headers="burden_change_o">+0.7 pp</td>
<td class="gt_row gt_left gt_striped" headers="housing_o">64</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="7" class="gt_sourcenote"><strong>Note:</strong> Burden Change = Change in rent burden (pp), 2023 vs 2014â€“2016. Negative = improvement. Housing = Composite growth score (100 = national avg).</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Policy Implication:</strong> : When metros scale building, they can hold rent burden down even while growing (Punta Gorda). Conversely, metros that under-build result in burden increases despite growth (Atlanta).</p>
<p>A federal YIMBY grant would help â€œopportunityâ€ metros follow a success path by incentivizing pro-building local reforms and rewarding measurable progress.</p>
</section>
</section>
<section id="determining-a-yimby-to-nimby-comparison" class="level2">
<h2 class="anchored" data-anchor-id="determining-a-yimby-to-nimby-comparison">Determining a YIMBY-to-NIMBY Comparison</h2>
<p>A comprehensive review of every major two-digit NAICS sector was necessary to avoid arbitrary selection. The pattern is consistent: rent-sensitive, locally-serving sectors, specifically <strong>Accommodation &amp; Food (NAICS 72)</strong> and <strong>Retail (NAICS 44)</strong>, show the largest ATL-PG rent-share gaps, while high-wage tradables show little or no difference. These two sectors also employ large, reputable coalitions in both metros.</p>
</section>
<section id="calculation-process" class="level2">
<h2 class="anchored" data-anchor-id="calculation-process">Calculation Process</h2>
<ol type="1">
<li>Choosing a Single Year</li>
</ol>
<p>The focus year is <strong>2023</strong> for both metros (excluding <strong>2020</strong> elsewhere due to COVID artifacts).</p>
<ol start="2" type="1">
<li>Metro-level Rent (ACS B25064: median <strong>monthly</strong> rent)</li>
</ol>
<p><span class="math display">\[
\text{AnnualRent}_{m} = 12 \times \text{Rent}_{m}
\]</span></p>
<ol start="3" type="1">
<li>Sector-level wage (BLS QCEW), by two-digit NAICS root (e.g., 72 or 44)</li>
</ol>
<p>Aggregate all sub-industries whose code <strong>starts with</strong> the root, then compute the employment-weighted average wage:</p>
<p><span class="math display">\[
\text{AvgWage}*{m,s} = \frac{\sum \text{TOTAL WAGES}*{m,s}}{\sum \text{EMPLOYMENT}*{m,s}}
\]</span></p>
<ol start="4" type="1">
<li>Rent Burden Calculation (rent share of wage)</li>
</ol>
<p><span class="math display">\[
\text{RentShare}_{m,s} =
\frac{\text{AnnualRent}_{m}}{\text{AvgWage}_{m,s}}
\]</span> <em>(Interpretation: e.g., (0.34 = 34%) of an average sector wage goes to median rent.)</em></p>
<ol start="5" type="1">
<li>Cross-city Rent-burden Gap (percentage points)</li>
</ol>
<p>For <strong>Atlanta minus Punta Gorda</strong>:</p>
<p><span class="math display">\[
\text{Gap}_{\text{ATL}-\text{PG},\,s}
= \Big(\text{RentShare}_{\text{ATL},s} -
\text{RentShare}_{\text{PG},s}\Big)\times100\
\]</span></p>
<ul>
<li>Positive: Atlanta more rent-burdened for sector (s)</li>
<li>Negative: Punta Gorda more rent-burdened</li>
</ul>
<hr>
<p><strong>Symbols:</strong> (m) = metro; (s) = sector (two-digit NAICS root); <strong>Rent</strong> = median monthly rent; <strong>AnnualRent</strong> = (12)Rent; <strong>AvgWage</strong> = employment-weighted average annual wage; <strong>Gap</strong> reported in <strong>percentage points (pp)</strong>.</p>
<hr>
<p>To identify the most compelling occupations for coalition-building, the rent burden analysis in the table below shows all major economic sectors ranked by the size of the Atlanta-Punta Gorda rent burden gap.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top-10 sectors by ATL vs PG rent-burden gap (2023)</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper: first existing column name</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>pick_col <span class="ot">&lt;-</span> <span class="cf">function</span>(df, candidates, err_msg){</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  nm <span class="ot">&lt;-</span> <span class="fu">intersect</span>(candidates, <span class="fu">names</span>(df))</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(nm) <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">stop</span>(err_msg, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  nm[[<span class="dv">1</span>]]</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Metro targets (CBSA + BLS FIPS-4 prefixes)</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>metros <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>metro_key, <span class="sc">~</span>metro_label,                                        <span class="sc">~</span>cbsa,  <span class="sc">~</span>fips4,</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ATL"</span>,      <span class="st">"Atlantaâ€“Sandy Springsâ€“Alpharetta, GA Metro Area"</span>,   <span class="dv">12060</span>L, <span class="st">"C1206"</span>,</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PG"</span>,       <span class="st">"Punta Gorda, FL Metro Area"</span>,                        <span class="dv">39460</span>L, <span class="st">"C3946"</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Nice names for 2-digit (and combo) NAICS roots</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>naics_sector_name <span class="ot">&lt;-</span> <span class="cf">function</span>(root_chr){</span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(root_chr, <span class="st">"[^0-9]"</span>, <span class="st">"-"</span>)</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">case_when</span>(</span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"23"</span>    <span class="sc">~</span> <span class="st">"Construction"</span>,</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"31"</span>,<span class="st">"32"</span>,<span class="st">"33"</span>) <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"Manufacturing ("</span>, r, <span class="st">")"</span>),</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"31-33"</span> <span class="sc">~</span> <span class="st">"Manufacturing"</span>,</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"42"</span>    <span class="sc">~</span> <span class="st">"Wholesale Trade"</span>,</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"44"</span>    <span class="sc">~</span> <span class="st">"Retail: Autos/Groceries/Gas/Clothing (44xx)"</span>,</span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"44-45"</span> <span class="sc">~</span> <span class="st">"Retail Trade (44â€“45)"</span>,</span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"48-49"</span> <span class="sc">~</span> <span class="st">"Transportation &amp; Warehousing"</span>,</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"51"</span>    <span class="sc">~</span> <span class="st">"Information"</span>,</span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"52"</span>    <span class="sc">~</span> <span class="st">"Finance &amp; Insurance"</span>,</span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"53"</span>    <span class="sc">~</span> <span class="st">"Real Estate &amp; Rental &amp; Leasing"</span>,</span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"54"</span>    <span class="sc">~</span> <span class="st">"Professional, Scientific &amp; Technical"</span>,</span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"55"</span>    <span class="sc">~</span> <span class="st">"Management of Companies"</span>,</span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"56"</span>    <span class="sc">~</span> <span class="st">"Admin &amp; Support, Waste Mgmt"</span>,</span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"61"</span>    <span class="sc">~</span> <span class="st">"Educational Services"</span>,</span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"62"</span>    <span class="sc">~</span> <span class="st">"Health Care &amp; Social Assistance"</span>,</span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"71"</span>    <span class="sc">~</span> <span class="st">"Arts, Entertainment &amp; Recreation"</span>,</span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"72"</span>    <span class="sc">~</span> <span class="st">"Accommodation &amp; Food Services"</span>,</span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>    r <span class="sc">==</span> <span class="st">"81"</span>    <span class="sc">~</span> <span class="st">"Other Services"</span>,</span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>         <span class="sc">~</span> <span class="st">"Other / Unmapped"</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a regex that also handles hyphenated NAICS roots (e.g., "31-33", "48-49")</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>build_root_pattern <span class="ot">&lt;-</span> <span class="cf">function</span>(root) {</span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"-"</span>, root)) {</span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a>    parts <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(root, <span class="st">"-"</span>, <span class="at">fixed =</span> <span class="cn">TRUE</span>)[[<span class="dv">1</span>]]</span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">"^("</span>, <span class="fu">paste</span>(parts, <span class="at">collapse =</span> <span class="st">"|"</span>), <span class="st">")"</span>)</span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">"^"</span>, root)</span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Robust ACS column detection</span></span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a>rent_col <span class="ot">&lt;-</span> <span class="fu">pick_col</span>(RENT,        <span class="fu">c</span>(<span class="st">"monthly_rent"</span>, <span class="st">"B25064_001"</span>),</span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Couldn't find median rent column in RENT"</span>)</span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a>pop_col  <span class="ot">&lt;-</span> <span class="fu">pick_col</span>(POPULATION,  <span class="fu">c</span>(<span class="st">"population"</span>, <span class="st">"B01003_001"</span>),</span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Couldn't find population column in POPULATION"</span>)</span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a><span class="co"># ACS slice (2023): population + median rent by CBSA, joined to metro keys</span></span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a>acs_23 <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cbsa =</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(GEOID, <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cbsa, <span class="at">population =</span> <span class="sc">!!</span><span class="fu">sym</span>(pop_col)) <span class="sc">%&gt;%</span></span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a>    RENT <span class="sc">%&gt;%</span></span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">cbsa =</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(GEOID, <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(cbsa, <span class="at">median_rent =</span> <span class="sc">!!</span><span class="fu">sym</span>(rent_col)),</span>
<span id="cb44-69"><a href="#cb44-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"cbsa"</span></span>
<span id="cb44-70"><a href="#cb44-70" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb44-71"><a href="#cb44-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">select</span>(metros, cbsa, metro_key, metro_label), <span class="at">by =</span> <span class="st">"cbsa"</span>)</span>
<span id="cb44-72"><a href="#cb44-72" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">nrow</span>(acs_23) <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb44-73"><a href="#cb44-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-74"><a href="#cb44-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Function: rent share (median rent as % of avg wage) for a NAICS root</span></span>
<span id="cb44-75"><a href="#cb44-75" aria-hidden="true" tabindex="-1"></a>bls_rent_share_by_root <span class="ot">&lt;-</span> <span class="cf">function</span>(root_code){</span>
<span id="cb44-76"><a href="#cb44-76" aria-hidden="true" tabindex="-1"></a>  patt <span class="ot">&lt;-</span> <span class="fu">build_root_pattern</span>(root_code)</span>
<span id="cb44-77"><a href="#cb44-77" aria-hidden="true" tabindex="-1"></a>  WAGES <span class="sc">%&gt;%</span></span>
<span id="cb44-78"><a href="#cb44-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(YEAR <span class="sc">==</span> <span class="dv">2023</span>, <span class="fu">substr</span>(FIPS, <span class="dv">1</span>, <span class="dv">5</span>) <span class="sc">%in%</span> metros<span class="sc">$</span>fips4) <span class="sc">%&gt;%</span></span>
<span id="cb44-79"><a href="#cb44-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">str_detect</span>(<span class="fu">as.character</span>(INDUSTRY), patt)) <span class="sc">%&gt;%</span></span>
<span id="cb44-80"><a href="#cb44-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">fips4 =</span> <span class="fu">substr</span>(FIPS, <span class="dv">1</span>, <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb44-81"><a href="#cb44-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(fips4) <span class="sc">%&gt;%</span></span>
<span id="cb44-82"><a href="#cb44-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb44-83"><a href="#cb44-83" aria-hidden="true" tabindex="-1"></a>      <span class="at">employment  =</span> <span class="fu">sum</span>(EMPLOYMENT,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-84"><a href="#cb44-84" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_wages =</span> <span class="fu">sum</span>(TOTAL_WAGES, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-85"><a href="#cb44-85" aria-hidden="true" tabindex="-1"></a>      <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb44-86"><a href="#cb44-86" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb44-87"><a href="#cb44-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">avg_wage =</span> total_wages <span class="sc">/</span> <span class="fu">pmax</span>(employment, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb44-88"><a href="#cb44-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(<span class="fu">select</span>(metros, fips4, metro_key), <span class="at">by =</span> <span class="st">"fips4"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-89"><a href="#cb44-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(acs_23, <span class="at">by =</span> <span class="st">"metro_key"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-90"><a href="#cb44-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transmute</span>(</span>
<span id="cb44-91"><a href="#cb44-91" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">NAICS Root</span><span class="st">`</span> <span class="ot">=</span> root_code,</span>
<span id="cb44-92"><a href="#cb44-92" aria-hidden="true" tabindex="-1"></a>      metro_key,</span>
<span id="cb44-93"><a href="#cb44-93" aria-hidden="true" tabindex="-1"></a>      <span class="at">rent_share   =</span> (median_rent <span class="sc">*</span> <span class="dv">12</span>) <span class="sc">/</span> <span class="fu">pmax</span>(avg_wage, <span class="dv">1</span>)  <span class="co"># proportion 0â€“1</span></span>
<span id="cb44-94"><a href="#cb44-94" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb44-95"><a href="#cb44-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> metro_key, <span class="at">values_from =</span> rent_share)</span>
<span id="cb44-96"><a href="#cb44-96" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-97"><a href="#cb44-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-98"><a href="#cb44-98" aria-hidden="true" tabindex="-1"></a><span class="co"># Roots to analyze (two-digit plus standard combo groups)</span></span>
<span id="cb44-99"><a href="#cb44-99" aria-hidden="true" tabindex="-1"></a>roots_to_show <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb44-100"><a href="#cb44-100" aria-hidden="true" tabindex="-1"></a>  <span class="st">"72"</span>,<span class="st">"44"</span>,<span class="st">"62"</span>,<span class="st">"45"</span>,<span class="st">"56"</span>,<span class="st">"54"</span>,<span class="st">"31"</span>,<span class="st">"32"</span>,<span class="st">"33"</span>,<span class="st">"55"</span>,<span class="st">"42"</span>,<span class="st">"52"</span>,</span>
<span id="cb44-101"><a href="#cb44-101" aria-hidden="true" tabindex="-1"></a>  <span class="st">"81"</span>,<span class="st">"23"</span>,<span class="st">"48-49"</span>,<span class="st">"53"</span>,<span class="st">"51"</span>,<span class="st">"71"</span>,<span class="st">"61"</span></span>
<span id="cb44-102"><a href="#cb44-102" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb44-103"><a href="#cb44-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-104"><a href="#cb44-104" aria-hidden="true" tabindex="-1"></a><span class="co"># Build + format the Top-10 table</span></span>
<span id="cb44-105"><a href="#cb44-105" aria-hidden="true" tabindex="-1"></a>rent_gap_tbl <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(roots_to_show, bls_rent_share_by_root) <span class="sc">%&gt;%</span></span>
<span id="cb44-106"><a href="#cb44-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(ATL), <span class="sc">!</span><span class="fu">is.na</span>(PG)) <span class="sc">%&gt;%</span></span>
<span id="cb44-107"><a href="#cb44-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-108"><a href="#cb44-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sector       =</span> <span class="fu">naics_sector_name</span>(<span class="st">`</span><span class="at">NAICS Root</span><span class="st">`</span>),</span>
<span id="cb44-109"><a href="#cb44-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATL          =</span> ATL <span class="sc">*</span> <span class="dv">100</span>,                  <span class="co"># convert to %</span></span>
<span id="cb44-110"><a href="#cb44-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">PG           =</span> PG  <span class="sc">*</span> <span class="dv">100</span>,                  <span class="co"># convert to %</span></span>
<span id="cb44-111"><a href="#cb44-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATL_minus_PG =</span> ATL <span class="sc">-</span> PG                    <span class="co"># percentage-point gap</span></span>
<span id="cb44-112"><a href="#cb44-112" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb44-113"><a href="#cb44-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">NAICS Root</span><span class="st">`</span>, Sector, ATL, PG, ATL_minus_PG) <span class="sc">%&gt;%</span></span>
<span id="cb44-114"><a href="#cb44-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(ATL_minus_PG)) <span class="sc">%&gt;%</span></span>
<span id="cb44-115"><a href="#cb44-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb44-116"><a href="#cb44-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-117"><a href="#cb44-117" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(rent_gap_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb44-118"><a href="#cb44-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb44-119"><a href="#cb44-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb44-120"><a href="#cb44-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align =</span> <span class="st">"left"</span>,</span>
<span id="cb44-121"><a href="#cb44-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>,</span>
<span id="cb44-122"><a href="#cb44-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">16</span>)</span>
<span id="cb44-123"><a href="#cb44-123" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb44-124"><a href="#cb44-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb44-125"><a href="#cb44-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 3: Sector Rent-Burden Gap: Atlanta vs. Punta Gorda (Top 10, 2023)**"</span>),</span>
<span id="cb44-126"><a href="#cb44-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">md</span>(<span class="st">"Which sectors show the largest ATL â†’ PG rent-share differences?"</span>)</span>
<span id="cb44-127"><a href="#cb44-127" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb44-128"><a href="#cb44-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb44-129"><a href="#cb44-129" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">NAICS Root</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"NAICS Root"</span>,</span>
<span id="cb44-130"><a href="#cb44-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sector       =</span> <span class="st">"Sector"</span>,</span>
<span id="cb44-131"><a href="#cb44-131" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATL          =</span> <span class="st">"ATL (%)"</span>,</span>
<span id="cb44-132"><a href="#cb44-132" aria-hidden="true" tabindex="-1"></a>    <span class="at">PG           =</span> <span class="st">"PG (%)"</span>,</span>
<span id="cb44-133"><a href="#cb44-133" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATL_minus_PG =</span> <span class="st">"ATL - PG"</span></span>
<span id="cb44-134"><a href="#cb44-134" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb44-135"><a href="#cb44-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb44-136"><a href="#cb44-136" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb44-137"><a href="#cb44-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb44-138"><a href="#cb44-138" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb44-139"><a href="#cb44-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(ATL, PG, ATL_minus_PG), <span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-140"><a href="#cb44-140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">"left"</span>, <span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb44-141"><a href="#cb44-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="st">"small"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="eaoaopkokq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#eaoaopkokq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#eaoaopkokq thead, #eaoaopkokq tbody, #eaoaopkokq tfoot, #eaoaopkokq tr, #eaoaopkokq td, #eaoaopkokq th {
  border-style: none;
}

#eaoaopkokq p {
  margin: 0;
  padding: 0;
}

#eaoaopkokq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#eaoaopkokq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#eaoaopkokq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#eaoaopkokq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#eaoaopkokq .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eaoaopkokq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eaoaopkokq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eaoaopkokq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#eaoaopkokq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#eaoaopkokq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#eaoaopkokq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#eaoaopkokq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#eaoaopkokq .gt_spanner_row {
  border-bottom-style: hidden;
}

#eaoaopkokq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#eaoaopkokq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#eaoaopkokq .gt_from_md > :first-child {
  margin-top: 0;
}

#eaoaopkokq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#eaoaopkokq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#eaoaopkokq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#eaoaopkokq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#eaoaopkokq .gt_row_group_first td {
  border-top-width: 2px;
}

#eaoaopkokq .gt_row_group_first th {
  border-top-width: 2px;
}

#eaoaopkokq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eaoaopkokq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#eaoaopkokq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#eaoaopkokq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eaoaopkokq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eaoaopkokq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#eaoaopkokq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#eaoaopkokq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#eaoaopkokq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eaoaopkokq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eaoaopkokq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eaoaopkokq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eaoaopkokq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eaoaopkokq .gt_left {
  text-align: left;
}

#eaoaopkokq .gt_center {
  text-align: center;
}

#eaoaopkokq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#eaoaopkokq .gt_font_normal {
  font-weight: normal;
}

#eaoaopkokq .gt_font_bold {
  font-weight: bold;
}

#eaoaopkokq .gt_font_italic {
  font-style: italic;
}

#eaoaopkokq .gt_super {
  font-size: 65%;
}

#eaoaopkokq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#eaoaopkokq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#eaoaopkokq .gt_indent_1 {
  text-indent: 5px;
}

#eaoaopkokq .gt_indent_2 {
  text-indent: 10px;
}

#eaoaopkokq .gt_indent_3 {
  text-indent: 15px;
}

#eaoaopkokq .gt_indent_4 {
  text-indent: 20px;
}

#eaoaopkokq .gt_indent_5 {
  text-indent: 25px;
}

#eaoaopkokq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#eaoaopkokq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="5" class="gt_heading gt_title gt_font_normal"><strong>Table 3: Sector Rent-Burden Gap: Atlanta vs.&nbsp;Punta Gorda (Top 10, 2023)</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Which sectors show the largest ATL â†’ PG rent-share differences?</td>
</tr>
<tr class="gt_col_headings header">
<th id="NAICS-Root" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">NAICS Root</th>
<th id="Sector" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Sector</th>
<th id="ATL" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">ATL (%)</th>
<th id="PG" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">PG (%)</th>
<th id="ATL_minus_PG" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">ATL - PG</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="NAICS Root">72</td>
<td class="gt_row gt_left" headers="Sector">Accommodation &amp; Food Services</td>
<td class="gt_row gt_left" headers="ATL">74.8</td>
<td class="gt_row gt_left" headers="PG">65.3</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">9.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="NAICS Root">44</td>
<td class="gt_row gt_left" headers="Sector">Retail: Autos/Groceries/Gas/Clothing (44xx)</td>
<td class="gt_row gt_left" headers="ATL">41.3</td>
<td class="gt_row gt_left" headers="PG">37.4</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">4.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="NAICS Root">62</td>
<td class="gt_row gt_left" headers="Sector">Health Care &amp; Social Assistance</td>
<td class="gt_row gt_left" headers="ATL">30.0</td>
<td class="gt_row gt_left" headers="PG">28.0</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">2.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="NAICS Root">45</td>
<td class="gt_row gt_left" headers="Sector">Other / Unmapped</td>
<td class="gt_row gt_left" headers="ATL">58.6</td>
<td class="gt_row gt_left" headers="PG">58.7</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">âˆ’0.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="NAICS Root">56</td>
<td class="gt_row gt_left" headers="Sector">Admin &amp; Support, Waste Mgmt</td>
<td class="gt_row gt_left" headers="ATL">34.9</td>
<td class="gt_row gt_left" headers="PG">35.8</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">âˆ’0.8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="NAICS Root">54</td>
<td class="gt_row gt_left" headers="Sector">Professional, Scientific &amp; Technical</td>
<td class="gt_row gt_left" headers="ATL">17.5</td>
<td class="gt_row gt_left" headers="PG">21.2</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">âˆ’3.8</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="NAICS Root">33</td>
<td class="gt_row gt_left" headers="Sector">Manufacturing (33)</td>
<td class="gt_row gt_left" headers="ATL">24.8</td>
<td class="gt_row gt_left" headers="PG">28.6</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">âˆ’3.8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="NAICS Root">55</td>
<td class="gt_row gt_left" headers="Sector">Management of Companies</td>
<td class="gt_row gt_left" headers="ATL">12.8</td>
<td class="gt_row gt_left" headers="PG">17.0</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">âˆ’4.2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="NAICS Root">42</td>
<td class="gt_row gt_left" headers="Sector">Wholesale Trade</td>
<td class="gt_row gt_left" headers="ATL">20.9</td>
<td class="gt_row gt_left" headers="PG">25.5</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">âˆ’4.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="NAICS Root">52</td>
<td class="gt_row gt_left" headers="Sector">Finance &amp; Insurance</td>
<td class="gt_row gt_left" headers="ATL">16.3</td>
<td class="gt_row gt_left" headers="PG">21.6</td>
<td class="gt_row gt_left" headers="ATL_minus_PG">âˆ’5.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<hr>
<p>Based on this comprehensive review, two sectors emerge as optimal for coalition-building:</p>
<ul>
<li>72, Accommodations &amp; Food Services, and</li>
<li>44, Retail Trade.</li>
</ul>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Coalition Snapshot: Food Service (72) &amp; Retail (44) â€” 2023</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper: pick the first existing column name from a set</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>pick_col <span class="ot">&lt;-</span> <span class="cf">function</span>(df, candidates, err_msg){</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  nm <span class="ot">&lt;-</span> <span class="fu">intersect</span>(candidates, <span class="fu">names</span>(df))</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">length</span>(nm)) <span class="fu">stop</span>(err_msg, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  nm[[<span class="dv">1</span>]]</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Target metros (CBSA + BLS FIPS-4), with state abbrev</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>metros <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>metro_key, <span class="sc">~</span>metro_label,                                        <span class="sc">~</span>cbsa,  <span class="sc">~</span>fips4,  <span class="sc">~</span>state_abbr,</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ATL"</span>,      <span class="st">"Atlantaâ€“Sandy Springsâ€“Alpharetta, GA Metro Area"</span>,   <span class="dv">12060</span>L, <span class="st">"C1206"</span>, <span class="st">"GA"</span>,</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PG"</span>,       <span class="st">"Punta Gorda, FL Metro Area"</span>,                        <span class="dv">39460</span>L, <span class="st">"C3946"</span>, <span class="st">"FL"</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Robust ACS column detection</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>rent_col <span class="ot">&lt;-</span> <span class="fu">pick_col</span>(RENT,        <span class="fu">c</span>(<span class="st">"monthly_rent"</span>, <span class="st">"B25064_001"</span>),</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Couldn't find median rent column in RENT"</span>)</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>pop_col  <span class="ot">&lt;-</span> <span class="fu">pick_col</span>(POPULATION,  <span class="fu">c</span>(<span class="st">"population"</span>, <span class="st">"B01003_001"</span>),</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Couldn't find population column in POPULATION"</span>)</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a><span class="co"># ACS slice (2023) joined to metro keys; derive a safe state code</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>acs_23 <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cbsa =</span> <span class="fu">as.integer</span>(stringr<span class="sc">::</span><span class="fu">str_extract</span>(GEOID, <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cbsa, NAME, <span class="at">population =</span> <span class="sc">!!</span><span class="fu">sym</span>(pop_col)) <span class="sc">%&gt;%</span></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>    RENT <span class="sc">%&gt;%</span></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">cbsa =</span> <span class="fu">as.integer</span>(stringr<span class="sc">::</span><span class="fu">str_extract</span>(GEOID, <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(cbsa, <span class="at">median_rent =</span> <span class="sc">!!</span><span class="fu">sym</span>(rent_col)),</span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"cbsa"</span></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(metros, cbsa, metro_key, metro_label, <span class="at">metro_state =</span> state_abbr),</span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"cbsa"</span></span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_from_name  =</span> stringr<span class="sc">::</span><span class="fu">str_match</span>(NAME, <span class="st">",</span><span class="sc">\\</span><span class="st">s([A-Z]{2})"</span>)[,<span class="dv">2</span>],</span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_from_label =</span> stringr<span class="sc">::</span><span class="fu">str_match</span>(metro_label, <span class="st">",</span><span class="sc">\\</span><span class="st">s([A-Z]{2})"</span>)[,<span class="dv">2</span>],</span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_final      =</span> dplyr<span class="sc">::</span><span class="fu">coalesce</span>(metro_state, state_from_name, state_from_label)</span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(metro_key, metro_label, population, median_rent, state_final)</span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">nrow</span>(acs_23) <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Function: compute sector metrics for a 2-digit NAICS root (e.g., "72" or "44")</span></span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>sector_metrics <span class="ot">&lt;-</span> <span class="cf">function</span>(root_code, sector_label){</span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>  patt <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"^"</span>, root_code)</span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>  WAGES <span class="sc">%&gt;%</span></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(YEAR <span class="sc">==</span> <span class="dv">2023</span>, <span class="fu">substr</span>(FIPS, <span class="dv">1</span>, <span class="dv">5</span>) <span class="sc">%in%</span> metros<span class="sc">$</span>fips4) <span class="sc">%&gt;%</span></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">str_detect</span>(<span class="fu">as.character</span>(INDUSTRY), patt)) <span class="sc">%&gt;%</span></span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">fips4 =</span> <span class="fu">substr</span>(FIPS, <span class="dv">1</span>, <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(fips4) <span class="sc">%&gt;%</span></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">employment  =</span> <span class="fu">sum</span>(EMPLOYMENT,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_wages =</span> <span class="fu">sum</span>(TOTAL_WAGES, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">avg_wage =</span> total_wages <span class="sc">/</span> <span class="fu">pmax</span>(employment, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(<span class="fu">select</span>(metros, fips4, metro_key), <span class="at">by =</span> <span class="st">"fips4"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-63"><a href="#cb45-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(acs_23, <span class="at">by =</span> <span class="st">"metro_key"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-64"><a href="#cb45-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transmute</span>(</span>
<span id="cb45-65"><a href="#cb45-65" aria-hidden="true" tabindex="-1"></a>      <span class="at">Metro                    =</span> metro_label,</span>
<span id="cb45-66"><a href="#cb45-66" aria-hidden="true" tabindex="-1"></a>      <span class="at">State                    =</span> state_final,</span>
<span id="cb45-67"><a href="#cb45-67" aria-hidden="true" tabindex="-1"></a>      <span class="at">Sector                   =</span> sector_label,</span>
<span id="cb45-68"><a href="#cb45-68" aria-hidden="true" tabindex="-1"></a>      <span class="at">Employment               =</span> employment,</span>
<span id="cb45-69"><a href="#cb45-69" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Emp / 1k residents</span><span class="st">`</span>     <span class="ot">=</span> <span class="dv">1000</span> <span class="sc">*</span> employment <span class="sc">/</span> population,</span>
<span id="cb45-70"><a href="#cb45-70" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Avg Wage ($)</span><span class="st">`</span>           <span class="ot">=</span> avg_wage,</span>
<span id="cb45-71"><a href="#cb45-71" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Median Rent ($)</span><span class="st">`</span>        <span class="ot">=</span> median_rent,</span>
<span id="cb45-72"><a href="#cb45-72" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span>  <span class="ot">=</span> (median_rent <span class="sc">*</span> <span class="dv">12</span>) <span class="sc">/</span> <span class="fu">pmax</span>(avg_wage, <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb45-73"><a href="#cb45-73" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-74"><a href="#cb45-74" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-75"><a href="#cb45-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-76"><a href="#cb45-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Build the two sectors (two-digit NAICS for consistency)</span></span>
<span id="cb45-77"><a href="#cb45-77" aria-hidden="true" tabindex="-1"></a>s72 <span class="ot">&lt;-</span> <span class="fu">sector_metrics</span>(<span class="st">"72"</span>, <span class="st">"Accommodation &amp; Food Services (NAICS 72)"</span>)</span>
<span id="cb45-78"><a href="#cb45-78" aria-hidden="true" tabindex="-1"></a>s44 <span class="ot">&lt;-</span> <span class="fu">sector_metrics</span>(<span class="st">"44"</span>, <span class="st">"Retail Trade â€” 44xx (Autos/Groceries/Gas/Clothing)"</span>)</span>
<span id="cb45-79"><a href="#cb45-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-80"><a href="#cb45-80" aria-hidden="true" tabindex="-1"></a>out_tbl <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(s72, s44) <span class="sc">%&gt;%</span></span>
<span id="cb45-81"><a href="#cb45-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Metro =</span> <span class="fu">factor</span>(Metro, <span class="at">levels =</span> metros<span class="sc">$</span>metro_label)) <span class="sc">%&gt;%</span></span>
<span id="cb45-82"><a href="#cb45-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Metro, Sector)</span>
<span id="cb45-83"><a href="#cb45-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-84"><a href="#cb45-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop Metro grouping from display; show 7 requested columns</span></span>
<span id="cb45-85"><a href="#cb45-85" aria-hidden="true" tabindex="-1"></a>out_tbl_display <span class="ot">&lt;-</span> out_tbl <span class="sc">%&gt;%</span></span>
<span id="cb45-86"><a href="#cb45-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb45-87"><a href="#cb45-87" aria-hidden="true" tabindex="-1"></a>    State, Sector, Employment, <span class="st">`</span><span class="at">Emp / 1k residents</span><span class="st">`</span>,</span>
<span id="cb45-88"><a href="#cb45-88" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Avg Wage ($)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Median Rent ($)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span></span>
<span id="cb45-89"><a href="#cb45-89" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-90"><a href="#cb45-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-91"><a href="#cb45-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Render clean table (no row-group headers)</span></span>
<span id="cb45-92"><a href="#cb45-92" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(out_tbl_display) <span class="sc">%&gt;%</span></span>
<span id="cb45-93"><a href="#cb45-93" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_options</span>(</span>
<span id="cb45-94"><a href="#cb45-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width  =</span> gt<span class="sc">::</span><span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb45-95"><a href="#cb45-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align  =</span> <span class="st">"left"</span>,   <span class="co"># left-place the whole table block</span></span>
<span id="cb45-96"><a href="#cb45-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>   <span class="co"># left-align title/subtitle</span></span>
<span id="cb45-97"><a href="#cb45-97" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb45-98"><a href="#cb45-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb45-99"><a href="#cb45-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 4: Coalition Snapshot: Food Service (72) &amp; Retail (44) â€” 2023**"</span>),</span>
<span id="cb45-100"><a href="#cb45-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste</span>(</span>
<span id="cb45-101"><a href="#cb45-101" aria-hidden="true" tabindex="-1"></a>      metros<span class="sc">$</span>metro_label[metros<span class="sc">$</span>metro_key <span class="sc">==</span> <span class="st">"ATL"</span>], <span class="st">"â€¢"</span>,</span>
<span id="cb45-102"><a href="#cb45-102" aria-hidden="true" tabindex="-1"></a>      metros<span class="sc">$</span>metro_label[metros<span class="sc">$</span>metro_key <span class="sc">==</span> <span class="st">"PG"</span>]</span>
<span id="cb45-103"><a href="#cb45-103" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-104"><a href="#cb45-104" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb45-105"><a href="#cb45-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb45-106"><a href="#cb45-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb45-107"><a href="#cb45-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb45-108"><a href="#cb45-108" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb45-109"><a href="#cb45-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> Employment, <span class="at">decimals =</span> <span class="dv">0</span>, <span class="at">sep_mark =</span> <span class="st">","</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-110"><a href="#cb45-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Emp / 1k residents</span><span class="st">`</span>, <span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-111"><a href="#cb45-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Avg Wage ($)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Median Rent ($)</span><span class="st">`</span>), <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-112"><a href="#cb45-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span>, <span class="at">decimals =</span> <span class="dv">1</span>, <span class="at">pattern =</span> <span class="st">"{x}%"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-113"><a href="#cb45-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="st">"left"</span>, <span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb45-114"><a href="#cb45-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb45-115"><a href="#cb45-115" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span>(<span class="st">"Sources: **BLS QCEW (employment, avg wages)** â€¢ **ACS (median rent, population)**"</span>)</span>
<span id="cb45-116"><a href="#cb45-116" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="jyggjgpsda" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#jyggjgpsda table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#jyggjgpsda thead, #jyggjgpsda tbody, #jyggjgpsda tfoot, #jyggjgpsda tr, #jyggjgpsda td, #jyggjgpsda th {
  border-style: none;
}

#jyggjgpsda p {
  margin: 0;
  padding: 0;
}

#jyggjgpsda .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jyggjgpsda .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jyggjgpsda .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jyggjgpsda .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jyggjgpsda .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jyggjgpsda .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jyggjgpsda .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jyggjgpsda .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jyggjgpsda .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jyggjgpsda .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jyggjgpsda .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jyggjgpsda .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jyggjgpsda .gt_spanner_row {
  border-bottom-style: hidden;
}

#jyggjgpsda .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jyggjgpsda .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jyggjgpsda .gt_from_md > :first-child {
  margin-top: 0;
}

#jyggjgpsda .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jyggjgpsda .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jyggjgpsda .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#jyggjgpsda .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jyggjgpsda .gt_row_group_first td {
  border-top-width: 2px;
}

#jyggjgpsda .gt_row_group_first th {
  border-top-width: 2px;
}

#jyggjgpsda .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jyggjgpsda .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#jyggjgpsda .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jyggjgpsda .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jyggjgpsda .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jyggjgpsda .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jyggjgpsda .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#jyggjgpsda .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jyggjgpsda .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jyggjgpsda .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jyggjgpsda .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jyggjgpsda .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jyggjgpsda .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jyggjgpsda .gt_left {
  text-align: left;
}

#jyggjgpsda .gt_center {
  text-align: center;
}

#jyggjgpsda .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jyggjgpsda .gt_font_normal {
  font-weight: normal;
}

#jyggjgpsda .gt_font_bold {
  font-weight: bold;
}

#jyggjgpsda .gt_font_italic {
  font-style: italic;
}

#jyggjgpsda .gt_super {
  font-size: 65%;
}

#jyggjgpsda .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#jyggjgpsda .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jyggjgpsda .gt_indent_1 {
  text-indent: 5px;
}

#jyggjgpsda .gt_indent_2 {
  text-indent: 10px;
}

#jyggjgpsda .gt_indent_3 {
  text-indent: 15px;
}

#jyggjgpsda .gt_indent_4 {
  text-indent: 20px;
}

#jyggjgpsda .gt_indent_5 {
  text-indent: 25px;
}

#jyggjgpsda .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#jyggjgpsda div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="7" class="gt_heading gt_title gt_font_normal"><strong>Table 4: Coalition Snapshot: Food Service (72) &amp; Retail (44) â€” 2023</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Atlantaâ€“Sandy Springsâ€“Alpharetta, GA Metro Area â€¢ Punta Gorda, FL Metro Area</td>
</tr>
<tr class="gt_col_headings header">
<th id="State" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">State</th>
<th id="Sector" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Sector</th>
<th id="Employment" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Employment</th>
<th id="Emp-/-1k-residents" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Emp / 1k residents</th>
<th id="Avg-Wage-($)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Avg Wage ($)</th>
<th id="Median-Rent-($)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Median Rent ($)</th>
<th id="Rent-as-%-of-Avg-Wage" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Rent as % of Avg Wage</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="State">GA</td>
<td class="gt_row gt_left" headers="Sector">Accommodation &amp; Food Services (NAICS 72)</td>
<td class="gt_row gt_left" headers="Employment">759,998</td>
<td class="gt_row gt_left" headers="Emp / 1k residents">120.5</td>
<td class="gt_row gt_left" headers="Avg Wage ($)">$27,286</td>
<td class="gt_row gt_left" headers="Median Rent ($)">$1,701</td>
<td class="gt_row gt_left" headers="Rent as % of Avg Wage">74.8%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="State">GA</td>
<td class="gt_row gt_left" headers="Sector">Retail Trade â€” 44xx (Autos/Groceries/Gas/Clothing)</td>
<td class="gt_row gt_left" headers="Employment">444,740</td>
<td class="gt_row gt_left" headers="Emp / 1k residents">70.5</td>
<td class="gt_row gt_left" headers="Avg Wage ($)">$49,398</td>
<td class="gt_row gt_left" headers="Median Rent ($)">$1,701</td>
<td class="gt_row gt_left" headers="Rent as % of Avg Wage">41.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="State">FL</td>
<td class="gt_row gt_left" headers="Sector">Accommodation &amp; Food Services (NAICS 72)</td>
<td class="gt_row gt_left" headers="Employment">26,739</td>
<td class="gt_row gt_left" headers="Emp / 1k residents">129.7</td>
<td class="gt_row gt_left" headers="Avg Wage ($)">$27,952</td>
<td class="gt_row gt_left" headers="Median Rent ($)">$1,520</td>
<td class="gt_row gt_left" headers="Rent as % of Avg Wage">65.3%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="State">FL</td>
<td class="gt_row gt_left" headers="Sector">Retail Trade â€” 44xx (Autos/Groceries/Gas/Clothing)</td>
<td class="gt_row gt_left" headers="Employment">11,046</td>
<td class="gt_row gt_left" headers="Emp / 1k residents">53.6</td>
<td class="gt_row gt_left" headers="Avg Wage ($)">$48,829</td>
<td class="gt_row gt_left" headers="Median Rent ($)">$1,520</td>
<td class="gt_row gt_left" headers="Rent as % of Avg Wage">37.4%</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="7" class="gt_sourcenote">Sources: <strong>BLS QCEW (employment, avg wages)</strong> â€¢ <strong>ACS (median rent, population)</strong></td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rent-Share Gap (Atlanta minus Punta Gorda) â€” 2023 (pp)</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If sector tables from the coalition snapshot aren't in memory, build them</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">"sector_metrics"</span>)) {</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"sector_metrics() not found. Run the coalition snapshot chunk first."</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">"s72"</span>) <span class="sc">||</span> <span class="sc">!</span><span class="fu">exists</span>(<span class="st">"s44"</span>)) {</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  s72 <span class="ot">&lt;-</span> <span class="fu">sector_metrics</span>(<span class="st">"72"</span>, <span class="st">"Accommodation &amp; Food Services (NAICS 72)"</span>)</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  s44 <span class="ot">&lt;-</span> <span class="fu">sector_metrics</span>(<span class="st">"44"</span>, <span class="st">"Retail Trade â€” 44xx (NAICS 44)"</span>)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Assemble and pivot wide</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>gap_input <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(s72, s44) <span class="sc">%&gt;%</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sector, Metro, <span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span>)</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>rent_share_wide <span class="ot">&lt;-</span> gap_input <span class="sc">%&gt;%</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Metro, <span class="at">values_from =</span> <span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span>)</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Metro labels (from your metros tibble)</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>atl_name <span class="ot">&lt;-</span> metros<span class="sc">$</span>metro_label[metros<span class="sc">$</span>metro_key <span class="sc">==</span> <span class="st">"ATL"</span>]</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>pg_name  <span class="ot">&lt;-</span> metros<span class="sc">$</span>metro_label[metros<span class="sc">$</span>metro_key <span class="sc">==</span> <span class="st">"PG"</span>]</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute ATL â€“ PG in percentage points (already percent values)</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>gap_tbl <span class="ot">&lt;-</span> rent_share_wide <span class="sc">%&gt;%</span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>    Sector,</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ATL â€“ PG (pp)</span><span class="st">`</span> <span class="ot">=</span> .data[[atl_name]] <span class="sc">-</span> .data[[pg_name]]</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Render</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(gap_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_options</span>(</span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width  =</span> gt<span class="sc">::</span><span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align  =</span> <span class="st">"left"</span>,   </span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>    </span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 5: Rent-Share Gap (Atlanta minus Punta Gorda) â€” 2023**"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">ATL â€“ PG (pp)</span><span class="st">`</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="ashxenrixl" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ashxenrixl table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ashxenrixl thead, #ashxenrixl tbody, #ashxenrixl tfoot, #ashxenrixl tr, #ashxenrixl td, #ashxenrixl th {
  border-style: none;
}

#ashxenrixl p {
  margin: 0;
  padding: 0;
}

#ashxenrixl .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ashxenrixl .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ashxenrixl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ashxenrixl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ashxenrixl .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ashxenrixl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ashxenrixl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ashxenrixl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ashxenrixl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ashxenrixl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ashxenrixl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ashxenrixl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ashxenrixl .gt_spanner_row {
  border-bottom-style: hidden;
}

#ashxenrixl .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ashxenrixl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ashxenrixl .gt_from_md > :first-child {
  margin-top: 0;
}

#ashxenrixl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ashxenrixl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ashxenrixl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ashxenrixl .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ashxenrixl .gt_row_group_first td {
  border-top-width: 2px;
}

#ashxenrixl .gt_row_group_first th {
  border-top-width: 2px;
}

#ashxenrixl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ashxenrixl .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ashxenrixl .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ashxenrixl .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ashxenrixl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ashxenrixl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ashxenrixl .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ashxenrixl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ashxenrixl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ashxenrixl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ashxenrixl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ashxenrixl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ashxenrixl .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ashxenrixl .gt_left {
  text-align: left;
}

#ashxenrixl .gt_center {
  text-align: center;
}

#ashxenrixl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ashxenrixl .gt_font_normal {
  font-weight: normal;
}

#ashxenrixl .gt_font_bold {
  font-weight: bold;
}

#ashxenrixl .gt_font_italic {
  font-style: italic;
}

#ashxenrixl .gt_super {
  font-size: 65%;
}

#ashxenrixl .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ashxenrixl .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ashxenrixl .gt_indent_1 {
  text-indent: 5px;
}

#ashxenrixl .gt_indent_2 {
  text-indent: 10px;
}

#ashxenrixl .gt_indent_3 {
  text-indent: 15px;
}

#ashxenrixl .gt_indent_4 {
  text-indent: 20px;
}

#ashxenrixl .gt_indent_5 {
  text-indent: 25px;
}

#ashxenrixl .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ashxenrixl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border"><strong>Table 5: Rent-Share Gap (Atlanta minus Punta Gorda) â€” 2023</strong></td>
</tr>
<tr class="gt_col_headings even">
<th id="Sector" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Sector</th>
<th id="ATL-â€“-PG-(pp)" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">ATL â€“ PG (pp)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Sector">Accommodation &amp; Food Services (NAICS 72)</td>
<td class="gt_row gt_right" headers="ATL â€“ PG (pp)">9.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Sector">Retail Trade â€” 44xx (Autos/Groceries/Gas/Clothing)</td>
<td class="gt_row gt_right" headers="ATL â€“ PG (pp)">4.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<hr>
<p>Atlanta exemplifies the supply-constrained growth pattern federal YIMBY grants target: 6.3 million residents growing 12.4% over five years, yet rent burden worsened by 3.0 percentage pointsâ€”the most among large metrosâ€”due to below-average housing construction (score: 84). This gap corresponds to 1.2 million service workers paying 4-10 percentage points more of their wages toward rent compared to workers in successful metros.</p>
<hr>
</section>
<section id="unlocking-atlanta-metros-housing-supply-and-job-growth" class="level2">
<h2 class="anchored" data-anchor-id="unlocking-atlanta-metros-housing-supply-and-job-growth">Unlocking Atlanta Metroâ€™s Housing Supply and Job Growth</h2>
<p>The Atlanta metro currently employs 331,350 construction workers. If the metro matched Punta Gordaâ€™s proven construction intensity of 102.9 workers per 1,000 residents, it would sustain 648,834 construction jobs, representing a potential increase of approximately 317,000 jobs (or 96% sector growth). More construction workers can lead to more housing built, placing more housing in the supply to reduce pressure on rents.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: construction-mechanism</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Data extraction (no output) </span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>s23 <span class="ot">&lt;-</span> <span class="fu">sector_metrics</span>(<span class="st">"23"</span>, <span class="st">"Construction (NAICS 23)"</span>)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get values using NAME search</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>atl_row_data <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span> </span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Atlanta"</span>, NAME, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>atl_pop_value <span class="ot">&lt;-</span> atl_row_data<span class="sc">$</span>population[<span class="dv">1</span>]</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>atl_housing_value <span class="ot">&lt;-</span> atl_row_data<span class="sc">$</span>composite_score[<span class="dv">1</span>]</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>pg_row_data <span class="ot">&lt;-</span> combined_analysis <span class="sc">%&gt;%</span> </span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Punta"</span>, NAME, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>pg_pop_value <span class="ot">&lt;-</span> pg_row_data<span class="sc">$</span>population[<span class="dv">1</span>]</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>pg_housing_value <span class="ot">&lt;-</span> pg_row_data<span class="sc">$</span>composite_score[<span class="dv">1</span>]</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Get construction data from s23</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>pg_const <span class="ot">&lt;-</span> s23 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"FL"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Emp / 1k residents</span><span class="st">`</span>)</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>pg_employment <span class="ot">&lt;-</span> s23 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"FL"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Employment)</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>pg_metro_name <span class="ot">&lt;-</span> s23 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"FL"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Metro)</span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>atl_const <span class="ot">&lt;-</span> s23 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Emp / 1k residents</span><span class="st">`</span>)</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>atl_employment <span class="ot">&lt;-</span> s23 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Employment)</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>atl_metro_name <span class="ot">&lt;-</span> s23 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Metro)</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate job creation potential</span></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>jobs_at_pg_intensity <span class="ot">&lt;-</span> <span class="fu">round</span>(atl_pop_value <span class="sc">*</span> (pg_const <span class="sc">/</span> <span class="dv">1000</span>))</span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>job_gap <span class="ot">&lt;-</span> jobs_at_pg_intensity <span class="sc">-</span> atl_employment</span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Build mechanism table</span></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>mechanism_table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metro =</span> <span class="fu">c</span>(pg_metro_name, atl_metro_name),</span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">State =</span> <span class="fu">c</span>(<span class="st">"FL"</span>, <span class="st">"GA"</span>),</span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Construction jobs per 1K</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(pg_const, atl_const),</span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Housing Score</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(pg_housing_value, atl_housing_value),</span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Hospitality Burden (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>    s72 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"FL"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span>),</span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>    s72 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span>)</span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Retail Burden (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>    s44 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"FL"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span>),</span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>    s44 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Rent as % of Avg Wage</span><span class="st">`</span>)</span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate key metrics</span></span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a>const_diff_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(((pg_const <span class="sc">-</span> atl_const) <span class="sc">/</span> atl_const) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">0</span>)</span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>housing_diff_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(((pg_housing_value <span class="sc">-</span> atl_housing_value) <span class="sc">/</span> atl_housing_value) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">0</span>)</span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a>pg_hosp <span class="ot">&lt;-</span> mechanism_table <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"FL"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Hospitality Burden (%)</span><span class="st">`</span>)</span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>atl_hosp <span class="ot">&lt;-</span> mechanism_table <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Hospitality Burden (%)</span><span class="st">`</span>)</span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a>hosp_gap <span class="ot">&lt;-</span> <span class="fu">round</span>(atl_hosp <span class="sc">-</span> pg_hosp, <span class="dv">1</span>)</span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a>pg_retail <span class="ot">&lt;-</span> mechanism_table <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"FL"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Retail Burden (%)</span><span class="st">`</span>)</span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a>atl_retail <span class="ot">&lt;-</span> mechanism_table <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Retail Burden (%)</span><span class="st">`</span>)</span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a>retail_gap <span class="ot">&lt;-</span> <span class="fu">round</span>(atl_retail <span class="sc">-</span> pg_retail, <span class="dv">1</span>)</span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a>hosp_wage <span class="ot">&lt;-</span> s72 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Avg Wage ($)</span><span class="st">`</span>)</span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a>retail_wage <span class="ot">&lt;-</span> s44 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"GA"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="st">`</span><span class="at">Avg Wage ($)</span><span class="st">`</span>)</span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>hosp_savings <span class="ot">&lt;-</span> <span class="fu">round</span>((hosp_gap <span class="sc">/</span> <span class="dv">100</span>) <span class="sc">*</span> hosp_wage, <span class="dv">0</span>)</span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a>retail_savings <span class="ot">&lt;-</span> <span class="fu">round</span>((retail_gap <span class="sc">/</span> <span class="dv">100</span>) <span class="sc">*</span> retail_wage, <span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: construction-tables</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display mechanism table</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(mechanism_table) <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_options</span>(</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width  =</span> gt<span class="sc">::</span><span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align  =</span> <span class="st">"left"</span>,   </span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>   </span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 6: The Construction Mechanism: Building Intensity â†’ Supply â†’ Affordability**"</span>),</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"How construction employment drives housing supply and worker rent burden (2023)"</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Construction jobs per 1K</span><span class="st">`</span>, <span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Housing Score</span><span class="st">`</span>, <span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Hospitality Burden (%)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Retail Burden (%)</span><span class="st">`</span>), <span class="at">decimals =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="st">"left"</span>, <span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#d4edda"</span>),</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> State <span class="sc">==</span> <span class="st">"FL"</span>)</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#fff3cd"</span>),</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">rows =</span> State <span class="sc">==</span> <span class="st">"GA"</span>)</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span>(<span class="st">"**Pattern:** Higher construction intensity â†’ Higher housing score â†’ Lower rent burden"</span>)</span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="qrnigtyfnh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qrnigtyfnh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qrnigtyfnh thead, #qrnigtyfnh tbody, #qrnigtyfnh tfoot, #qrnigtyfnh tr, #qrnigtyfnh td, #qrnigtyfnh th {
  border-style: none;
}

#qrnigtyfnh p {
  margin: 0;
  padding: 0;
}

#qrnigtyfnh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qrnigtyfnh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qrnigtyfnh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qrnigtyfnh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qrnigtyfnh .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qrnigtyfnh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qrnigtyfnh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qrnigtyfnh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qrnigtyfnh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qrnigtyfnh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qrnigtyfnh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qrnigtyfnh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qrnigtyfnh .gt_spanner_row {
  border-bottom-style: hidden;
}

#qrnigtyfnh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qrnigtyfnh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qrnigtyfnh .gt_from_md > :first-child {
  margin-top: 0;
}

#qrnigtyfnh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qrnigtyfnh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qrnigtyfnh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qrnigtyfnh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qrnigtyfnh .gt_row_group_first td {
  border-top-width: 2px;
}

#qrnigtyfnh .gt_row_group_first th {
  border-top-width: 2px;
}

#qrnigtyfnh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qrnigtyfnh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qrnigtyfnh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qrnigtyfnh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qrnigtyfnh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qrnigtyfnh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qrnigtyfnh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qrnigtyfnh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qrnigtyfnh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qrnigtyfnh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qrnigtyfnh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qrnigtyfnh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qrnigtyfnh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qrnigtyfnh .gt_left {
  text-align: left;
}

#qrnigtyfnh .gt_center {
  text-align: center;
}

#qrnigtyfnh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qrnigtyfnh .gt_font_normal {
  font-weight: normal;
}

#qrnigtyfnh .gt_font_bold {
  font-weight: bold;
}

#qrnigtyfnh .gt_font_italic {
  font-style: italic;
}

#qrnigtyfnh .gt_super {
  font-size: 65%;
}

#qrnigtyfnh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qrnigtyfnh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qrnigtyfnh .gt_indent_1 {
  text-indent: 5px;
}

#qrnigtyfnh .gt_indent_2 {
  text-indent: 10px;
}

#qrnigtyfnh .gt_indent_3 {
  text-indent: 15px;
}

#qrnigtyfnh .gt_indent_4 {
  text-indent: 20px;
}

#qrnigtyfnh .gt_indent_5 {
  text-indent: 25px;
}

#qrnigtyfnh .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qrnigtyfnh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="6" class="gt_heading gt_title gt_font_normal"><strong>Table 6: The Construction Mechanism: Building Intensity â†’ Supply â†’ Affordability</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">How construction employment drives housing supply and worker rent burden (2023)</td>
</tr>
<tr class="gt_col_headings header">
<th id="Metro" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Metro</th>
<th id="State" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">State</th>
<th id="Construction-jobs-per-1K" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Construction jobs per 1K</th>
<th id="Housing-Score" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Housing Score</th>
<th id="Hospitality-Burden-(%)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Hospitality Burden (%)</th>
<th id="Retail-Burden-(%)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Retail Burden (%)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Metro" style="background-color: #D4EDDA">Punta Gorda, FL Metro Area</td>
<td class="gt_row gt_left" headers="State" style="background-color: #D4EDDA">FL</td>
<td class="gt_row gt_left" headers="Construction jobs per 1K" style="background-color: #D4EDDA">102.9</td>
<td class="gt_row gt_left" headers="Housing Score" style="background-color: #D4EDDA">291.7</td>
<td class="gt_row gt_left" headers="Hospitality Burden (%)" style="background-color: #D4EDDA">65.3</td>
<td class="gt_row gt_left" headers="Retail Burden (%)" style="background-color: #D4EDDA">37.4</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Metro" style="background-color: #FFF3CD">Atlantaâ€“Sandy Springsâ€“Alpharetta, GA Metro Area</td>
<td class="gt_row gt_left" headers="State" style="background-color: #FFF3CD">GA</td>
<td class="gt_row gt_left" headers="Construction jobs per 1K" style="background-color: #FFF3CD">52.5</td>
<td class="gt_row gt_left" headers="Housing Score" style="background-color: #FFF3CD">83.5</td>
<td class="gt_row gt_left" headers="Hospitality Burden (%)" style="background-color: #FFF3CD">74.8</td>
<td class="gt_row gt_left" headers="Retail Burden (%)" style="background-color: #FFF3CD">41.3</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="6" class="gt_sourcenote"><strong>Pattern:</strong> Higher construction intensity â†’ Higher housing score â†’ Lower rent burden</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Job creation table</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>job_table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metro =</span> atl_metro_name,</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Current Jobs</span><span class="st">`</span> <span class="ot">=</span> atl_employment,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Jobs at PG Rate</span><span class="st">`</span> <span class="ot">=</span> jobs_at_pg_intensity,</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Job Gap (+)</span><span class="st">`</span> <span class="ot">=</span> job_gap</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(job_table) <span class="sc">%&gt;%</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_options</span>(</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width  =</span> gt<span class="sc">::</span><span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align  =</span> <span class="st">"left"</span>,    </span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span>  </span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 7: Atlanta Construction Employment Projection**"</span>),</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"*Job creation potential if Atlanta matched Punta Gorda's construction jobs rate"</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Current Jobs</span><span class="st">`</span>, <span class="st">`</span><span class="at">Jobs at PG Rate</span><span class="st">`</span>, <span class="st">`</span><span class="at">Job Gap (+)</span><span class="st">`</span>), </span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">decimals =</span> <span class="dv">0</span>, <span class="at">sep_mark =</span> <span class="st">","</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="st">"left"</span>, <span class="at">columns =</span> Metro) <span class="sc">%&gt;%</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="st">"right"</span>, <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Current Jobs</span><span class="st">`</span>, <span class="st">`</span><span class="at">Jobs at PG Rate</span><span class="st">`</span>, <span class="st">`</span><span class="at">Job Gap (+)</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#d1ecf1"</span>),</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Job Gap (+)</span><span class="st">`</span>)</span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Job Gap (+)</span><span class="st">`</span>)</span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span>(<span class="st">"**Calculation:** Atlanta population Ã— Punta Gorda construction per 1K rate"</span>)</span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="dqvmddatje" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dqvmddatje table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dqvmddatje thead, #dqvmddatje tbody, #dqvmddatje tfoot, #dqvmddatje tr, #dqvmddatje td, #dqvmddatje th {
  border-style: none;
}

#dqvmddatje p {
  margin: 0;
  padding: 0;
}

#dqvmddatje .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dqvmddatje .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dqvmddatje .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dqvmddatje .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dqvmddatje .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dqvmddatje .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dqvmddatje .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dqvmddatje .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dqvmddatje .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dqvmddatje .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dqvmddatje .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dqvmddatje .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dqvmddatje .gt_spanner_row {
  border-bottom-style: hidden;
}

#dqvmddatje .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dqvmddatje .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dqvmddatje .gt_from_md > :first-child {
  margin-top: 0;
}

#dqvmddatje .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dqvmddatje .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dqvmddatje .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dqvmddatje .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dqvmddatje .gt_row_group_first td {
  border-top-width: 2px;
}

#dqvmddatje .gt_row_group_first th {
  border-top-width: 2px;
}

#dqvmddatje .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqvmddatje .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dqvmddatje .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dqvmddatje .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dqvmddatje .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqvmddatje .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dqvmddatje .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dqvmddatje .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dqvmddatje .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dqvmddatje .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dqvmddatje .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqvmddatje .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dqvmddatje .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqvmddatje .gt_left {
  text-align: left;
}

#dqvmddatje .gt_center {
  text-align: center;
}

#dqvmddatje .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dqvmddatje .gt_font_normal {
  font-weight: normal;
}

#dqvmddatje .gt_font_bold {
  font-weight: bold;
}

#dqvmddatje .gt_font_italic {
  font-style: italic;
}

#dqvmddatje .gt_super {
  font-size: 65%;
}

#dqvmddatje .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dqvmddatje .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dqvmddatje .gt_indent_1 {
  text-indent: 5px;
}

#dqvmddatje .gt_indent_2 {
  text-indent: 10px;
}

#dqvmddatje .gt_indent_3 {
  text-indent: 15px;
}

#dqvmddatje .gt_indent_4 {
  text-indent: 20px;
}

#dqvmddatje .gt_indent_5 {
  text-indent: 25px;
}

#dqvmddatje .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#dqvmddatje div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="4" class="gt_heading gt_title gt_font_normal"><strong>Table 7: Atlanta Construction Employment Projection</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">*Job creation potential if Atlanta matched Punta Gorda's construction jobs rate</td>
</tr>
<tr class="gt_col_headings header">
<th id="Metro" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Metro</th>
<th id="Current-Jobs" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Current Jobs</th>
<th id="Jobs-at-PG-Rate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Jobs at PG Rate</th>
<th id="Job-Gap-(+)" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Job Gap (+)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Metro">Atlantaâ€“Sandy Springsâ€“Alpharetta, GA Metro Area</td>
<td class="gt_row gt_right" headers="Current Jobs">331,350</td>
<td class="gt_row gt_right" headers="Jobs at PG Rate">648,834</td>
<td class="gt_row gt_right" headers="Job Gap (+)" style="background-color: #D1ECF1; font-weight: bold">317,484</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="4" class="gt_sourcenote"><strong>Calculation:</strong> Atlanta population Ã— Punta Gorda construction per 1K rate</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><em>Note: This projection is likely high based on a simple â€œlinearâ€ assumption that the number of construction jobs will increase at similar rates as population.</em></p>
<hr>
<p>This outcome is plausible as Punta Gorda has sustained a high building rate for years while keeping housing affordable for workers. The relationship between construction intensity, housing supply, and worker affordability is clearer when comparing these two growing metros using the table below.</p>
<hr>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: task7-affordability-comparison-table</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison table</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>affordability_table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metric =</span> <span class="fu">c</span>(</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Construction Intensity"</span>,</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Housing Supply Index"</span>,</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Hospitality Worker Burden"</span>,</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Retail Worker Burden"</span>,</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Worker Population"</span>,</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Total Annual Impact"</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Punta Gorda, FL (Success)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"102.9 workers per 1,000 residents"</span>,</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"291.7 (3Ã— national average)"</span>,</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"65.3% of wage to rent"</span>,</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"37.4% of wage to rent"</span>,</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"38,000 service workers"</span>,</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Baseline (affordable)"</span></span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Atlanta, GA (Opportunity)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"52.5 per 1,000 residents"</span>,</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"84 (17% below average)"</span>,</span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"74.8% (+9.6pp)"</span>,</span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"41.3% (+4.0pp)"</span>,</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1.2M service workers"</span>,</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"$3B in excess rent burden"</span></span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">The Gap</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Atlanta builds at half PG's rate"</span>,</span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PG produces 3.5Ã— more housing per capita"</span>,</span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Costs Atlanta workers $2,619/year more"</span>,</span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Costs Atlanta workers $1,976/year more"</span>,</span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"â€”"</span>,</span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Support unlocks $3B in savings"</span></span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Render with gt</span></span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(affordability_table) <span class="sc">%&gt;%</span></span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.align =</span> <span class="st">"left"</span>,</span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"left"</span></span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Table 8: How Building Drives Affordability: Punta Gorda vs. Atlanta**"</span>)</span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb50-50"><a href="#cb50-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="st">"left"</span>, <span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb50-51"><a href="#cb50-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb50-52"><a href="#cb50-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb50-53"><a href="#cb50-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> Metric)</span>
<span id="cb50-54"><a href="#cb50-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb50-55"><a href="#cb50-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb50-56"><a href="#cb50-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#d4edda"</span>),</span>
<span id="cb50-57"><a href="#cb50-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Punta Gorda, FL (Success)</span><span class="st">`</span>)</span>
<span id="cb50-58"><a href="#cb50-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb50-59"><a href="#cb50-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb50-60"><a href="#cb50-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#fff3cd"</span>),</span>
<span id="cb50-61"><a href="#cb50-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Atlanta, GA (Opportunity)</span><span class="st">`</span>)</span>
<span id="cb50-62"><a href="#cb50-62" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb50-63"><a href="#cb50-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb50-64"><a href="#cb50-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#d1ecf1"</span>),</span>
<span id="cb50-65"><a href="#cb50-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">The Gap</span><span class="st">`</span>)</span>
<span id="cb50-66"><a href="#cb50-66" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb50-67"><a href="#cb50-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb50-68"><a href="#cb50-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb50-69"><a href="#cb50-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb50-70"><a href="#cb50-70" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb50-71"><a href="#cb50-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb50-72"><a href="#cb50-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span>(<span class="st">"*Source: 2023 ACS B25064 (median rent), BLS QCEW (average wages), Census Building Permits*"</span>)</span>
<span id="cb50-73"><a href="#cb50-73" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="dexdpzowlp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dexdpzowlp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dexdpzowlp thead, #dexdpzowlp tbody, #dexdpzowlp tfoot, #dexdpzowlp tr, #dexdpzowlp td, #dexdpzowlp th {
  border-style: none;
}

#dexdpzowlp p {
  margin: 0;
  padding: 0;
}

#dexdpzowlp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dexdpzowlp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dexdpzowlp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dexdpzowlp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dexdpzowlp .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dexdpzowlp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dexdpzowlp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dexdpzowlp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dexdpzowlp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dexdpzowlp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dexdpzowlp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dexdpzowlp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dexdpzowlp .gt_spanner_row {
  border-bottom-style: hidden;
}

#dexdpzowlp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dexdpzowlp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dexdpzowlp .gt_from_md > :first-child {
  margin-top: 0;
}

#dexdpzowlp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dexdpzowlp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dexdpzowlp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dexdpzowlp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dexdpzowlp .gt_row_group_first td {
  border-top-width: 2px;
}

#dexdpzowlp .gt_row_group_first th {
  border-top-width: 2px;
}

#dexdpzowlp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dexdpzowlp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dexdpzowlp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dexdpzowlp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dexdpzowlp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dexdpzowlp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dexdpzowlp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dexdpzowlp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dexdpzowlp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dexdpzowlp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dexdpzowlp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dexdpzowlp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dexdpzowlp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dexdpzowlp .gt_left {
  text-align: left;
}

#dexdpzowlp .gt_center {
  text-align: center;
}

#dexdpzowlp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dexdpzowlp .gt_font_normal {
  font-weight: normal;
}

#dexdpzowlp .gt_font_bold {
  font-weight: bold;
}

#dexdpzowlp .gt_font_italic {
  font-style: italic;
}

#dexdpzowlp .gt_super {
  font-size: 65%;
}

#dexdpzowlp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dexdpzowlp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dexdpzowlp .gt_indent_1 {
  text-indent: 5px;
}

#dexdpzowlp .gt_indent_2 {
  text-indent: 10px;
}

#dexdpzowlp .gt_indent_3 {
  text-indent: 15px;
}

#dexdpzowlp .gt_indent_4 {
  text-indent: 20px;
}

#dexdpzowlp .gt_indent_5 {
  text-indent: 25px;
}

#dexdpzowlp .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#dexdpzowlp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border"><strong>Table 8: How Building Drives Affordability: Punta Gorda vs.&nbsp;Atlanta</strong></td>
</tr>
<tr class="gt_col_headings even">
<th id="Metric" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Metric</th>
<th id="Punta-Gorda,-FL-(Success)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Punta Gorda, FL (Success)</th>
<th id="Atlanta,-GA-(Opportunity)" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Atlanta, GA (Opportunity)</th>
<th id="The-Gap" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">The Gap</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Metric" style="font-weight: bold">Construction Intensity</td>
<td class="gt_row gt_left" headers="Punta Gorda, FL (Success)" style="background-color: #D4EDDA">102.9 workers per 1,000 residents</td>
<td class="gt_row gt_left" headers="Atlanta, GA (Opportunity)" style="background-color: #FFF3CD">52.5 per 1,000 residents</td>
<td class="gt_row gt_left" headers="The Gap" style="background-color: #D1ECF1">Atlanta builds at half PG's rate</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Metric" style="font-weight: bold">Housing Supply Index</td>
<td class="gt_row gt_left" headers="Punta Gorda, FL (Success)" style="background-color: #D4EDDA">291.7 (3Ã— national average)</td>
<td class="gt_row gt_left" headers="Atlanta, GA (Opportunity)" style="background-color: #FFF3CD">84 (17% below average)</td>
<td class="gt_row gt_left" headers="The Gap" style="background-color: #D1ECF1">PG produces 3.5Ã— more housing per capita</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Metric" style="font-weight: bold">Hospitality Worker Burden</td>
<td class="gt_row gt_left" headers="Punta Gorda, FL (Success)" style="background-color: #D4EDDA">65.3% of wage to rent</td>
<td class="gt_row gt_left" headers="Atlanta, GA (Opportunity)" style="background-color: #FFF3CD">74.8% (+9.6pp)</td>
<td class="gt_row gt_left" headers="The Gap" style="background-color: #D1ECF1">Costs Atlanta workers $2,619/year more</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Metric" style="font-weight: bold">Retail Worker Burden</td>
<td class="gt_row gt_left" headers="Punta Gorda, FL (Success)" style="background-color: #D4EDDA">37.4% of wage to rent</td>
<td class="gt_row gt_left" headers="Atlanta, GA (Opportunity)" style="background-color: #FFF3CD">41.3% (+4.0pp)</td>
<td class="gt_row gt_left" headers="The Gap" style="background-color: #D1ECF1">Costs Atlanta workers $1,976/year more</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Metric" style="font-weight: bold">Worker Population</td>
<td class="gt_row gt_left" headers="Punta Gorda, FL (Success)" style="background-color: #D4EDDA">38,000 service workers</td>
<td class="gt_row gt_left" headers="Atlanta, GA (Opportunity)" style="background-color: #FFF3CD">1.2M service workers</td>
<td class="gt_row gt_left" headers="The Gap" style="background-color: #D1ECF1">â€”</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Metric" style="font-weight: bold">Total Annual Impact</td>
<td class="gt_row gt_left" headers="Punta Gorda, FL (Success)" style="background-color: #D4EDDA">Baseline (affordable)</td>
<td class="gt_row gt_left" headers="Atlanta, GA (Opportunity)" style="background-color: #FFF3CD">$3B in excess rent burden</td>
<td class="gt_row gt_left" headers="The Gap" style="background-color: #D1ECF1">Support unlocks $3B in savings</td>
</tr>
</tbody><tfoot>
<tr class="gt_sourcenotes odd">
<td colspan="4" class="gt_sourcenote"><em>Source: 2023 ACS B25064 (median rent), BLS QCEW (average wages), Census Building Permits</em></td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Conclusion:</strong> Federal support to help Atlanta build like Punta Gorda could restore $3 billion annually to working families while creating 317,000+ construction jobs.</p>
<hr>
</section>
<section id="the-federal-yimby-housing-growth-incentive-bill-a-policy-brief" class="level2">
<h2 class="anchored" data-anchor-id="the-federal-yimby-housing-growth-incentive-bill-a-policy-brief"><strong>The Federal YIMBY Housing Growth Incentive Bill: A Policy Brief</strong></h2>
<p><strong>TO:</strong> Interested Congressional Members</p>
<p><strong>RE:</strong> Proposed Sponsors: A primary sponsor from Punta Gorda, FL (YIMBY Success) and a co-sponsor from Atlanta, GA (Opportunity City)</p>
<p><strong>ASK:</strong> Join as a co-sponsor of the Federal YIMBY Housing Growth Incentive Bill, a <strong>voluntary, no-mandates</strong> $500M competitive-grant program that rewards cities for adding homes and lowering rent burden.</p>
<hr>
</section>
<section id="how-the-program-works" class="level2">
<h2 class="anchored" data-anchor-id="how-the-program-works"><strong>1. How the Program Works</strong></h2>
<p>This voluntary, no-mandates program uses existing federal data (Census and BLS) and discretionary spending to direct funds where they produce results.</p>
<ul>
<li><strong>Eligibility:</strong> Open to all metropolitan areas through competitive application.</li>
<li><strong>Scale:</strong> $500M over five years; grants range from $5M-$50M per metro.</li>
<li><strong>Awards:</strong> Planning Grants ($5-15M) for zoning and permitting updates, plus Performance Grants ($25-50M) for areas documenting improvements in housing supply and lowering rent burden.</li>
</ul>
<hr>
</section>
<section id="a-bipartisan-sponsorship-strategy-success-and-opportunity" class="level2">
<h2 class="anchored" data-anchor-id="a-bipartisan-sponsorship-strategy-success-and-opportunity"><strong>2. A Bipartisan Sponsorship Strategy: â€œSuccessâ€ and â€œOpportunityâ€</strong></h2>
<p>Our strategy pairs two districts to prove the model is effective and necessary.</p>
<p><strong>YIMBY Success Sponsor: Punta Gorda, FL</strong></p>
<ul>
<li>Building at three times the national average (Housing Growth Index: 291.7)</li>
<li>Kept rent pressure low despite 13.2% population growth</li>
<li>Qualifies for immediate implementation grants</li>
</ul>
<p><strong>Opportunity Co-Sponsor: Atlanta, GA</strong></p>
<ul>
<li>Construction 17% below national average (Housing Growth Index: 84)</li>
<li>Despite 12.4% population growth, rent burden worsened by 3.0pp</li>
<li>Federal support can create approximately <strong>317,000 construction jobs</strong> (96% increase from current 331K)</li>
</ul>
<p><strong>2023 Evidence (ACS B25064; BLS QCEW):</strong></p>
<ul>
<li>Hospitality (NAICS 72) Rent Burden: ATL 74.8% vs.&nbsp;PG 65.3% (9.6pp gap = <strong>$2,619/year/worker</strong>)</li>
<li>Retail (NAICS 44) Rent Burden: ATL 41.3% vs.&nbsp;PG 37.4% (4.0pp gap = <strong>$1,976/year/worker</strong>)</li>
</ul>
<hr>
</section>
<section id="why-this-bill-a-pro-worker-pro-business-coalition" class="level2">
<h2 class="anchored" data-anchor-id="why-this-bill-a-pro-worker-pro-business-coalition"><strong>3. Why This Bill? A Pro-Worker, Pro-Business Coalition</strong></h2>
<p>This data provides a powerful, targeted message for local supporters:</p>
<ul>
<li><p><strong>For Construction Trades</strong> (AFL-CIO Building Trades, National Association of Home Builders): Atlanta matching Punta Gordaâ€™s building rate creates approximately <strong>317,000 additional jobs</strong>, higher-paying, non-outsourceable employment that supports local trade unions and contractors.</p></li>
<li><p><strong>For Service Workers</strong> (UNITE HERE, United Food and Commercial Workers): Reduces the 9.6pp rent-burden gap for Hospitality workers (<strong>$2,619 savings</strong>) and 4.0pp for Retail workers (<strong>$1,976 savings</strong>). <strong>Scale:</strong> 1,200,000 workers in Atlanta, 38K in Punta Gorda (BLS QCEW 2023). <strong>Total wage power restored: ~$3 billion.</strong></p></li>
<li><p><strong>For Business</strong> (Chambers of Commerce, employers): This bill tackles the primary barrier to employee hiring and retention: high housing costs. By increasing housing supply, it helps ensure workers can afford to live in the communities where they work.</p></li>
</ul>
<p>This bill creates approximately 317,000 jobs, saves workers $2,400 annually, and restores $3 billion in aggregate wages, resulting in a pro-worker, pro-business solution with no mandates.</p>
<hr>
</section>
<section id="scoring-program-safeguards" class="level2">
<h2 class="anchored" data-anchor-id="scoring-program-safeguards"><strong>4. Scoring &amp; Program Safeguards</strong></h2>
<p><strong>Scoring Metrics:</strong></p>
<ul>
<li><strong>Rent Burden by Sector:</strong> Share of a typical Hospitality (NAICS 72) or Retail (NAICS 44) workerâ€™s wage that median local rent would consume.
<ul>
<li>Formula: (ACS B25064 median rent Ã— 12) Ã· (BLS QCEW average wage) Ã— 100</li>
</ul></li>
<li><strong>Housing Growth Index:</strong> Are new housing permits keeping pace with metro size and five-year population growth? (Higher = building enough to meet demand.)
<ul>
<li>Indexed to national average (100)</li>
</ul></li>
<li><strong>Awards</strong> scale with improvement vs.&nbsp;national average and each cityâ€™s five-year baseline.</li>
</ul>
<p><strong>Program Safeguards:</strong></p>
<ul>
<li><strong>Accountability:</strong> Public dashboards track results; independent audits verify spending; five-year sunset forces evaluation before renewal, with expectations in a rise in building permits (years 2-3), increases in local construction jobs (years 3-4), and measurable relief from high rents (years 4-5).</li>
<li><strong>Community Protections:</strong> Funded projects must include tenant protections, affordable unit preservation requirements, and prioritize development near jobs and transit.</li>
<li><strong>Administration:</strong> Uses existing <a href="https://www.hudexchange.info/programs/grants-management/#grants-management-lifecycle" target="_blank">HUD competitive grant processes </a>, simplifying the application process.</li>
</ul>
<hr>
</section>
<section id="the-path-forward" class="level2">
<h2 class="anchored" data-anchor-id="the-path-forward"><strong>5. The Path Forward</strong></h2>
<p>This proposed bill is a sensible solution uniting business and labor: it creates 300K+ construction jobs, saves working families $2,400 annually, and helps employers fill positions. <strong>Potential impact: $3 billion in restored wage power.</strong> Also, by proposing it as a discretionary spending bill, it avoids the need for new budget authorization (existing line item in <a href="https://www.hud.gov/hud-partners/community-cdbg#eg" target="_blank"> HUDâ€™s Community Development Block Grant Program</a>).</p>
<p><strong>Timeline:</strong> Seeking co-sponsors for early 2026 introduction.</p>
<p><strong>We urge you to co-sponsor the Federal YIMBY Housing Growth Incentive Bill!</strong></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/eduardonyc\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>